{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{getTeacherCourses,getCourseAssignments,getCourseStudents,getProblems,getAssignmentCompletionStatus}from'../services/api';import'./StudentDashboardPage.css';import WhaleIcon from'../components/WhaleIcon';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const StudentDashboardPage=()=>{const[activeTab,setActiveTab]=useState('courses');const[activeSubTab,setActiveSubTab]=useState('list');const[courses,setCourses]=useState([]);const[assignments,setAssignments]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');// 课程相关状态（只读，用于查看）\nconst[editingCourse,setEditingCourse]=useState(null);// 作业相关状态\nconst[editingAssignment,setEditingAssignment]=useState(null);const[viewingAssignment,setViewingAssignment]=useState(null);const[assignmentProblems,setAssignmentProblems]=useState([]);// 作业完成状态\nconst[assignmentCompletionStatus,setAssignmentCompletionStatus]=useState({});// 学生-课程关联关系状态\nconst[studentClassRelations,setStudentClassRelations]=useState([]);useEffect(()=>{fetchInitialData();// 添加定期刷新作业完成状态的定时器\nconst refreshInterval=setInterval(()=>{if(editingCourse&&editingCourse.id){fetchAssignmentCompletionStatus(editingCourse.id);}},30000);// 每30秒刷新一次\n// 监听页面可见性变化，当页面重新可见时刷新数据\nconst handleVisibilityChange=()=>{if(!document.hidden&&editingCourse&&editingCourse.id){console.log('页面重新可见，刷新作业完成状态');fetchAssignmentCompletionStatus(editingCourse.id);}};// 监听storage事件，用于跨标签页通信\nconst handleStorageChange=e=>{if(e.key==='submissionStatusChanged'&&editingCourse&&editingCourse.id){console.log('检测到提交状态变化，刷新作业完成状态');fetchAssignmentCompletionStatus(editingCourse.id);// 清除标记\nlocalStorage.removeItem('submissionStatusChanged');}};document.addEventListener('visibilitychange',handleVisibilityChange);window.addEventListener('storage',handleStorageChange);return()=>{clearInterval(refreshInterval);document.removeEventListener('visibilitychange',handleVisibilityChange);window.removeEventListener('storage',handleStorageChange);};},[editingCourse]);// eslint-disable-line react-hooks/exhaustive-deps\n// 从API加载学生-课程关联关系\nconst fetchStudentClassRelations=async courseId=>{try{const courseStudentsData=await getCourseStudents(courseId);if(courseStudentsData&&courseStudentsData.length>0){const apiRelations=courseStudentsData.map(student=>({student_id:student.student_id,class_id:student.class_id,course_id:courseId,student_name:student.student_name,student_no:student.student_no,added_at:student.added_at||new Date().toISOString()}));setStudentClassRelations(apiRelations);}else{setStudentClassRelations([]);}}catch(error){console.error('获取课程学生关联关系失败:',error);setStudentClassRelations([]);}};// 监听课程变化，加载课程学生关联关系\nuseEffect(()=>{const loadCourseStudents=async()=>{if(editingCourse&&editingCourse.id){console.log('开始加载课程学生数据，课程ID:',editingCourse.id);await fetchStudentClassRelations(editingCourse.id);// 同时加载作业完成状态\nawait fetchAssignmentCompletionStatus(editingCourse.id);}};loadCourseStudents();},[editingCourse]);// eslint-disable-next-line react-hooks/exhaustive-deps\n// 获取作业完成状态\nconst fetchAssignmentCompletionStatus=async courseId=>{try{const completionData=await getAssignmentCompletionStatus(courseId);if(completionData&&completionData.assignments){const statusMap={};completionData.assignments.forEach(assignment=>{statusMap[assignment.id]=assignment.completion_status;});setAssignmentCompletionStatus(statusMap);console.log('获取到作业完成状态:',statusMap);}}catch(error){console.error('获取作业完成状态失败:',error);setAssignmentCompletionStatus({});}};const fetchInitialData=async()=>{try{setLoading(true);setError('');setSuccess('');// 获取学生所在的课程数据\ntry{const coursesData=await getTeacherCourses();if(coursesData&&coursesData.courses){setCourses(coursesData.courses);console.log('获取到学生课程数据:',coursesData.courses);}else{setCourses([]);}}catch(error){console.warn('获取课程数据失败:',error);setCourses([]);}// 获取作业数据\ntry{const assignmentsData=await getCourseAssignments();if(assignmentsData&&assignmentsData.assignments){setAssignments(assignmentsData.assignments);console.log('获取到作业数据:',assignmentsData.assignments);}else{setAssignments([]);}}catch(error){console.warn('获取作业数据失败:',error);setAssignments([]);}}catch(error){var _error$response,_error$response$data;setError((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'获取数据失败');console.error('Error fetching data:',error);}finally{setLoading(false);}};// 查看课程详情\nconst handleViewCourseDetail=courseId=>{const course=courses.find(c=>c.id===courseId);if(course){setEditingCourse(course);setActiveSubTab('detail');}};// 查看作业详情\nconst handleViewAssignmentDetail=async assignment=>{try{setViewingAssignment(assignment);// 获取作业包含的题目详情\nif(assignment.problem_ids&&assignment.problem_ids.length>0){try{// 调用API获取题目详情\nconst problemsData=await getProblems(1,100);// 获取前100个题目\nif(problemsData&&problemsData.problems){// 过滤出作业中包含的题目\nconst assignmentProblemsList=problemsData.problems.filter(problem=>assignment.problem_ids.includes(problem.id));// 转换为需要的格式\nconst formattedProblems=assignmentProblemsList.map(problem=>({id:problem.id,title:problem.title||\"\\u9898\\u76EE \".concat(problem.id),description:problem.description||\"\\u8FD9\\u662F\\u4F5C\\u4E1A\\\"\".concat(assignment.name,\"\\\"\\u4E2D\\u7684\\u9898\\u76EE\"),difficulty:problem.difficulty||'未知',type:problem.type||'未知类型'}));setAssignmentProblems(formattedProblems);console.log(\"\\u83B7\\u53D6\\u5230\\u4F5C\\u4E1A\\\"\".concat(assignment.name,\"\\\"\\u7684\\u9898\\u76EE:\"),formattedProblems);}else{// 如果API调用失败，使用题目ID作为备选\nconst formattedProblems=assignment.problem_ids.map((pid,idx)=>({id:pid,title:\"\\u9898\\u76EE \".concat(idx+1),description:\"\\u8FD9\\u662F\\u4F5C\\u4E1A\\\"\".concat(assignment.name,\"\\\"\\u4E2D\\u7684\\u9898\\u76EE\"),difficulty:'未知',type:'未知类型'}));setAssignmentProblems(formattedProblems);}}catch(error){console.warn('获取题目详情失败，使用备选数据:',error);const formattedProblems=assignment.problem_ids.map((pid,idx)=>({id:pid,title:\"\\u9898\\u76EE \".concat(idx+1),description:\"\\u8FD9\\u662F\\u4F5C\\u4E1A\\\"\".concat(assignment.name,\"\\\"\\u4E2D\\u7684\\u9898\\u76EE\"),difficulty:'未知',type:'未知类型'}));setAssignmentProblems(formattedProblems);}}else{setAssignmentProblems([]);}}catch(error){console.error('查看作业详情失败:',error);}};// 关闭作业详情\nconst handleCloseAssignmentDetail=()=>{setViewingAssignment(null);setAssignmentProblems([]);};// 返回课程列表\nconst handleBackToCourses=()=>{setEditingCourse(null);setActiveSubTab('list');};// 格式化日期显示\nconst formatDate=dateString=>{if(!dateString)return'未知';try{const date=new Date(dateString);return date.toLocaleString();}catch(e){return dateString;}};const renderCoursesTab=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sub-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='list'?'active':''),onClick:()=>setActiveSubTab('list'),children:\"\\u8BFE\\u7A0B\\u5217\\u8868\"}),editingCourse&&/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='detail'?'active':''),onClick:()=>setActiveSubTab('detail'),children:\"\\u8BFE\\u7A0B\\u8BE6\\u60C5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[activeSubTab==='list'&&/*#__PURE__*/_jsx(\"div\",{className:\"courses-list\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u52A0\\u8F7D\\u4E2D...\"}):courses.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u6682\\u65E0\\u8BFE\\u7A0B\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"courses-grid\",children:courses.map(course=>/*#__PURE__*/_jsxs(\"div\",{className:\"course-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:course.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"course-code\",children:[\"\\u8BFE\\u7A0B\\u7F16\\u53F7: \",course.id]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"course-desc\",children:course.description||'暂无课程描述'}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-info\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"teacher-name\",children:[\"\\u6388\\u8BFE\\u6559\\u5E08: \",course.teacher_name||'未知']}),/*#__PURE__*/_jsxs(\"span\",{className:\"student-count\",children:[\"\\u5B66\\u751F\\u6570\\u91CF: \",course.student_count||0]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"course-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"view-detail-btn\",onClick:()=>handleViewCourseDetail(course.id),children:\"\\u67E5\\u770B\\u8BE6\\u60C5\"})})]})]},course.id))})}),activeSubTab==='detail'&&editingCourse&&/*#__PURE__*/_jsxs(\"div\",{className:\"course-detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course-detail-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:editingCourse.name}),/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:handleBackToCourses,children:\"\\u8FD4\\u56DE\\u8BFE\\u7A0B\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-info-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\u7F16\\u53F7\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.id})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u6388\\u8BFE\\u6559\\u5E08\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.teacher_name||'未知'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u751F\\u6570\\u91CF\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.student_count||0})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"assignments-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u8BFE\\u7A0B\\u4F5C\\u4E1A\"}),assignments.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BE5\\u8BFE\\u7A0B\\u6682\\u65E0\\u4F5C\\u4E1A\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"assignments-grid\",children:assignments.filter(a=>a.course_id===editingCourse.id).map(assignment=>{const completionStatus=assignmentCompletionStatus[assignment.id];return/*#__PURE__*/_jsxs(\"div\",{className:\"assignment-card\",onClick:()=>handleViewAssignmentDetail(assignment),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"assignment-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:assignment.name}),/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(assignment.is_active?'active':'inactive'),children:assignment.is_active?'进行中':'已结束'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"assignment-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"assignment-desc\",children:assignment.description||'暂无描述'}),/*#__PURE__*/_jsx(\"div\",{className:\"assignment-info\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"due-date\",children:[\"\\u622A\\u6B62\\u65F6\\u95F4: \",formatDate(assignment.due_date)]})}),completionStatus&&/*#__PURE__*/_jsxs(\"div\",{className:\"completion-status\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u5B8C\\u6210\\u72B6\\u6001\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"status-text \".concat(completionStatus.is_completed?'completed':'in-progress'),children:completionStatus.status_text})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u5B8C\\u6210\\u8FDB\\u5EA6\\uFF1A\",/*#__PURE__*/_jsxs(\"span\",{className:\"progress-text\",children:[completionStatus.completed_problems,\"/\",completionStatus.total_problems,\"(\",completionStatus.completion_percentage,\"%)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(completionStatus.completion_percentage,\"%\")}})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"click-hint\",children:\"\\uD83D\\uDCA1 \\u70B9\\u51FB\\u67E5\\u770B\\u4F5C\\u4E1A\\u8BE6\\u60C5\\u548C\\u9898\\u76EE\"})]})]},assignment.id);})})]})]})]})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"student-dashboard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"header-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u5B66\\u751F\\u4EEA\\u8868\\u677F\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u6B22\\u8FCE\\u56DE\\u6765\\uFF0C\",JSON.parse(localStorage.getItem('user')||'{}').name,\"\\uFF01\"]})]})})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-tabs-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-tabs\",children:/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(activeTab==='courses'?'active':''),onClick:()=>{setActiveTab('courses');setActiveSubTab('list');setEditingCourse(null);},children:\"\\u6211\\u7684\\u8BFE\\u7A0B\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-tabs-actions\",children:/*#__PURE__*/_jsx(Link,{to:\"/student/change-password\",className:\"change-password-inline-btn\",children:\"\\uD83D\\uDD10 \\u4FEE\\u6539\\u5BC6\\u7801\"})})]}),activeTab==='courses'&&renderCoursesTab(),viewingAssignment&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:handleCloseAssignmentDetail,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83D\\uDCDD \\u4F5C\\u4E1A\\u8BE6\\u60C5\\uFF1A\",viewingAssignment.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"refresh-btn\",onClick:()=>{if(editingCourse&&editingCourse.id){fetchAssignmentCompletionStatus(editingCourse.id);}},title:\"\\u5237\\u65B0\\u5B8C\\u6210\\u72B6\\u6001\",children:\"\\uD83D\\uDD04 \\u5237\\u65B0\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:handleCloseAssignmentDetail,children:\"\\xD7\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"assignment-detail-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCCB \\u4F5C\\u4E1A\\u4FE1\\u606F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-info-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4F5C\\u4E1A\\u540D\\u79F0\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:viewingAssignment.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4F5C\\u4E1A\\u63CF\\u8FF0\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:viewingAssignment.description||'暂无描述'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4F5C\\u4E1A\\u8981\\u6C42\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:viewingAssignment.requirements||'暂无要求'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u622A\\u6B62\\u65F6\\u95F4\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(viewingAssignment.due_date)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4F5C\\u4E1A\\u72B6\\u6001\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(viewingAssignment.is_active?'active':'inactive'),children:viewingAssignment.is_active?'进行中':'已结束'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9898\\u76EE\\u6570\\u91CF\\uFF1A\"}),/*#__PURE__*/_jsxs(\"span\",{children:[assignmentProblems.length,\"\\u9898\"]})]}),assignmentCompletionStatus[viewingAssignment.id]&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B8C\\u6210\\u72B6\\u6001\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{className:\"completion-status \".concat(assignmentCompletionStatus[viewingAssignment.id].is_completed?'completed':'in-progress'),children:assignmentCompletionStatus[viewingAssignment.id].status_text})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B8C\\u6210\\u8FDB\\u5EA6\\uFF1A\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"progress-text\",children:[assignmentCompletionStatus[viewingAssignment.id].completed_problems,\"/\",assignmentCompletionStatus[viewingAssignment.id].total_problems,\"(\",assignmentCompletionStatus[viewingAssignment.id].completion_percentage,\"%)\"]})]})]})]}),assignmentCompletionStatus[viewingAssignment.id]&&/*#__PURE__*/_jsx(\"div\",{className:\"completion-progress-detail\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(assignmentCompletionStatus[viewingAssignment.id].completion_percentage,\"%\")}})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"assignment-problems-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCDA \\u4F5C\\u4E1A\\u9898\\u76EE\"}),assignmentProblems.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-problems\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BE5\\u4F5C\\u4E1A\\u6682\\u65E0\\u9898\\u76EE\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"problems-list\",children:assignmentProblems.map((problem,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"problem-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"problem-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"problem-number\",children:[\"\\u9898\\u76EE \",index+1]}),/*#__PURE__*/_jsxs(\"span\",{className:\"problem-id\",children:[\"ID: \",problem.id]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"problem-content\",children:[/*#__PURE__*/_jsx(\"h5\",{children:problem.title}),/*#__PURE__*/_jsx(\"p\",{children:problem.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"problem-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"problem-difficulty\",children:[\"\\u96BE\\u5EA6: \",problem.difficulty]}),/*#__PURE__*/_jsxs(\"span\",{className:\"problem-type\",children:[\"\\u7C7B\\u578B: \",problem.type]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"problem-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"view-problem-btn\",onClick:()=>{// 跳转到题目详情页\nwindow.open(\"/problem/\".concat(problem.id),'_blank');},children:\"\\uD83D\\uDC41\\uFE0F \\u67E5\\u770B\\u9898\\u76EE\"})})]})]},problem.id))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"close-modal-btn\",onClick:handleCloseAssignmentDetail,children:\"\\u5173\\u95ED\"})})]})})]});};export default StudentDashboardPage;","map":{"version":3,"names":["React","useState","useEffect","Link","getTeacherCourses","getCourseAssignments","getCourseStudents","getProblems","getAssignmentCompletionStatus","WhaleIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StudentDashboardPage","activeTab","setActiveTab","activeSubTab","setActiveSubTab","courses","setCourses","assignments","setAssignments","loading","setLoading","error","setError","success","setSuccess","editingCourse","setEditingCourse","editingAssignment","setEditingAssignment","viewingAssignment","setViewingAssignment","assignmentProblems","setAssignmentProblems","assignmentCompletionStatus","setAssignmentCompletionStatus","studentClassRelations","setStudentClassRelations","fetchInitialData","refreshInterval","setInterval","id","fetchAssignmentCompletionStatus","handleVisibilityChange","document","hidden","console","log","handleStorageChange","e","key","localStorage","removeItem","addEventListener","window","clearInterval","removeEventListener","fetchStudentClassRelations","courseId","courseStudentsData","length","apiRelations","map","student","student_id","class_id","course_id","student_name","student_no","added_at","Date","toISOString","loadCourseStudents","completionData","statusMap","forEach","assignment","completion_status","coursesData","warn","assignmentsData","_error$response","_error$response$data","response","data","handleViewCourseDetail","course","find","c","handleViewAssignmentDetail","problem_ids","problemsData","problems","assignmentProblemsList","filter","problem","includes","formattedProblems","title","concat","description","name","difficulty","type","pid","idx","handleCloseAssignmentDetail","handleBackToCourses","formatDate","dateString","date","toLocaleString","renderCoursesTab","className","children","onClick","teacher_name","student_count","a","completionStatus","is_active","due_date","is_completed","status_text","completed_problems","total_problems","completion_percentage","style","width","JSON","parse","getItem","to","stopPropagation","requirements","index","open"],"sources":["/Volumes/坞城/OJ_1/frontend/src/pages/StudentDashboardPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getTeacherCourses, getCourseAssignments, getCourseStudents, getProblems, getAssignmentCompletionStatus } from '../services/api';\nimport './StudentDashboardPage.css';\nimport WhaleIcon from '../components/WhaleIcon';\nconst StudentDashboardPage = () => {\n  const [activeTab, setActiveTab] = useState('courses');\n  const [activeSubTab, setActiveSubTab] = useState('list');\n  const [courses, setCourses] = useState([]);\n  const [assignments, setAssignments] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // 课程相关状态（只读，用于查看）\n  const [editingCourse, setEditingCourse] = useState(null);\n\n  // 作业相关状态\n  const [editingAssignment, setEditingAssignment] = useState(null);\n  const [viewingAssignment, setViewingAssignment] = useState(null);\n  const [assignmentProblems, setAssignmentProblems] = useState([]);\n  \n  // 作业完成状态\n  const [assignmentCompletionStatus, setAssignmentCompletionStatus] = useState({});\n\n  // 学生-课程关联关系状态\n  const [studentClassRelations, setStudentClassRelations] = useState([]);\n\n  useEffect(() => {\n    fetchInitialData();\n    \n    // 添加定期刷新作业完成状态的定时器\n    const refreshInterval = setInterval(() => {\n      if (editingCourse && editingCourse.id) {\n        fetchAssignmentCompletionStatus(editingCourse.id);\n      }\n    }, 30000); // 每30秒刷新一次\n    \n    // 监听页面可见性变化，当页面重新可见时刷新数据\n    const handleVisibilityChange = () => {\n      if (!document.hidden && editingCourse && editingCourse.id) {\n        console.log('页面重新可见，刷新作业完成状态');\n        fetchAssignmentCompletionStatus(editingCourse.id);\n      }\n    };\n    \n    // 监听storage事件，用于跨标签页通信\n    const handleStorageChange = (e) => {\n      if (e.key === 'submissionStatusChanged' && editingCourse && editingCourse.id) {\n        console.log('检测到提交状态变化，刷新作业完成状态');\n        fetchAssignmentCompletionStatus(editingCourse.id);\n        // 清除标记\n        localStorage.removeItem('submissionStatusChanged');\n      }\n    };\n    \n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    window.addEventListener('storage', handleStorageChange);\n    \n    return () => {\n      clearInterval(refreshInterval);\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n      window.removeEventListener('storage', handleStorageChange);\n    };\n  }, [editingCourse]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // 从API加载学生-课程关联关系\n  const fetchStudentClassRelations = async (courseId) => {\n    try {\n      const courseStudentsData = await getCourseStudents(courseId);\n      if (courseStudentsData && courseStudentsData.length > 0) {\n        const apiRelations = courseStudentsData.map(student => ({\n          student_id: student.student_id,\n          class_id: student.class_id,\n          course_id: courseId,\n          student_name: student.student_name,\n          student_no: student.student_no,\n          added_at: student.added_at || new Date().toISOString()\n        }));\n        setStudentClassRelations(apiRelations);\n      } else {\n        setStudentClassRelations([]);\n      }\n    } catch (error) {\n      console.error('获取课程学生关联关系失败:', error);\n      setStudentClassRelations([]);\n    }\n  };\n\n  // 监听课程变化，加载课程学生关联关系\n  useEffect(() => {\n    const loadCourseStudents = async () => {\n      if (editingCourse && editingCourse.id) {\n        console.log('开始加载课程学生数据，课程ID:', editingCourse.id);\n        await fetchStudentClassRelations(editingCourse.id);\n        // 同时加载作业完成状态\n        await fetchAssignmentCompletionStatus(editingCourse.id);\n      }\n    };\n    \n    loadCourseStudents();\n  }, [editingCourse]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  // 获取作业完成状态\n  const fetchAssignmentCompletionStatus = async (courseId) => {\n    try {\n      const completionData = await getAssignmentCompletionStatus(courseId);\n      if (completionData && completionData.assignments) {\n        const statusMap = {};\n        completionData.assignments.forEach(assignment => {\n          statusMap[assignment.id] = assignment.completion_status;\n        });\n        setAssignmentCompletionStatus(statusMap);\n        console.log('获取到作业完成状态:', statusMap);\n      }\n    } catch (error) {\n      console.error('获取作业完成状态失败:', error);\n      setAssignmentCompletionStatus({});\n    }\n  };\n\n  const fetchInitialData = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      // 获取学生所在的课程数据\n      try {\n        const coursesData = await getTeacherCourses();\n        if (coursesData && coursesData.courses) {\n          setCourses(coursesData.courses);\n          console.log('获取到学生课程数据:', coursesData.courses);\n        } else {\n          setCourses([]);\n        }\n      } catch (error) {\n        console.warn('获取课程数据失败:', error);\n        setCourses([]);\n      }\n\n      // 获取作业数据\n      try {\n        const assignmentsData = await getCourseAssignments();\n        if (assignmentsData && assignmentsData.assignments) {\n          setAssignments(assignmentsData.assignments);\n          console.log('获取到作业数据:', assignmentsData.assignments);\n        } else {\n          setAssignments([]);\n        }\n      } catch (error) {\n        console.warn('获取作业数据失败:', error);\n        setAssignments([]);\n      }\n      \n    } catch (error) {\n      setError(error?.response?.data?.error || '获取数据失败');\n      console.error('Error fetching data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 查看课程详情\n  const handleViewCourseDetail = (courseId) => {\n    const course = courses.find(c => c.id === courseId);\n    if (course) {\n      setEditingCourse(course);\n      setActiveSubTab('detail');\n    }\n  };\n\n  // 查看作业详情\n  const handleViewAssignmentDetail = async (assignment) => {\n    try {\n      setViewingAssignment(assignment);\n      \n      // 获取作业包含的题目详情\n      if (assignment.problem_ids && assignment.problem_ids.length > 0) {\n        try {\n          // 调用API获取题目详情\n          const problemsData = await getProblems(1, 100); // 获取前100个题目\n          if (problemsData && problemsData.problems) {\n            // 过滤出作业中包含的题目\n            const assignmentProblemsList = problemsData.problems.filter(problem => \n              assignment.problem_ids.includes(problem.id)\n            );\n            \n            // 转换为需要的格式\n            const formattedProblems = assignmentProblemsList.map(problem => ({\n              id: problem.id,\n              title: problem.title || `题目 ${problem.id}`,\n              description: problem.description || `这是作业\"${assignment.name}\"中的题目`,\n              difficulty: problem.difficulty || '未知',\n              type: problem.type || '未知类型'\n            }));\n            \n            setAssignmentProblems(formattedProblems);\n            console.log(`获取到作业\"${assignment.name}\"的题目:`, formattedProblems);\n          } else {\n            // 如果API调用失败，使用题目ID作为备选\n            const formattedProblems = assignment.problem_ids.map((pid, idx) => ({\n              id: pid,\n              title: `题目 ${idx + 1}`,\n              description: `这是作业\"${assignment.name}\"中的题目`,\n              difficulty: '未知',\n              type: '未知类型'\n            }));\n            setAssignmentProblems(formattedProblems);\n          }\n        } catch (error) {\n          console.warn('获取题目详情失败，使用备选数据:', error);\n          const formattedProblems = assignment.problem_ids.map((pid, idx) => ({\n            id: pid,\n            title: `题目 ${idx + 1}`,\n            description: `这是作业\"${assignment.name}\"中的题目`,\n            difficulty: '未知',\n            type: '未知类型'\n          }));\n          setAssignmentProblems(formattedProblems);\n        }\n      } else {\n        setAssignmentProblems([]);\n      }\n    } catch (error) {\n      console.error('查看作业详情失败:', error);\n    }\n  };\n\n  // 关闭作业详情\n  const handleCloseAssignmentDetail = () => {\n    setViewingAssignment(null);\n    setAssignmentProblems([]);\n  };\n\n  // 返回课程列表\n  const handleBackToCourses = () => {\n    setEditingCourse(null);\n    setActiveSubTab('list');\n  };\n\n  // 格式化日期显示\n  const formatDate = (dateString) => {\n    if (!dateString) return '未知';\n    try {\n      const date = new Date(dateString);\n      return date.toLocaleString();\n    } catch (e) {\n      return dateString;\n    }\n  };\n\n  const renderCoursesTab = () => (\n    <div className=\"tab-content\">\n      <div className=\"sub-tabs\">\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'list' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('list')}\n        >\n          课程列表\n        </button>\n        {editingCourse && (\n          <button \n            className={`sub-tab-btn ${activeSubTab === 'detail' ? 'active' : ''}`}\n            onClick={() => setActiveSubTab('detail')}\n          >\n            课程详情\n          </button>\n        )}\n      </div>\n\n      <div className=\"section-content\">\n        {activeSubTab === 'list' && (\n          <div className=\"courses-list\">\n            {loading ? (\n              <div className=\"loading\">加载中...</div>\n            ) : courses.length === 0 ? (\n              <div className=\"empty-state\">\n                <p>暂无课程</p>\n              </div>\n            ) : (\n              <div className=\"courses-grid\">\n                {courses.map(course => (\n                  <div key={course.id} className=\"course-card\">\n                    <div className=\"course-header\">\n                      <h3>{course.name}</h3>\n                      <span className=\"course-code\">课程编号: {course.id}</span>\n                    </div>\n                    <div className=\"course-body\">\n                      <p className=\"course-desc\">{course.description || '暂无课程描述'}</p>\n                      <div className=\"course-info\">\n                        <span className=\"teacher-name\">授课教师: {course.teacher_name || '未知'}</span>\n                        <span className=\"student-count\">学生数量: {course.student_count || 0}</span>\n                      </div>\n                      <div className=\"course-actions\">\n                        <button className=\"view-detail-btn\" onClick={() => handleViewCourseDetail(course.id)}>查看详情</button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeSubTab === 'detail' && editingCourse && (\n          <div className=\"course-detail\">\n            <div className=\"course-detail-header\">\n              <h2>{editingCourse.name}</h2>\n              <button className=\"back-btn\" onClick={handleBackToCourses}>返回课程列表</button>\n            </div>\n            \n            <div className=\"course-info-grid\">\n              <div className=\"info-item\">\n                <label>课程编号</label>\n                <span>{editingCourse.id}</span>\n              </div>\n              <div className=\"info-item\">\n                <label>授课教师</label>\n                <span>{editingCourse.teacher_name || '未知'}</span>\n              </div>\n              <div className=\"info-item\">\n                <label>学生数量</label>\n                <span>{editingCourse.student_count || 0}</span>\n              </div>\n            </div>\n            \n            <div className=\"assignments-section\">\n              <h3>课程作业</h3>\n              {assignments.length === 0 ? (\n                <div className=\"empty-state\">\n                  <p>该课程暂无作业</p>\n                </div>\n              ) : (\n                <div className=\"assignments-grid\">\n                  {assignments\n                    .filter(a => a.course_id === editingCourse.id)\n                    .map(assignment => {\n                      const completionStatus = assignmentCompletionStatus[assignment.id];\n                      return (\n                        <div key={assignment.id} className=\"assignment-card\" onClick={() => handleViewAssignmentDetail(assignment)}>\n                          <div className=\"assignment-header\">\n                            <h4>{assignment.name}</h4>\n                            <span className={`status-badge ${assignment.is_active ? 'active' : 'inactive'}`}>\n                              {assignment.is_active ? '进行中' : '已结束'}\n                            </span>\n                          </div>\n                          <div className=\"assignment-body\">\n                            <p className=\"assignment-desc\">{assignment.description || '暂无描述'}</p>\n                            <div className=\"assignment-info\">\n                              <span className=\"due-date\">截止时间: {formatDate(assignment.due_date)}</span>\n                            </div>\n                            {completionStatus && (\n                              <div className=\"completion-status\">\n                                <p>\n                                  完成状态：\n                                  <span className={`status-text ${completionStatus.is_completed ? 'completed' : 'in-progress'}`}>\n                                    {completionStatus.status_text}\n                                  </span>\n                                </p>\n                                <p>\n                                  完成进度：\n                                  <span className=\"progress-text\">\n                                    {completionStatus.completed_problems}/{completionStatus.total_problems} \n                                    ({completionStatus.completion_percentage}%)\n                                  </span>\n                                </p>\n                                <div className=\"progress-bar\">\n                                  <div \n                                    className=\"progress-fill\" \n                                    style={{ width: `${completionStatus.completion_percentage}%` }}\n                                  ></div>\n                                </div>\n                              </div>\n                            )}\n                            <p className=\"click-hint\">💡 点击查看作业详情和题目</p>\n                          </div>\n                        </div>\n                      );\n                    })}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"student-dashboard\">\n      <div className=\"dashboard-header\">\n        <div className=\"header-content\">\n          <div className=\"header-left\">\n            <h1>学生仪表板</h1>\n            <p>欢迎回来，{JSON.parse(localStorage.getItem('user') || '{}').name}！</p>\n          </div>\n        </div>\n      </div>\n      \n      {error && <div className=\"error-message\">{error}</div>}\n      {success && <div className=\"success-message\">{success}</div>}\n      \n      <div className=\"dashboard-tabs-row\">\n        <div className=\"dashboard-tabs\">\n          <button \n            className={`tab-btn ${activeTab === 'courses' ? 'active' : ''}`}\n            onClick={() => {\n              setActiveTab('courses');\n              setActiveSubTab('list');\n              setEditingCourse(null);\n            }}\n          >\n            我的课程\n          </button>\n        </div>\n        <div className=\"dashboard-tabs-actions\">\n          <Link to=\"/student/change-password\" className=\"change-password-inline-btn\">🔐 修改密码</Link>\n        </div>\n      </div>\n\n      {activeTab === 'courses' && renderCoursesTab()}\n\n      {/* 作业详情弹窗 */}\n      {viewingAssignment && (\n        <div className=\"modal-overlay\" onClick={handleCloseAssignmentDetail}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h3>📝 作业详情：{viewingAssignment.name}</h3>\n              <div className=\"modal-header-actions\">\n                <button \n                  className=\"refresh-btn\"\n                  onClick={() => {\n                    if (editingCourse && editingCourse.id) {\n                      fetchAssignmentCompletionStatus(editingCourse.id);\n                    }\n                  }}\n                  title=\"刷新完成状态\"\n                >\n                  🔄 刷新状态\n                </button>\n                <button className=\"close-btn\" onClick={handleCloseAssignmentDetail}>\n                  ×\n                </button>\n              </div>\n            </div>\n            \n            <div className=\"modal-body\">\n              {/* 作业基本信息 */}\n              <div className=\"assignment-detail-section\">\n                <h4>📋 作业信息</h4>\n                <div className=\"detail-info-grid\">\n                  <div className=\"detail-info-item\">\n                    <label>作业名称：</label>\n                    <span>{viewingAssignment.name}</span>\n                  </div>\n                  <div className=\"detail-info-item\">\n                    <label>作业描述：</label>\n                    <span>{viewingAssignment.description || '暂无描述'}</span>\n                  </div>\n                  <div className=\"detail-info-item\">\n                    <label>作业要求：</label>\n                    <span>{viewingAssignment.requirements || '暂无要求'}</span>\n                  </div>\n                  <div className=\"detail-info-item\">\n                    <label>截止时间：</label>\n                    <span>{formatDate(viewingAssignment.due_date)}</span>\n                  </div>\n                  <div className=\"detail-info-item\">\n                    <label>作业状态：</label>\n                    <span className={`status-badge ${viewingAssignment.is_active ? 'active' : 'inactive'}`}>\n                      {viewingAssignment.is_active ? '进行中' : '已结束'}\n                    </span>\n                  </div>\n                  <div className=\"detail-info-item\">\n                    <label>题目数量：</label>\n                    <span>{assignmentProblems.length}题</span>\n                  </div>\n                  {/* 添加完成状态显示 */}\n                  {assignmentCompletionStatus[viewingAssignment.id] && (\n                    <>\n                      <div className=\"detail-info-item\">\n                        <label>完成状态：</label>\n                        <span className={`completion-status ${assignmentCompletionStatus[viewingAssignment.id].is_completed ? 'completed' : 'in-progress'}`}>\n                          {assignmentCompletionStatus[viewingAssignment.id].status_text}\n                        </span>\n                      </div>\n                      <div className=\"detail-info-item\">\n                        <label>完成进度：</label>\n                        <span className=\"progress-text\">\n                          {assignmentCompletionStatus[viewingAssignment.id].completed_problems}/{assignmentCompletionStatus[viewingAssignment.id].total_problems} \n                          ({assignmentCompletionStatus[viewingAssignment.id].completion_percentage}%)\n                        </span>\n                      </div>\n                    </>\n                  )}\n                </div>\n                \n                {/* 添加进度条显示 */}\n                {assignmentCompletionStatus[viewingAssignment.id] && (\n                  <div className=\"completion-progress-detail\">\n                    <div className=\"progress-bar\">\n                      <div \n                        className=\"progress-fill\" \n                        style={{ width: `${assignmentCompletionStatus[viewingAssignment.id].completion_percentage}%` }}\n                      ></div>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* 作业题目列表 */}\n              <div className=\"assignment-problems-section\">\n                <h4>📚 作业题目</h4>\n                {assignmentProblems.length === 0 ? (\n                  <div className=\"empty-problems\">\n                    <p>该作业暂无题目</p>\n                  </div>\n                ) : (\n                  <div className=\"problems-list\">\n                    {assignmentProblems.map((problem, index) => (\n                      <div key={problem.id} className=\"problem-item\">\n                        <div className=\"problem-header\">\n                          <span className=\"problem-number\">题目 {index + 1}</span>\n                          <span className=\"problem-id\">ID: {problem.id}</span>\n                        </div>\n                        <div className=\"problem-content\">\n                          <h5>{problem.title}</h5>\n                          <p>{problem.description}</p>\n                          <div className=\"problem-meta\">\n                            <span className=\"problem-difficulty\">难度: {problem.difficulty}</span>\n                            <span className=\"problem-type\">类型: {problem.type}</span>\n                          </div>\n                          <div className=\"problem-actions\">\n                            <button \n                              className=\"view-problem-btn\"\n                              onClick={() => {\n                                // 跳转到题目详情页\n                                window.open(`/problem/${problem.id}`, '_blank');\n                              }}\n                            >\n                              👁️ 查看题目\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n            \n            <div className=\"modal-footer\">\n              <button className=\"close-modal-btn\" onClick={handleCloseAssignmentDetail}>\n                关闭\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default StudentDashboardPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}