{"ast":null,"code":"import _objectSpread from\"/Volumes/\\u575E\\u57CE/OJ_1/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{getUsers,getSchools,getMajors,getClasses,batchImportStudents,getProblems,createProblem,updateProblem,deleteProblem,updateUser,deleteUser,registerStudent,getTeacherCourses,getCourseAssignments,createAssignment,updateAssignment,deleteAssignment,getCourseStudents,addStudentToCourse,removeStudentFromCourse,getDepartments,batchImportStudentsFromExcel,excludeOriginalStudent,cancelExcludeOriginalStudent}from'../services/api';import*as XLSX from'xlsx';import'./TeacherDashboardPage.css';import AIProblemGenerationPage from'./AIProblemGenerationPage';import AssignmentWhitelistManager from'../components/AssignmentWhitelistManager';import{mockCourses,mockAssignments,formatDate}from'../testData/courses';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TeacherDashboardPage=()=>{const[activeTab,setActiveTab]=useState('students');const[activeSubTab,setActiveSubTab]=useState('list');// 子标签页\nconst[users,setUsers]=useState([]);const[problems,setProblems]=useState([]);const[schools,setSchools]=useState([]);const[departments,setDepartments]=useState([]);const[majors,setMajors]=useState([]);const[classes,setClasses]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');// 批量导入相关状态\nconst[selectedSchool,setSelectedSchool]=useState('');const[selectedDepartment,setSelectedDepartment]=useState('');const[selectedMajor,setSelectedMajor]=useState('');const[selectedClass,setSelectedClass]=useState('');const[uploadedFile,setUploadedFile]=useState(null);// 手动创建题目相关状态\nconst[problemForm,setProblemForm]=useState({title:'',description:'',type:'programming',// 题目类型：programming(编程题), choice(选择题), judge(判断题), short_answer(简答题)\ntestCases:[],// 测试用例数组，每个元素包含 {id, input, output}\ndifficulty:'easy',time_limit:1000,memory_limit:128,// 选择题相关字段\noptions:[],// 选项数组\ncorrect_answers:[],// 正确答案数组（支持多选）\nis_multiple_choice:false,// 是否多选\n// 简答题相关字段\nanswer:''// 简答题答案\n});// 滚动动画相关状态\nconst[scrollAnimations,setScrollAnimations]=useState({formVisible:false,bottomFormVisible:false});// 课程详情页荷叶式动画状态\nconst[courseDetailAnimations,setCourseDetailAnimations]=useState({courseInfoVisible:false,studentsSectionVisible:false,assignmentsSectionVisible:false});// 编辑题目状态\nconst[editingProblem,setEditingProblem]=useState(null);const[isEditing,setIsEditing]=useState(false);// 测试用例管理函数\nconst addTestCase=()=>{const newTestCase={id:Date.now()+Math.random(),// 生成唯一ID\ninput:'',output:''};setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{testCases:[...prev.testCases,newTestCase]}));};const removeTestCase=testCaseId=>{setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{testCases:prev.testCases.filter(tc=>tc.id!==testCaseId)}));};const updateTestCase=(testCaseId,field,value)=>{setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{testCases:prev.testCases.map(tc=>tc.id===testCaseId?_objectSpread(_objectSpread({},tc),{},{[field]:value}):tc)}));};// 解析后端测试用例格式的函数\nconst parseTestCases=(testCasesStr,expectedOutputStr)=>{if(!testCasesStr&&!expectedOutputStr){return[];}// 优先尝试解析JSON数组格式：[ { input, output }, ... ]\ntry{if(testCasesStr&&testCasesStr.trim().startsWith('[')){const parsed=JSON.parse(testCasesStr);if(Array.isArray(parsed)){return parsed.map((tc,idx)=>({id:Date.now()+Math.random()+idx,input:tc&&typeof tc.input!=='undefined'?String(tc.input):'',output:tc&&typeof tc.output!=='undefined'?String(tc.output):''}));}}}catch(e){// JSON解析失败则回退到旧格式\nconsole.warn('解析JSON测试用例失败，回退旧格式:',e);}const testCases=testCasesStr?testCasesStr.split('\\n').filter(line=>line.trim()):[];const expectedOutputs=expectedOutputStr?expectedOutputStr.split('\\n').filter(line=>line.trim()):[];const maxLength=Math.max(testCases.length,expectedOutputs.length);const result=[];for(let i=0;i<maxLength;i++){result.push({id:Date.now()+Math.random()+i,// 生成唯一ID\ninput:testCases[i]||'',// 如果没有输入则使用空字符串\noutput:expectedOutputs[i]||''// 输出是必填的\n});}return result;};// 添加学生相关状态（按新规则：学号、姓名、密码必填）\nconst[addStudentForm,setAddStudentForm]=useState({student_no:'',name:'',password:'',email:'',phone:'',school_id:'',department_id:'',major_id:'',class_id:''});// 学生编辑相关状态\nconst[editingUser,setEditingUser]=useState(null);const[editForm,setEditForm]=useState({email:'',phone:'',school_id:'',major_id:'',class_id:'',new_password:''});// 课程相关状态（只读，用于查看）\nconst[courses,setCourses]=useState([]);const[editingCourse,setEditingCourse]=useState(null);// 作业相关状态\nconst[assignments,setAssignments]=useState([]);const[assignmentForm,setAssignmentForm]=useState({name:'',description:'',requirements:'',due_date:'',course_id:'',problem_ids:[],// 补交作业相关字段\nallow_overdue_submission:false,overdue_deadline:'',overdue_score_ratio:0.8});// 编辑作业状态\nconst[editingAssignment,setEditingAssignment]=useState(null);const[isEditingAssignment,setIsEditingAssignment]=useState(false);const[editingAssignmentContext,setEditingAssignmentContext]=useState('');// 记录编辑作业时的上下文\n// 添加学生到课程的状态\nconst[addingStudentContext,setAddingStudentContext]=useState('');// 记录添加学生时的上下文\n// 学生-教学班关联关系状态\nconst[studentClassRelations,setStudentClassRelations]=useState([]);// 存储学生与教学班的关联关系\nuseEffect(()=>{fetchInitialData();},[]);// 滚动监听和动画触发\nuseEffect(()=>{const handleScroll=()=>{const scrollY=window.scrollY;const windowHeight=window.innerHeight;const documentHeight=document.documentElement.scrollHeight;// 检测表单是否进入视口\nif(scrollY>100){setScrollAnimations(prev=>_objectSpread(_objectSpread({},prev),{},{formVisible:true}));}// 检测是否接近底部，触发底部表单动画\nif(scrollY+windowHeight>documentHeight-200){setScrollAnimations(prev=>_objectSpread(_objectSpread({},prev),{},{bottomFormVisible:true}));}};window.addEventListener('scroll',handleScroll);// 初始触发\nhandleScroll();return()=>window.removeEventListener('scroll',handleScroll);},[]);// 课程详情页荷叶式动画滚动监听\nuseEffect(()=>{if(activeSubTab==='detail'&&editingCourse){const handleCourseDetailScroll=()=>{const scrollY=window.scrollY;const windowHeight=window.innerHeight;// 课程基本信息 - 当滚动到页面中央时浮现\nif(scrollY>windowHeight*0.3){setCourseDetailAnimations(prev=>_objectSpread(_objectSpread({},prev),{},{courseInfoVisible:true}));}// 教学班学生 - 当滚动到页面中央偏下时浮现\nif(scrollY>windowHeight*0.6){setCourseDetailAnimations(prev=>_objectSpread(_objectSpread({},prev),{},{studentsSectionVisible:true}));}// 已布置作业 - 当滚动到页面底部时浮现\nif(scrollY>windowHeight*0.9){setCourseDetailAnimations(prev=>_objectSpread(_objectSpread({},prev),{},{assignmentsSectionVisible:true}));}};window.addEventListener('scroll',handleCourseDetailScroll);// 初始触发\nhandleCourseDetailScroll();return()=>window.removeEventListener('scroll',handleCourseDetailScroll);}},[activeSubTab,editingCourse]);useEffect(()=>{fetchInitialData();// 监听多种通知方式，用于AI生题成功后的数据刷新\nconst handleStorageChange=e=>{if(e.key==='refreshProblems'&&e.newValue==='true'){console.log('检测到题目创建成功标记，自动刷新题目列表');// 清除标记\nlocalStorage.removeItem('refreshProblems');// 刷新题目列表\nfetchProblems();}};const handleProblemCreated=e=>{console.log('检测到题目创建成功事件，自动刷新题目列表');fetchProblems();};const handleMessage=e=>{if(e.data&&e.data.type==='PROBLEM_CREATED'){console.log('检测到题目创建成功消息，自动刷新题目列表');fetchProblems();}};// 监听storage事件（跨标签页）\nwindow.addEventListener('storage',handleStorageChange);// 监听自定义事件\nwindow.addEventListener('problemCreated',handleProblemCreated);// 监听postMessage\nwindow.addEventListener('message',handleMessage);// 检查是否需要刷新（当前标签页）\nconst shouldRefresh=localStorage.getItem('refreshProblems');if(shouldRefresh==='true'){console.log('检测到题目创建成功标记，自动刷新题目列表');localStorage.removeItem('refreshProblems');fetchProblems();}return()=>{window.removeEventListener('storage',handleStorageChange);window.removeEventListener('problemCreated',handleProblemCreated);window.removeEventListener('message',handleMessage);};},[]);// 从API加载学生-课程关联关系\nconst fetchStudentClassRelations=async courseId=>{try{const courseStudentsData=await getCourseStudents(courseId);if(courseStudentsData&&courseStudentsData.length>0){const apiRelations=courseStudentsData.map(student=>({student_id:student.student_id,class_id:student.class_id,course_id:courseId,student_name:student.student_name,student_no:student.student_no,added_at:student.added_at||new Date().toISOString()}));setStudentClassRelations(apiRelations);}else{setStudentClassRelations([]);}}catch(error){console.error('获取课程学生关联关系失败:',error);setStudentClassRelations([]);}};// 刷新题目列表\nconst fetchProblems=async()=>{try{const problemsData=await getProblems(1,50);if(problemsData&&problemsData.problems){setProblems(problemsData.problems);console.log('题目列表刷新成功，题目数量:',problemsData.problems.length);}}catch(error){console.warn('刷新题目列表失败:',error);}};// 监听课程变化，加载课程学生关联关系\nuseEffect(()=>{const loadCourseStudents=async()=>{if(editingCourse&&editingCourse.id){console.log('开始加载课程学生数据，课程ID:',editingCourse.id);await fetchStudentClassRelations(editingCourse.id);}};loadCourseStudents();},[editingCourse]);// eslint-disable-line react-hooks/exhaustive-deps\nconst fetchInitialData=async()=>{try{setLoading(true);setError('');setSuccess('');const[schoolsData,usersData,problemsData]=await Promise.all([getSchools(),getUsers(1,50,'student'),getProblems(1,50)]);setSchools(schoolsData);setUsers(usersData.users);setProblems(problemsData.problems);// 获取所有专业和班级数据 - 确保schools数据已经设置\nif(schoolsData&&schoolsData.length>0){await fetchAllMajorsAndClasses(schoolsData);}// 调试信息：打印题目数据\nconsole.log('从API获取的题目数据:',problemsData.problems);if(problemsData.problems&&problemsData.problems.length>0){problemsData.problems.forEach((problem,index)=>{console.log(\"\\u9898\\u76EE \".concat(index+1,\":\"),{id:problem.id,title:problem.title,type:problem.type,difficulty:problem.difficulty});});}// 获取课程和作业数据（使用测试数据）\ntry{console.log('开始获取课程和作业数据...');const[coursesData,assignmentsData]=await Promise.all([getTeacherCourses(),getCourseAssignments()]);console.log('API返回的课程数据:',coursesData);console.log('API返回的作业数据:',assignmentsData);if(coursesData&&coursesData.courses){console.log('使用API返回的课程数据，课程数量:',coursesData.courses.length);setCourses(coursesData.courses);}else{console.log('API返回的课程数据无效，使用测试数据');setCourses(mockCourses);}if(assignmentsData&&assignmentsData.assignments){console.log('使用API返回的作业数据，作业数量:',assignmentsData.assignments.length);setAssignments(assignmentsData.assignments);}else{console.log('API返回的作业数据无效，使用测试数据');setAssignments(mockAssignments);}}catch(error){var _error$response;console.warn('获取课程或作业数据失败，使用测试数据:',error);console.log('错误详情:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);setCourses(mockCourses);setAssignments(mockAssignments);}// 学生-课程关联关系数据将在进入课程详情页时从API加载\n}catch(error){var _error$response2,_error$response2$data;setError((error===null||error===void 0?void 0:(_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'获取数据失败');console.error('Error fetching data:',error);}finally{setLoading(false);}};// 获取所有专业和班级数据的函数\nconst fetchAllMajorsAndClasses=async function(){let schoolsData=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;// 防止重复调用\nif(fetchAllMajorsAndClasses.isLoading){console.log('fetchAllMajorsAndClasses 正在执行中，跳过重复调用');return;}fetchAllMajorsAndClasses.isLoading=true;try{// 使用传入的schoolsData参数，如果没有传入则使用state中的schools\nconst schoolsToUse=schoolsData||schools;if(!schoolsToUse||schoolsToUse.length===0){console.warn('没有学校数据，无法获取专业和班级');return;}console.log('开始获取数据，学校数量:',schoolsToUse.length);console.log('学校数据:',schoolsToUse);// 按照正确的层次结构获取数据：学校 → 院部 → 专业 → 班级\nconst allDepartments=[];const allMajors=[];const allClasses=[];for(const school of schoolsToUse){try{console.log(\"\\u6B63\\u5728\\u83B7\\u53D6\\u5B66\\u6821 \".concat(school.id,\" (\").concat(school.name,\") \\u7684\\u6570\\u636E...\"));// 1. 获取学校的院部\nconst departmentsData=await getDepartments(school.id);console.log(\"\\u5B66\\u6821 \".concat(school.id,\" \\u7684\\u9662\\u90E8\\u6570\\u636E:\"),departmentsData);allDepartments.push(...departmentsData);// 2. 获取学校下的所有专业（按school_id过滤）\ntry{console.log(\"\\u6B63\\u5728\\u83B7\\u53D6\\u5B66\\u6821 \".concat(school.id,\" \\u7684\\u4E13\\u4E1A...\"));const majorsData=await getMajors(school.id);console.log(\"\\u5B66\\u6821 \".concat(school.id,\" \\u7684\\u4E13\\u4E1A\\u6570\\u636E:\"),majorsData);allMajors.push(...majorsData);// 3. 获取每个专业的班级\nfor(const major of majorsData){try{console.log(\"\\u6B63\\u5728\\u83B7\\u53D6\\u4E13\\u4E1A \".concat(major.id,\" (\").concat(major.name,\") \\u7684\\u73ED\\u7EA7...\"));const classesData=await getClasses(major.id);console.log(\"\\u4E13\\u4E1A \".concat(major.id,\" \\u7684\\u73ED\\u7EA7\\u6570\\u636E:\"),classesData);allClasses.push(...classesData);}catch(error){console.error(\"\\u83B7\\u53D6\\u4E13\\u4E1A \".concat(major.id,\" \\u7684\\u73ED\\u7EA7\\u5931\\u8D25:\"),error);}}}catch(error){console.error(\"\\u83B7\\u53D6\\u5B66\\u6821 \".concat(school.id,\" \\u7684\\u4E13\\u4E1A\\u5931\\u8D25:\"),error);}}catch(error){console.error(\"\\u83B7\\u53D6\\u5B66\\u6821 \".concat(school.id,\" \\u7684\\u9662\\u90E8\\u5931\\u8D25:\"),error);}}console.log('最终获取到的数据:');console.log('院部:',allDepartments);console.log('专业:',allMajors);console.log('班级:',allClasses);setDepartments(allDepartments);setMajors(allMajors);setClasses(allClasses);console.log('获取到的所有院部:',allDepartments);console.log('获取到的所有专业:',allMajors);console.log('获取到的所有班级:',allClasses);}catch(error){console.error('获取所有院部、专业和班级失败:',error);}finally{fetchAllMajorsAndClasses.isLoading=false;}};const handleSchoolChange=async schoolId=>{setSelectedSchool(schoolId);setSelectedDepartment('');setSelectedMajor('');setSelectedClass('');// 不再重置全局的departments、majors和classes数组\n// 这些数组应该保持完整，用于学生列表显示\n};const handleDepartmentChange=async departmentId=>{setSelectedDepartment(departmentId);setSelectedMajor('');setSelectedClass('');// 不再重置全局的majors和classes数组\n// 这些数组应该保持完整，用于学生列表显示\n};const handleMajorChange=async majorId=>{setSelectedMajor(majorId);setSelectedClass('');// 不再重置全局的classes数组\n// 这个数组应该保持完整，用于学生列表显示\n};const handleBatchImport=async()=>{if(!uploadedFile){setError('请选择要上传的Excel文件');setSuccess('');return;}if(!selectedSchool||!selectedDepartment||!selectedMajor||!selectedClass){setError('请选择学校、院部、专业和班级');setSuccess('');return;}try{var _resp$success_count,_resp$failed_count;setLoading(true);setError('');setSuccess('');// 创建FormData对象来上传文件\nconst formData=new FormData();formData.append('file',uploadedFile);formData.append('school_id',selectedSchool);formData.append('department_id',selectedDepartment);formData.append('major_id',selectedMajor);formData.append('class_id',selectedClass);// 调用新的批量导入API\nconst resp=await batchImportStudentsFromExcel(formData);const msg=(resp===null||resp===void 0?void 0:resp.message)||\"\\u6279\\u91CF\\u5BFC\\u5165\\u5B8C\\u6210: \\u6210\\u529F \".concat((_resp$success_count=resp===null||resp===void 0?void 0:resp.success_count)!==null&&_resp$success_count!==void 0?_resp$success_count:0,\" \\u4E2A, \\u5931\\u8D25 \").concat((_resp$failed_count=resp===null||resp===void 0?void 0:resp.failed_count)!==null&&_resp$failed_count!==void 0?_resp$failed_count:0,\" \\u4E2A\");setSuccess(msg);if(resp!==null&&resp!==void 0&&resp.errors&&resp.errors.length>0){const preview=resp.errors.slice(0,5).join('；');setError(\"\\u90E8\\u5206\\u5BFC\\u5165\\u5931\\u8D25\\uFF1A\".concat(preview).concat(resp.errors.length>5?' 等':''));}// 刷新用户列表\nconst usersData=await getUsers(1,50,'student');setUsers(usersData.users);// 清理上传的文件\nsetUploadedFile(null);}catch(error){var _error$response3,_error$response3$data;setError(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'批量导入失败');}finally{setLoading(false);}};// 下载Excel模板\nconst handleDownloadTemplate=()=>{// 创建Excel模板数据\nconst templateData=[['学号','姓名','密码'],['2021001','张三','123456'],['2021002','李四','123456'],['2021003','王五','123456']];// 创建工作簿\nconst workbook=XLSX.utils.book_new();// 创建工作表\nconst worksheet=XLSX.utils.aoa_to_sheet(templateData);// 设置列宽\nconst colWidths=[{wch:15},// 学号列宽\n{wch:15},// 姓名列宽\n{wch:15}// 密码列宽\n];worksheet['!cols']=colWidths;// 将工作表添加到工作簿\nXLSX.utils.book_append_sheet(workbook,worksheet,'学生信息');// 生成Excel文件并下载\nXLSX.writeFile(workbook,'学生信息导入模板.xlsx');setSuccess('Excel模板下载成功！请填写学生信息后重新上传。');};// 处理文件上传\nconst handleFileUpload=event=>{const file=event.target.files[0];if(file){// 检查文件类型\nconst validTypes=['.xlsx','.xls','.csv'];const fileExtension=file.name.substring(file.name.lastIndexOf('.')).toLowerCase();if(!validTypes.includes(fileExtension)){setError('请选择有效的Excel文件格式（.xlsx, .xls, .csv）');return;}// 检查文件大小（5MB限制）\nif(file.size>5*1024*1024){setError('文件大小不能超过5MB');return;}setUploadedFile(file);setError('');setSuccess('文件选择成功！');}};// 移除上传的文件\nconst handleRemoveFile=()=>{setUploadedFile(null);setError('');setSuccess('');};const handleCreateProblem=async()=>{try{setLoading(true);setError('');setSuccess('');// 构建提交给后端的数据\nconst submitData=_objectSpread({},problemForm);// 如果是选择题，需要将options数组转换为choice_options字符串\nif(problemForm.type==='choice'){// 将选项数组转换为字符串格式：A.选项内容\\nB.选项内容\\nC.选项内容\nsubmitData.choice_options=problemForm.options.map(option=>\"\".concat(option.id,\".\").concat(option.text)).join('\\n');// 将正确答案数组转换为expected_output字符串\nsubmitData.expected_output=problemForm.correct_answers.join(',');// 删除前端特有的字段，避免后端报错\ndelete submitData.options;delete submitData.correct_answers;}// 如果是判断题，需要特殊处理\nif(problemForm.type==='judge'){// 判断题的选项固定为\"正确\"和\"错误\"\nsubmitData.choice_options='A.正确\\nB.错误';// 将正确答案转换为expected_output\nsubmitData.expected_output=problemForm.correct_answers.join(',');// 删除前端特有的字段\ndelete submitData.options;delete submitData.correct_answers;}// 如果是简答题，需要特殊处理\nif(problemForm.type==='short_answer'){// 将简答题答案设置为expected_output\nsubmitData.expected_output=problemForm.answer;// 删除前端特有的字段\ndelete submitData.answer;}// 如果是编程题，改为JSON结构提交测试用例\nif(problemForm.type==='programming'){const testCases=problemForm.testCases||[];if(testCases.length===0){throw new Error('编程题至少需要一个测试用例');}// 以结构化JSON传输，支持多行输入/输出与空输入\nconst structured=testCases.map(tc=>({input:tc.input||'',output:tc.output||''}));submitData.test_cases=JSON.stringify(structured);// expected_output 保留为所有输出拼接（兼容旧后端或列表展示）\nsubmitData.expected_output=testCases.map(tc=>tc.output||'').join('\\n');// 删除前端特有字段\ndelete submitData.testCases;}// 添加调试信息\nconsole.log('提交的题目数据:',submitData);console.log('题目类型:',submitData.type);console.log('完整表单数据:',JSON.stringify(submitData,null,2));if(isEditing&&editingProblem){console.log('更新题目，ID:',editingProblem.id);await updateProblem(editingProblem.id,submitData);setSuccess('题目更新成功！');}else{console.log('创建新题目');await createProblem(submitData);setSuccess('题目创建成功！');}// 重置表单\nsetProblemForm({title:'',description:'',type:'programming',testCases:[],difficulty:'easy',time_limit:1000,memory_limit:128,options:[],correct_answers:[],is_multiple_choice:false,answer:''});setIsEditing(false);setEditingProblem(null);// 刷新题目列表\nconst problemsData=await getProblems(1,50);setProblems(problemsData.problems);// 切换到题目列表\nsetActiveSubTab('list');}catch(error){var _error$response4,_error$response4$data;console.error('题目操作失败:',error);setError(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||error.message||'操作失败');}finally{setLoading(false);}};const handleEditProblem=problem=>{setEditingProblem(problem);// 根据题目类型初始化表单数据\nlet initialOptions=[];let initialCorrectAnswers=[];if(problem.type==='choice'){// 解析选择题的choice_options字符串\nif(problem.choice_options){const optionLines=problem.choice_options.split('\\n').filter(line=>line.trim());initialOptions=optionLines.map((line,index)=>{const match=line.match(/^([A-Z])\\.(.+)$/);if(match){return{id:match[1],// 使用字母ID (A, B, C...)\ntext:match[2].trim(),is_correct:false};}return{id:String.fromCharCode(65+index),// 如果没有匹配到字母，使用默认字母ID\ntext:line.trim(),is_correct:false};});}// 解析expected_output中的正确答案\nif(problem.expected_output){const correctAnswers=problem.expected_output.split(',').filter(ans=>ans.trim());initialCorrectAnswers=correctAnswers;// 设置选项的正确状态\ninitialOptions=initialOptions.map(option=>_objectSpread(_objectSpread({},option),{},{is_correct:correctAnswers.includes(option.id)}));}}else if(problem.type==='judge'){// 判断题固定选项\ninitialOptions=[{id:'A',text:'正确',is_correct:false},{id:'B',text:'错误',is_correct:false}];// 根据expected_output设置正确答案\nif(problem.expected_output){const correctAnswer=problem.expected_output.trim();if(correctAnswer==='A'){initialOptions[0].is_correct=true;initialCorrectAnswers=['A'];}else if(correctAnswer==='B'){initialOptions[1].is_correct=true;initialCorrectAnswers=['B'];}}}setProblemForm({title:problem.title,description:problem.description,type:problem.type||'programming',testCases:problem.type==='programming'?parseTestCases(problem.test_cases,problem.expected_output):[],difficulty:problem.difficulty,time_limit:problem.time_limit||1000,memory_limit:problem.memory_limit||128,options:initialOptions,correct_answers:initialCorrectAnswers,is_multiple_choice:problem.is_multiple_choice||false,answer:problem.answer||''});setIsEditing(true);setActiveSubTab('create');};const handleDeleteProblem=async problemId=>{if(!window.confirm('确定要删除这个题目吗？此操作不可恢复。')){return;}try{setLoading(true);setError('');setSuccess('');await deleteProblem(problemId);setSuccess('题目删除成功！');// 刷新题目列表\nconst problemsData=await getProblems(1,50);setProblems(problemsData.problems);}catch(error){var _error$response5,_error$response5$data;setError(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||'删除题目失败');}finally{setLoading(false);}};// 根据题目特征推断题目类型\nconst inferProblemType=problem=>{console.log('开始推断题目类型，题目数据:',problem);// 优先使用明确设置的题目类型\nif(problem.type&&problem.type!=='undefined'){console.log('使用明确设置的题目类型:',problem.type);return problem.type;}// 如果没有明确设置类型，则通过特征推断\nconsole.log('没有明确设置类型，开始推断...');// 检查所有可能的选项字段\nconst options=problem.options||problem.choices||problem.alternatives||problem.option_list||[];console.log('检查到的选项:',options);// 如果有选项，判断是选择题还是判断题\nif(Array.isArray(options)&&options.length>0){console.log('发现选项，数量:',options.length);// 检查是否是判断题（只有两个选项：正确、错误）\nif(options.length===2){const optionTexts=options.map(opt=>{const text=opt.text||opt.option_text||opt.content||opt.label||'';console.log('选项文本:',text);return text;});if(optionTexts.includes('正确')&&optionTexts.includes('错误')){console.log('推断为判断题');return'judge';}}console.log('推断为选择题');return'choice';}// 检查所有可能的答案字段\nconst answer=problem.answer||problem.solution||problem.correct_answer||problem.answer_text||'';console.log('检查到的答案:',answer);if(answer&&answer.trim()){console.log('推断为简答题');return'short_answer';}// 检查编程题相关字段\nconst testCases=problem.test_cases||problem.test_cases_text||problem.test_input||'';const expectedOutput=problem.expected_output||problem.expected_result||problem.expected_answer||'';console.log('检查到的测试用例:',testCases);console.log('检查到的期望输出:',expectedOutput);if(testCases&&expectedOutput){console.log('推断为编程题');return'programming';}// 如果都无法推断，默认返回编程题\nconsole.log('无法推断类型，默认返回编程题');return'programming';};// 根据ID获取学校名称\nconst getSchoolName=schoolId=>{if(!schoolId)return'-';const school=schools.find(s=>{const sId=s.id;return sId===schoolId||sId===parseInt(schoolId)||parseInt(sId)===schoolId;});return school?school.name:schoolId;};// 根据ID获取专业名称\nconst getMajorName=majorId=>{if(!majorId)return'-';const major=majors.find(m=>{const mId=m.id;return mId===majorId||mId===parseInt(majorId)||parseInt(mId)===majorId;});return major?major.name:majorId;};// 根据ID获取班级名称\nconst getClassName=classId=>{if(!classId)return'-';const classItem=classes.find(c=>{const cId=c.id;return cId===classId||cId===parseInt(classId)||parseInt(cId)===classId;});return classItem?classItem.name:classId;};const handleCancelEdit=()=>{setIsEditing(false);setEditingProblem(null);setProblemForm({title:'',description:'',type:'programming',testCases:[],difficulty:'easy',time_limit:1000,memory_limit:128,options:[],correct_answers:[],is_multiple_choice:false,answer:''});setActiveSubTab('list');};// 课程相关处理函数（只读功能）\nconst handleViewCourseDetail=courseId=>{const course=courses.find(c=>c.id===courseId);if(course){setActiveTab('courses');setActiveSubTab('detail');setEditingCourse(course);}};// 作业相关处理函数\nconst handleCreateAssignment=async()=>{try{setLoading(true);setError('');setSuccess('');// 如果在课程详情页面创建作业，自动设置课程ID\nconst assignmentData=_objectSpread({},assignmentForm);if(activeSubTab==='create-assignment'&&editingCourse){assignmentData.course_id=editingCourse.id;}if(isEditingAssignment&&editingAssignment){await updateAssignment(editingAssignment.id,assignmentData);setSuccess('作业更新成功！');}else{await createAssignment(assignmentData);setSuccess('作业布置成功！');}// 重置表单\nsetAssignmentForm({name:'',description:'',requirements:'',due_date:'',course_id:'',problem_ids:[],// 重置补交设置\nallow_overdue_submission:false,overdue_deadline:'',overdue_score_ratio:0.8});setIsEditingAssignment(false);setEditingAssignment(null);// 刷新作业列表\nconst assignmentsData=await getCourseAssignments();setAssignments(assignmentsData.assignments||[]);// 如果在课程详情页面，返回到课程详情；否则返回到课程列表\nif(activeSubTab==='create-assignment'){setActiveSubTab('detail');}else{setActiveSubTab('list');}}catch(error){var _error$response6,_error$response6$data;setError(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||(isEditingAssignment?'更新作业失败':'布置作业失败'));}finally{setLoading(false);}};const handleEditAssignment=assignment=>{setEditingAssignment(assignment);setAssignmentForm({name:assignment.name,description:assignment.description||'',requirements:assignment.requirements||'',due_date:assignment.due_date||'',course_id:assignment.course_id||'',problem_ids:assignment.problem_ids||[],// 补交作业相关字段\nallow_overdue_submission:assignment.allow_overdue_submission||false,overdue_deadline:assignment.overdue_deadline||'',overdue_score_ratio:assignment.overdue_score_ratio||0.8});setIsEditingAssignment(true);// 记录编辑作业时的上下文\nif(activeSubTab==='detail'&&editingCourse){setEditingAssignmentContext('course-detail');}else{setEditingAssignmentContext('course-list');}// 切换到作业创建模式\nsetActiveSubTab('create-assignment');};const handleDeleteAssignment=async assignmentId=>{if(!window.confirm('确定要删除该作业吗？此操作不可恢复。'))return;try{setLoading(true);setError('');setSuccess('');await deleteAssignment(assignmentId);setSuccess('作业已删除');// 刷新作业列表\nconst assignmentsData=await getCourseAssignments();setAssignments(assignmentsData.assignments||[]);}catch(error){var _error$response7,_error$response7$data;setError(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.error)||'删除作业失败');}finally{setLoading(false);}};// 学生-课程关联关系处理函数\nconst handleAddStudentToCourse=async()=>{if(!editingCourse)return;try{setLoading(true);setError('');setSuccess('');// 查找学生是否已存在\nconst existingStudent=users.find(user=>user.username===addStudentForm.student_no&&user.role==='student');if(!existingStudent){setError('学生不存在，请先创建学生账号');return;}// 使用API添加学生到课程\ntry{const payload={student_id:existingStudent.id};if(editingCourse.class_id){payload.class_id=editingCourse.class_id;}await addStudentToCourse(editingCourse.id,payload);setSuccess('学生已成功添加到课程！');// 重新加载课程学生数据\nconst courseStudentsData=await getCourseStudents(editingCourse.id);if(courseStudentsData&&courseStudentsData.length>0){const apiRelations=courseStudentsData.map(student=>({student_id:student.student_id,class_id:student.class_id,course_id:editingCourse.id,student_name:student.student_name,student_no:student.student_no,added_at:student.added_at||new Date().toISOString()}));setStudentClassRelations(apiRelations);}else{setStudentClassRelations([]);}// 刷新课程列表（因为学生数量发生变化）\ntry{const coursesData=await getTeacherCourses();if(coursesData&&coursesData.courses){setCourses(coursesData.courses);// 更新当前编辑的课程信息\nconst updatedCourse=coursesData.courses.find(c=>c.id===editingCourse.id);if(updatedCourse){setEditingCourse(updatedCourse);}}}catch(error){console.warn('刷新课程列表失败:',error);}}catch(apiError){var _apiError$response,_apiError$response$da;console.error('添加学生到课程失败:',apiError);setError(((_apiError$response=apiError.response)===null||_apiError$response===void 0?void 0:(_apiError$response$da=_apiError$response.data)===null||_apiError$response$da===void 0?void 0:_apiError$response$da.error)||'添加学生失败');return;}// 重置表单\nsetAddStudentForm({student_no:'',name:'',password:'',email:'',phone:'',school_id:'',department_id:'',major_id:'',class_id:''});// 返回到课程详情页\nsetActiveSubTab('detail');}catch(error){var _error$response8,_error$response8$data;setError(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.error)||'添加学生失败');}finally{setLoading(false);}};const handleRemoveStudentFromCourse=async relationId=>{if(!window.confirm('确定要从该课程中移除该学生吗？'))return;try{// 解析relationId获取学生ID和课程ID\nconst[studentId]=relationId.split('_');// 使用API从课程中移除学生\ntry{await removeStudentFromCourse(editingCourse.id,studentId);setSuccess('学生已从课程中移除');// 重新加载课程学生数据\nconst courseStudentsData=await getCourseStudents(editingCourse.id);if(courseStudentsData&&courseStudentsData.length>0){const apiRelations=courseStudentsData.map(student=>({student_id:student.student_id,class_id:student.class_id,course_id:editingCourse.id,student_name:student.student_name,student_no:student.student_no,added_at:student.added_at||new Date().toISOString()}));setStudentClassRelations(apiRelations);}else{setStudentClassRelations([]);}// 刷新课程列表（因为学生数量发生变化）\ntry{const coursesData=await getTeacherCourses();if(coursesData&&coursesData.courses){setCourses(coursesData.courses);// 更新当前编辑的课程信息\nconst updatedCourse=coursesData.courses.find(c=>c.id===editingCourse.id);if(updatedCourse){setEditingCourse(updatedCourse);}}}catch(error){console.warn('刷新课程列表失败:',error);}}catch(apiError){var _apiError$response2,_apiError$response2$d;console.error('从课程中移除学生失败:',apiError);setError(((_apiError$response2=apiError.response)===null||_apiError$response2===void 0?void 0:(_apiError$response2$d=_apiError$response2.data)===null||_apiError$response2$d===void 0?void 0:_apiError$response2$d.error)||'移除学生失败');return;}}catch(error){setError('移除学生失败');}};// 学生管理标签页渲染函数\nconst renderStudentsTab=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sub-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='list'?'active':''),onClick:()=>setActiveSubTab('list'),children:\"\\u5B66\\u751F\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='add'?'active':''),onClick:()=>setActiveSubTab('add'),children:\"\\u6DFB\\u52A0\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='import'?'active':''),onClick:()=>setActiveSubTab('import'),children:\"\\u6279\\u91CF\\u5BFC\\u5165\"})]}),activeSubTab==='list'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u5B66\\u751F\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>setActiveSubTab('add'),children:\"\\u6DFB\\u52A0\\u5B66\\u751F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"students-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u5B66\\u53F7\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u59D3\\u540D\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u90AE\\u7BB1\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u624B\\u673A\\u53F7\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u5B66\\u6821\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u4E13\\u4E1A\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u73ED\\u7EA7\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u64CD\\u4F5C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.id}),/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email||'-'}),/*#__PURE__*/_jsx(\"td\",{children:user.phone||'-'}),/*#__PURE__*/_jsx(\"td\",{children:getSchoolName(user.school_id)}),/*#__PURE__*/_jsx(\"td\",{children:getMajorName(user.major_id)}),/*#__PURE__*/_jsx(\"td\",{children:getClassName(user.class_id)}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit\",onClick:()=>handleEditStudentClick(user),children:\"\\u7F16\\u8F91\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleDeleteStudent(user.id),children:\"\\u5220\\u9664\"})]})]},user.id))})]})})]}),activeSubTab==='add'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u2795 \\u6DFB\\u52A0\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('list'),children:\"\\u2190 \\u8FD4\\u56DE\\u5B66\\u751F\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-student-form \".concat(scrollAnimations.formVisible?'form-visible':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5B66\\u53F7\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u53F7\",value:addStudentForm.student_no,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{student_no:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u59D3\\u540D\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u751F\\u59D3\\u540D\",value:addStudentForm.name,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5BC6\\u7801\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u521D\\u59CB\\u5BC6\\u7801\",value:addStudentForm.password,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{password:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u90AE\\u7BB1\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\",value:addStudentForm.email,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{email:e.target.value}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u624B\\u673A\\u53F7\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801\",value:addStudentForm.phone,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{phone:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u6821\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:addStudentForm.school_id,onChange:e=>handleAddStudentSchoolChange(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u5B66\\u6821\\uFF08\\u53EF\\u9009\\uFF09\"}),schools.map(school=>/*#__PURE__*/_jsx(\"option\",{value:school.id,children:school.name},school.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9662\\u90E8\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:addStudentForm.department_id,onChange:e=>handleAddStudentDepartmentChange(e.target.value),disabled:!addStudentForm.school_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u9662\\u90E8\\uFF08\\u53EF\\u9009\\uFF09\"}),getAddStudentSchoolDepartments().map(department=>/*#__PURE__*/_jsx(\"option\",{value:department.id,children:department.name},department.id))]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666',marginTop:'5px'},children:[\"\\u5F53\\u524D\\u5B66\\u6821ID: \",addStudentForm.school_id,\" | \\u53EF\\u7528\\u9662\\u90E8\\u6570\\u91CF: \",getAddStudentSchoolDepartments().length,\" | \\u603B\\u9662\\u90E8\\u6570\\u91CF: \",departments.length]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4E13\\u4E1A\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:addStudentForm.major_id,onChange:e=>handleAddStudentMajorChange(e.target.value),disabled:!addStudentForm.department_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u4E13\\u4E1A\\uFF08\\u53EF\\u9009\\uFF09\"}),getAddStudentDepartmentMajors().map(major=>/*#__PURE__*/_jsx(\"option\",{value:major.id,children:major.name},major.id))]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666',marginTop:'5px'},children:[\"\\u5F53\\u524D\\u9662\\u90E8ID: \",addStudentForm.department_id,\" | \\u53EF\\u7528\\u4E13\\u4E1A\\u6570\\u91CF: \",getAddStudentDepartmentMajors().length,\" | \\u603B\\u4E13\\u4E1A\\u6570\\u91CF: \",majors.length]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u73ED\\u7EA7\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:addStudentForm.class_id,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{class_id:e.target.value})),disabled:!addStudentForm.major_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u73ED\\u7EA7\\uFF08\\u53EF\\u9009\\uFF09\"}),getAddStudentMajorClasses().map(classItem=>/*#__PURE__*/_jsx(\"option\",{value:classItem.id,children:classItem.name},classItem.id))]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666',marginTop:'5px'},children:[\"\\u5F53\\u524D\\u4E13\\u4E1AID: \",addStudentForm.major_id,\" | \\u53EF\\u7528\\u73ED\\u7EA7\\u6570\\u91CF: \",getAddStudentMajorClasses().length,\" | \\u603B\\u73ED\\u7EA7\\u6570\\u91CF: \",classes.length]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions \".concat(scrollAnimations.bottomFormVisible?'bottom-form-visible':''),children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleAddStudent,disabled:loading||!addStudentForm.student_no||!addStudentForm.name||!addStudentForm.password,children:loading?'创建中...':'创建学生账号'})})]})]}),activeSubTab==='import'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCE5 \\u6279\\u91CF\\u5BFC\\u5165\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('list'),children:\"\\u2190 \\u8FD4\\u56DE\\u5B66\\u751F\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"import-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-help\",style:{display:'block',visibility:'visible',opacity:'1',background:'#f8f9fa',padding:'20px',borderRadius:'8px',borderLeft:'4px solid #667eea',marginBottom:'25px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'#333',fontSize:'18px',fontWeight:'600',margin:'0 0 15px 0'},children:\"\\u5BFC\\u5165\\u8BF4\\u660E\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#666',fontSize:'14px',lineHeight:'1.6',margin:'10px 0'},children:\"\\u8BF7\\u6309\\u4EE5\\u4E0B\\u6B65\\u9AA4\\u64CD\\u4F5C\\uFF1A\"}),/*#__PURE__*/_jsxs(\"ol\",{style:{margin:'15px 0',paddingLeft:'20px'},children:[/*#__PURE__*/_jsx(\"li\",{style:{margin:'8px 0',color:'#495057',lineHeight:'1.5'},children:\"\\u70B9\\u51FB\\u4E0B\\u65B9\\\"\\u4E0B\\u8F7DExcel\\u6A21\\u677F\\\"\\u6309\\u94AE\\uFF0C\\u4E0B\\u8F7D\\u6807\\u51C6\\u683C\\u5F0F\\u7684Excel\\u6587\\u4EF6\\uFF08.xlsx\\u683C\\u5F0F\\uFF09\"}),/*#__PURE__*/_jsx(\"li\",{style:{margin:'8px 0',color:'#495057',lineHeight:'1.5'},children:\"\\u5728Excel\\u6587\\u4EF6\\u4E2D\\u586B\\u5199\\u5B66\\u751F\\u4FE1\\u606F\\uFF08\\u5B66\\u53F7\\u3001\\u59D3\\u540D\\u3001\\u5BC6\\u7801\\uFF09\"}),/*#__PURE__*/_jsx(\"li\",{style:{margin:'8px 0',color:'#495057',lineHeight:'1.5'},children:\"\\u9009\\u62E9\\u5B66\\u6821\\u3001\\u9662\\u90E8\\u3001\\u4E13\\u4E1A\\u3001\\u73ED\\u7EA7\\u4FE1\\u606F\"}),/*#__PURE__*/_jsx(\"li\",{style:{margin:'8px 0',color:'#495057',lineHeight:'1.5'},children:\"\\u4E0A\\u4F20\\u586B\\u5199\\u597D\\u7684Excel\\u6587\\u4EF6\"}),/*#__PURE__*/_jsx(\"li\",{style:{margin:'8px 0',color:'#495057',lineHeight:'1.5'},children:\"\\u7CFB\\u7EDF\\u5C06\\u81EA\\u52A8\\u8BC6\\u522B\\u5E76\\u6DFB\\u52A0\\u5B66\\u751F\\u4FE1\\u606F\"})]}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#666',fontSize:'14px',lineHeight:'1.6',margin:'10px 0'},children:[/*#__PURE__*/_jsx(\"strong\",{style:{color:'#dc3545',fontWeight:'600'},children:\"\\u6CE8\\u610F\\uFF1A\"}),\"\\u5B66\\u53F7\\u3001\\u59D3\\u540D\\u3001\\u5BC6\\u7801\\u4E3A\\u5FC5\\u586B\\u9879\\uFF0C\\u5B66\\u6821\\u3001\\u9662\\u90E8\\u3001\\u4E13\\u4E1A\\u3001\\u73ED\\u7EA7\\u4FE1\\u606F\\u5C06\\u5E94\\u7528\\u5230\\u6240\\u6709\\u5BFC\\u5165\\u7684\\u5B66\\u751F\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u6821\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedSchool,onChange:e=>handleSchoolChange(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u5B66\\u6821\\uFF08\\u5FC5\\u9009\\uFF09\"}),schools.map(school=>/*#__PURE__*/_jsx(\"option\",{value:school.id,children:school.name},school.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9662\\u90E8\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedDepartment,onChange:e=>handleDepartmentChange(e.target.value),disabled:!selectedSchool,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u9662\\u90E8\\uFF08\\u5FC5\\u9009\\uFF09\"}),getCurrentSchoolDepartments().map(department=>/*#__PURE__*/_jsx(\"option\",{value:department.id,children:department.name},department.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4E13\\u4E1A\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedMajor,onChange:e=>handleMajorChange(e.target.value),disabled:!selectedDepartment,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u4E13\\u4E1A\\uFF08\\u5FC5\\u9009\\uFF09\"}),getCurrentDepartmentMajors().map(major=>/*#__PURE__*/_jsx(\"option\",{value:major.id,children:major.name},major.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u73ED\\u7EA7\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedClass,onChange:e=>setSelectedClass(e.target.value),disabled:!selectedMajor,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u73ED\\u7EA7\\uFF08\\u5FC5\\u9009\\uFF09\"}),getCurrentMajorClasses().map(classItem=>/*#__PURE__*/_jsx(\"option\",{value:classItem.id,children:classItem.name},classItem.id))]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"download-btn\",onClick:handleDownloadTemplate,disabled:loading,children:\"\\uD83D\\uDCE5 \\u4E0B\\u8F7DExcel\\u6A21\\u677F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form-help-text\",children:\"\\u4E0B\\u8F7D\\u5305\\u542B\\u5B66\\u53F7\\u3001\\u59D3\\u540D\\u3001\\u5BC6\\u7801\\u4E09\\u5217\\u7684\\u6807\\u51C6Excel\\u6A21\\u677F\\uFF08.xlsx\\u683C\\u5F0F\\uFF09\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4E0A\\u4F20Excel\\u6587\\u4EF6\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:handleFileUpload,disabled:loading||!selectedSchool||!selectedDepartment||!selectedMajor||!selectedClass}),/*#__PURE__*/_jsx(\"span\",{className:\"form-help-text\",children:\"\\u652F\\u6301.xlsx\\u548C.xls\\u683C\\u5F0F\\uFF0C\\u6587\\u4EF6\\u5927\\u5C0F\\u4E0D\\u8D85\\u8FC75MB\\u3002\\u5EFA\\u8BAE\\u4F7F\\u7528\\u4E0B\\u8F7D\\u7684Excel\\u6A21\\u677F\\u586B\\u5199\\u6570\\u636E\\u3002\"})]})}),uploadedFile&&/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"file-info\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDCCE \\u5DF2\\u9009\\u62E9\\u6587\\u4EF6: \",uploadedFile.name]}),/*#__PURE__*/_jsx(\"button\",{className:\"remove-file-btn\",onClick:handleRemoveFile,children:\"\\u2715 \\u79FB\\u9664\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleBatchImport,disabled:loading||!uploadedFile||!selectedSchool||!selectedDepartment||!selectedMajor||!selectedClass,children:loading?'导入中...':'开始导入'})})]})]})]});// 题目管理标签页渲染函数\nconst renderProblemsTab=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sub-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='list'?'active':''),onClick:()=>setActiveSubTab('list'),children:\"\\u9898\\u76EE\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='create'?'active':''),onClick:()=>setActiveSubTab('create'),children:\"\\u521B\\u5EFA\\u9898\\u76EE\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='ai'?'active':''),onClick:()=>setActiveSubTab('ai'),children:\"AI\\u751F\\u9898\"})]}),activeSubTab==='list'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u9898\\u76EE\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>setActiveSubTab('create'),children:\"\\u521B\\u5EFA\\u9898\\u76EE\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"problems-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u6807\\u9898\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u7C7B\\u578B\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u96BE\\u5EA6\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u65F6\\u95F4\\u9650\\u5236\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u5185\\u5B58\\u9650\\u5236\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u64CD\\u4F5C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:problems.map(problem=>{// 调试信息：打印每个题目的类型\nconsole.log(\"=== \\u9898\\u76EE \".concat(problem.id,\" \\u8C03\\u8BD5\\u4FE1\\u606F ===\"));console.log('题目标题:',problem.title);console.log('原始类型:',problem.type);console.log('完整题目对象:',problem);console.log('所有字段名:',Object.keys(problem));console.log('选项字段:',problem.options);console.log('答案字段:',problem.answer);console.log('测试用例字段:',problem.test_cases);console.log('期望输出字段:',problem.expected_output);const inferredType=inferProblemType(problem);console.log('推断类型:',inferredType);console.log('=== 调试信息结束 ===');return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:problem.id}),/*#__PURE__*/_jsx(\"td\",{children:problem.title}),/*#__PURE__*/_jsxs(\"td\",{children:[(()=>{const inferredType=inferProblemType(problem);const displayType=inferredType==='choice'?'选择题':inferredType==='judge'?'判断题':inferredType==='short_answer'?'简答题':'编程题';return/*#__PURE__*/_jsx(\"span\",{className:\"type-badge \".concat(inferredType),children:displayType});})(),/*#__PURE__*/_jsxs(\"small\",{style:{display:'block',color:'#999',fontSize:'10px'},children:[\"\\u539F\\u59CB\\u7C7B\\u578B: \",problem.type||'undefined',\" | \\u63A8\\u65AD\\u7C7B\\u578B: \",inferProblemType(problem)]})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"difficulty-badge \".concat(problem.difficulty),children:problem.difficulty==='easy'?'简单':problem.difficulty==='medium'?'中等':'困难'})}),/*#__PURE__*/_jsxs(\"td\",{children:[problem.time_limit||'-',\"ms\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[problem.memory_limit||'-',\"MB\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit\",onClick:()=>handleEditProblem(problem),children:\"\\u7F16\\u8F91\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleDeleteProblem(problem.id),children:\"\\u5220\\u9664\"})]})]},problem.id);})})]})})]}),activeSubTab==='create'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isEditing?'✏️ 编辑题目':'➕ 创建题目'}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:handleCancelEdit,children:\"\\u2190 \\u8FD4\\u56DE\\u9898\\u76EE\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"problem-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u9898\\u76EE\\u6807\\u9898\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u9898\\u76EE\\u6807\\u9898\",value:problemForm.title,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{title:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u9898\\u76EE\\u7C7B\\u578B\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:problemForm.type,onChange:e=>handleProblemTypeChange(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"programming\",children:\"\\u7F16\\u7A0B\\u9898\"}),/*#__PURE__*/_jsx(\"option\",{value:\"choice\",children:\"\\u9009\\u62E9\\u9898\"}),/*#__PURE__*/_jsx(\"option\",{value:\"judge\",children:\"\\u5224\\u65AD\\u9898\"}),/*#__PURE__*/_jsx(\"option\",{value:\"short_answer\",children:\"\\u7B80\\u7B54\\u9898\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u96BE\\u5EA6\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:problemForm.difficulty,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{difficulty:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"easy\",children:\"\\u7B80\\u5355\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"\\u4E2D\\u7B49\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hard\",children:\"\\u56F0\\u96BE\"})]})]}),problemForm.type==='choice'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9009\\u62E9\\u7C7B\\u578B\\uFF1A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-group\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:problemForm.is_multiple_choice,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{is_multiple_choice:e.target.checked}))}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u591A\\u9009\\u9898\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u9898\\u76EE\\u63CF\\u8FF0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u9898\\u76EE\\u63CF\\u8FF0\",value:problemForm.description,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),rows:6})]}),problemForm.type==='choice'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u9009\\u9879\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"choice-options\",children:[problemForm.options.map((option,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"choice-option\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"option-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"option-label\",children:[\"\\u9009\\u9879 \",String.fromCharCode(65+index)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"option-controls\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:option.is_correct,onChange:()=>toggleChoiceOptionCorrect(option.id)}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u6B63\\u786E\\u7B54\\u6848\"})]}),problemForm.options.length>2&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-option-btn\",onClick:()=>removeChoiceOption(option.id),children:\"\\u5220\\u9664\"})]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u9009\\u9879 \".concat(String.fromCharCode(65+index),\" \\u7684\\u5185\\u5BB9\"),value:option.text,onChange:e=>updateChoiceOption(option.id,'text',e.target.value),className:\"option-input\"})]},option.id)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"add-option-btn\",onClick:addChoiceOption,children:\"+ \\u6DFB\\u52A0\\u9009\\u9879\"})]}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u81F3\\u5C11\\u9700\\u89812\\u4E2A\\u9009\\u9879\\uFF0C\\u6700\\u591A\\u652F\\u630110\\u4E2A\\u9009\\u9879\"})]}),problemForm.type==='judge'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u9009\\u9879\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"choice-options\",children:problemForm.options.map((option,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"choice-option\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"option-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"option-label\",children:[\"\\u9009\\u9879 \",index+1]}),/*#__PURE__*/_jsx(\"div\",{className:\"option-controls\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:option.is_correct,onChange:()=>toggleChoiceOptionCorrect(option.id)}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u6B63\\u786E\\u7B54\\u6848\"})]})})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:option.text,onChange:e=>updateChoiceOption(option.id,'text',e.target.value),className:\"option-input\",readOnly:true}),/*#__PURE__*/_jsx(\"small\",{className:\"option-hint\",children:\"\\u5224\\u65AD\\u9898\\u9009\\u9879\\u4E0D\\u53EF\\u7F16\\u8F91\"})]},option.id))}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u5224\\u65AD\\u9898\\u56FA\\u5B9A\\u4E3A\\\"\\u6B63\\u786E\\\"\\u548C\\\"\\u9519\\u8BEF\\\"\\u4E24\\u4E2A\\u9009\\u9879\\uFF0C\\u8BF7\\u9009\\u62E9\\u5176\\u4E2D\\u4E00\\u4E2A\\u4F5C\\u4E3A\\u6B63\\u786E\\u7B54\\u6848\"})]}),problemForm.type==='short_answer'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u7B54\\u6848\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u7B80\\u7B54\\u9898\\u7684\\u6807\\u51C6\\u7B54\\u6848\",value:problemForm.answer,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{answer:e.target.value})),rows:6}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u8BF7\\u63D0\\u4F9B\\u8BE6\\u7EC6\\u7684\\u7B54\\u6848\\u5185\\u5BB9\\uFF0C\\u4F9B\\u5B66\\u751F\\u53C2\\u8003\\u548C\\u6559\\u5E08\\u8BC4\\u5206\\u4F7F\\u7528\"})]}),problemForm.type==='programming'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u6D4B\\u8BD5\\u7528\\u4F8B\\u7BA1\\u7406\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"test-cases-manager\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"test-cases-header\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u6D4B\\u8BD5\\u7528\\u4F8B\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"add-test-case-btn\",onClick:()=>addTestCase(),children:\"\\u2795 \\u6DFB\\u52A0\\u6D4B\\u8BD5\\u7528\\u4F8B\"})]}),problemForm.testCases&&problemForm.testCases.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"test-cases-list\",children:problemForm.testCases.map((testCase,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"test-case-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"test-case-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"test-case-number\",children:[\"\\u6D4B\\u8BD5\\u7528\\u4F8B \",index+1]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-test-case-btn\",onClick:()=>removeTestCase(testCase.id),children:\"\\u274C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"test-case-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"test-case-input\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8F93\\u5165\\uFF1A\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8F93\\u5165\\u6570\\u636E\\uFF08\\u5982\\u679C\\u6CA1\\u6709\\u8F93\\u5165\\u8BF7\\u7559\\u7A7A\\uFF09\",value:testCase.input||'',onChange:e=>updateTestCase(testCase.id,'input',e.target.value),rows:3}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u5982\\u679C\\u6CA1\\u6709\\u8F93\\u5165\\uFF0C\\u8BF7\\u7559\\u7A7A\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"test-case-output\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u671F\\u671B\\u8F93\\u51FA\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u671F\\u671B\\u7684\\u8F93\\u51FA\\u7ED3\\u679C\",value:testCase.output||'',onChange:e=>updateTestCase(testCase.id,'output',e.target.value),rows:3})]})]})]},testCase.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"no-test-cases\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u8FD8\\u6CA1\\u6709\\u6DFB\\u52A0\\u6D4B\\u8BD5\\u7528\\u4F8B\\uFF0C\\u8BF7\\u70B9\\u51FB\\\"\\u6DFB\\u52A0\\u6D4B\\u8BD5\\u7528\\u4F8B\\\"\\u6309\\u94AE\\u6DFB\\u52A0\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u65F6\\u95F4\\u9650\\u5236\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u65F6\\u95F4\\u9650\\u5236\\uFF08\\u6BEB\\u79D2\\uFF09\",value:problemForm.time_limit,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{time_limit:parseInt(e.target.value)||1000})),min:\"100\",max:\"10000\"}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u5355\\u4F4D\\uFF1A\\u6BEB\\u79D2\\uFF0C\\u8303\\u56F4\\uFF1A100-10000\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5185\\u5B58\\u9650\\u5236\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5185\\u5B58\\u9650\\u5236\\uFF08MB\\uFF09\",value:problemForm.memory_limit,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{memory_limit:parseInt(e.target.value)||128})),min:\"16\",max:\"512\"}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u5355\\u4F4D\\uFF1AMB\\uFF0C\\u8303\\u56F4\\uFF1A16-512\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleCreateProblem,disabled:loading||!problemForm.title||!problemForm.description||problemForm.type==='programming'&&(problemForm.testCases.length===0||problemForm.testCases.some(tc=>!tc.output.trim()))||problemForm.type==='choice'&&(problemForm.options.length<2||problemForm.options.some(option=>!option.text)||problemForm.correct_answers.length===0)||problemForm.type==='judge'&&problemForm.correct_answers.length!==1||problemForm.type==='short_answer'&&!problemForm.answer,children:loading?isEditing?'更新中...':'创建中...':isEditing?'更新题目':'创建题目'})})]})]}),activeSubTab==='ai'&&/*#__PURE__*/_jsx(AIProblemGenerationPage,{})]});// 课程查看标签页渲染函数（只读功能）\nconst renderCoursesTab=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sub-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='list'?'active':''),onClick:()=>{setActiveSubTab('list');// 如果当前在课程详情页，清除课程详情状态\nif(activeSubTab==='detail'){setEditingCourse(null);}// 清除添加学生上下文\nsetAddingStudentContext('');},children:\"\\u8BFE\\u7A0B\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='detail'?'active':''),onClick:()=>setActiveSubTab('detail'),style:{display:editingCourse&&activeSubTab==='detail'?'inline-block':'none'},children:\"\\u8BFE\\u7A0B\\u8BE6\\u60C5\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='add-student-to-course'?'active':''),onClick:()=>setActiveSubTab('add-student-to-course'),style:{display:editingCourse&&activeSubTab==='detail'?'inline-block':'none'},children:\"\\u6DFB\\u52A0\\u5B66\\u751F\"})]}),activeSubTab==='list'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u6211\\u7684\\u8BFE\\u7A0B\"}),/*#__PURE__*/_jsx(\"div\",{className:\"section-info\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDCA1 \\u70B9\\u51FB\\u4EFB\\u610F\\u8BFE\\u7A0B\\u5361\\u7247\\u5373\\u53EF\\u67E5\\u770B\\u8BE6\\u60C5\\u3001\\u7BA1\\u7406\\u5B66\\u751F\\u548C\\u5E03\\u7F6E\\u4F5C\\u4E1A\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"courses-grid\",children:courses.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u6682\\u65E0\\u8BFE\\u7A0B\\uFF0C\\u8BF7\\u8054\\u7CFB\\u7BA1\\u7406\\u5458\\u6DFB\\u52A0\\u8BFE\\u7A0B\"})}):courses.map(course=>/*#__PURE__*/_jsxs(\"div\",{className:\"course-card\",onClick:()=>handleViewCourseDetail(course.id),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:course.name}),/*#__PURE__*/_jsx(\"span\",{className:\"course-status active\",children:\"\\u8FDB\\u884C\\u4E2D\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u6559\\u5B66\\u73ED\\uFF1A\"}),course.display_class_name||course.class_name||course.teaching_class_name||'未设置']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u4E13\\u4E1A\\uFF1A\"}),course.major_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u5B66\\u6821\\uFF1A\"}),course.school_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u5B66\\u751F\\u6570\\u91CF\\uFF1A\"}),course.student_count||0,\"\\u4EBA\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u521B\\u5EFA\\u65F6\\u95F4\\uFF1A\"}),formatDate(course.created_at)]})]})]},course.id))})]}),activeSubTab==='detail'&&editingCourse&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\uD83D\\uDCDA \\u8BFE\\u7A0B\\u8BE6\\u60C5\\uFF1A\",editingCourse.name]}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>{setActiveSubTab('list');setEditingCourse(null);},children:\"\\u2190 \\u8FD4\\u56DE\\u8BFE\\u7A0B\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course-info-section \".concat(courseDetailAnimations.courseInfoVisible?'lotus-visible':''),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u8BFE\\u7A0B\\u57FA\\u672C\\u4FE1\\u606F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\u540D\\u79F0\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\u63CF\\u8FF0\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u6559\\u5B66\\u73ED\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.display_class_name||editingCourse.class_name||editingCourse.teaching_class_name||'未设置'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4E13\\u4E1A\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.major_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u6821\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.school_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u751F\\u6570\\u91CF\\uFF1A\"}),/*#__PURE__*/_jsxs(\"span\",{children:[editingCourse.student_count||0,\"\\u4EBA\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u521B\\u5EFA\\u65F6\\u95F4\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(editingCourse.created_at)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-students-section \".concat(courseDetailAnimations.studentsSectionVisible?'lotus-visible':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u6559\\u5B66\\u73ED\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>{// 设置添加学生上下文为课程详情页\nsetAddingStudentContext('course-detail');setActiveSubTab('add-student-to-course');},children:\"\\u6DFB\\u52A0\\u5B66\\u751F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"students-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u5B66\\u53F7\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u59D3\\u540D\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u90AE\\u7BB1\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u64CD\\u4F5C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(()=>{// 获取当前课程的所有学生\nconst courseStudents=[];// 1. 添加原本属于该教学班的学生\nconst originalStudents=users.filter(user=>user.class_id===editingCourse.class_id&&user.role==='student');courseStudents.push(...originalStudents);// 2. 添加通过关联关系添加的学生\nconst relatedStudents=studentClassRelations.filter(relation=>relation.course_id===editingCourse.id).map(relation=>{// 查找学生的完整信息\nconst studentInfo=users.find(user=>user.id===relation.student_id);return _objectSpread(_objectSpread({},studentInfo),{},{// 使用关联关系中的信息作为后备\nname:studentInfo?studentInfo.name:relation.student_name,username:studentInfo?studentInfo.username:relation.student_no,// 标记这是通过关联关系添加的学生\nisRelatedStudent:true,relationId:\"\".concat(relation.student_id,\"_\").concat(relation.course_id)});});courseStudents.push(...relatedStudents);if(courseStudents.length===0){return/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BE5\\u6559\\u5B66\\u73ED\\u6682\\u65E0\\u5B66\\u751F\"})})})});}return courseStudents.map(student=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:student.username}),/*#__PURE__*/_jsx(\"td\",{children:student.name}),/*#__PURE__*/_jsx(\"td\",{children:student.email||'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(student.isRelatedStudent?'related':'original'),children:student.isRelatedStudent?'已添加':'原班级'})}),/*#__PURE__*/_jsx(\"td\",{children:student.isRelatedStudent?/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleRemoveStudentFromCourse(student.relationId),children:\"\\u79FB\\u9664\"}):/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:async()=>{if(!window.confirm('确定要将该原班级学生从本课程中退课吗？此操作不会删除其账号。'))return;try{await excludeOriginalStudent(editingCourse.id,student.id);setSuccess('该学生已从本课程退课');// 刷新课程学生数据\nawait fetchStudentClassRelations(editingCourse.id);}catch(apiError){var _apiError$response3,_apiError$response3$d;console.error('退课失败:',apiError);setError(((_apiError$response3=apiError.response)===null||_apiError$response3===void 0?void 0:(_apiError$response3$d=_apiError$response3.data)===null||_apiError$response3$d===void 0?void 0:_apiError$response3$d.error)||'退课失败');}},children:\"\\u9000\\u8BFE\"})})]},student.id||student.relationId));})()})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-assignments-section \".concat(courseDetailAnimations.assignmentsSectionVisible?'lotus-visible':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u5DF2\\u5E03\\u7F6E\\u4F5C\\u4E1A\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>{// 自动设置当前课程ID到作业表单\nsetAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{course_id:editingCourse.id}));// 设置编辑作业上下文为课程详情页\nsetEditingAssignmentContext('course-detail');setActiveSubTab('create-assignment');},children:\"\\u5E03\\u7F6E\\u4F5C\\u4E1A\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"assignments-table\",children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u4F5C\\u4E1A\\u540D\\u79F0\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u63CF\\u8FF0\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u622A\\u6B62\\u65F6\\u95F4\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u8865\\u4EA4\\u8BBE\\u7F6E\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u64CD\\u4F5C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:assignments.filter(assignment=>assignment.course_id===editingCourse.id).map(assignment=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:assignment.name}),/*#__PURE__*/_jsx(\"td\",{children:assignment.description}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(assignment.due_date)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(assignment.is_active?'active':'inactive'),children:assignment.is_active?'进行中':'已结束'})}),/*#__PURE__*/_jsx(\"td\",{children:assignment.allow_overdue_submission?/*#__PURE__*/_jsxs(\"div\",{className:\"overdue-status\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"overdue-badge enabled\",children:\"\\u5141\\u8BB8\\u8865\\u4EA4\"}),assignment.overdue_deadline&&/*#__PURE__*/_jsxs(\"div\",{className:\"overdue-detail\",children:[/*#__PURE__*/_jsxs(\"small\",{children:[\"\\u8865\\u4EA4\\u622A\\u6B62: \",formatDate(assignment.overdue_deadline)]}),/*#__PURE__*/_jsxs(\"small\",{children:[\"\\u5F97\\u5206\\u6BD4\\u4F8B: \",Math.round((assignment.overdue_score_ratio||0.8)*100),\"%\"]})]})]}):/*#__PURE__*/_jsx(\"span\",{className:\"overdue-badge disabled\",children:\"\\u4E0D\\u5141\\u8BB8\\u8865\\u4EA4\"})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit\",onClick:()=>handleEditAssignment(assignment),children:\"\\u7F16\\u8F91\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleDeleteAssignment(assignment.id),children:\"\\u5220\\u9664\"})]})]},assignment.id))})]}),assignments.filter(assignment=>assignment.course_id===editingCourse.id).length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BE5\\u8BFE\\u7A0B\\u6682\\u65E0\\u4F5C\\u4E1A\"})})]})]}),activeSubTab==='create-assignment'&&/*#__PURE__*/_jsxs(\"div\",{className:\"course-assignment-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83D\\uDCDD \\u5E03\\u7F6E\\u4F5C\\u4E1A\\uFF08\",editingCourse.name,\"\\uFF09\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('detail'),children:\"\\u2190 \\u8FD4\\u56DE\\u8BFE\\u7A0B\\u8BE6\\u60C5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"assignment-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u540D\\u79F0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u540D\\u79F0\",value:assignmentForm.name,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingCourse.name,disabled:true,className:\"disabled-input\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u63CF\\u8FF0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u63CF\\u8FF0\",value:assignmentForm.description,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),rows:4})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u8981\\u6C42\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u8981\\u6C42\",value:assignmentForm.requirements,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{requirements:e.target.value})),rows:4})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u622A\\u6B62\\u65F6\\u95F4\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:assignmentForm.due_date,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{due_date:e.target.value}))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9009\\u62E9\\u9898\\u76EE\\uFF1A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"problem-selection\",children:problems.map(problem=>/*#__PURE__*/_jsxs(\"label\",{className:\"problem-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:problem.id,checked:assignmentForm.problem_ids.includes(problem.id),onChange:e=>{if(e.target.checked){setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{problem_ids:[...prev.problem_ids,problem.id]}));}else{setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{problem_ids:prev.problem_ids.filter(id=>id!==problem.id)}));}}}),/*#__PURE__*/_jsx(\"span\",{className:\"problem-title\",children:problem.title}),/*#__PURE__*/_jsx(\"span\",{className:\"difficulty-badge \".concat(problem.difficulty),children:problem.difficulty==='easy'?'简单':problem.difficulty==='medium'?'中等':'困难'})]},problem.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleCreateAssignment,disabled:loading||!assignmentForm.name||!assignmentForm.description||!assignmentForm.requirements||!assignmentForm.due_date||!assignmentForm.course_id,children:loading?'创建中...':'布置作业'})})]})]}),activeSubTab==='add-student-to-course'&&editingCourse&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83D\\uDC65 \\u6DFB\\u52A0\\u5B66\\u751F\\u5230\\u8BFE\\u7A0B\\uFF1A\",editingCourse.name]}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('detail'),children:\"\\u2190 \\u8FD4\\u56DE\\u8BFE\\u7A0B\\u8BE6\\u60C5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-student-to-course-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-help\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BF7\\u9009\\u62E9\\u8981\\u6DFB\\u52A0\\u5230\\u8BE5\\u8BFE\\u7A0B\\u7684\\u5B66\\u751F\\uFF1A\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u6CE8\\u610F\\uFF1A\\u53EA\\u80FD\\u6DFB\\u52A0\\u5DF2\\u5B58\\u5728\\u7684\\u5B66\\u751F\\u8D26\\u53F7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5B66\\u53F7\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u53F7\",value:addStudentForm.student_no,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{student_no:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u59D3\\u540D\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u751F\\u59D3\\u540D\",value:addStudentForm.name,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value}))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleAddStudentToCourse,disabled:loading||!addStudentForm.student_no||!addStudentForm.name,children:loading?'添加中...':'添加学生到课程'})})]})]})]})]})]});// 学生相关处理函数\nconst handleAddStudent=async()=>{try{setLoading(true);setError('');setSuccess('');await registerStudent(addStudentForm);setSuccess('学生账号创建成功！');// 重置表单\nsetAddStudentForm({student_no:'',name:'',password:'',email:'',phone:'',school_id:'',department_id:'',major_id:'',class_id:''});// 刷新用户列表\nconst usersData=await getUsers(1,50,'student');setUsers(usersData.users);// 刷新课程列表（因为学生数量可能发生变化）\ntry{const coursesData=await getTeacherCourses();if(coursesData&&coursesData.courses){setCourses(coursesData.courses);}}catch(error){console.warn('刷新课程列表失败:',error);}// 切换到学生列表\nsetActiveSubTab('list');}catch(error){var _error$response9,_error$response9$data;setError(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.error)||'创建学生账号失败');}finally{setLoading(false);}};const handleEditStudentClick=user=>{setEditingUser(user);setEditForm({email:user.email||'',phone:user.phone||'',school_id:user.school_id||'',major_id:user.major_id||'',class_id:user.class_id||'',new_password:''});setError('');setSuccess('');};const handleSaveStudent=async()=>{if(!editingUser)return;try{setLoading(true);setError('');setSuccess('');await updateUser(editingUser.id,editForm);setSuccess('学生信息已更新');// 刷新列表\nconst usersData=await getUsers(1,50,'student');setUsers(usersData.users);// 刷新课程列表（因为学生数量可能发生变化）\ntry{const coursesData=await getTeacherCourses();if(coursesData&&coursesData.courses){setCourses(coursesData.courses);}}catch(error){console.warn('刷新课程列表失败:',error);}setEditingUser(null);}catch(error){var _error$response0,_error$response0$data;setError(((_error$response0=error.response)===null||_error$response0===void 0?void 0:(_error$response0$data=_error$response0.data)===null||_error$response0$data===void 0?void 0:_error$response0$data.error)||'更新学生信息失败');}finally{setLoading(false);}};const handleCancelEditStudent=()=>{setEditingUser(null);setEditForm({email:'',phone:'',school_id:'',major_id:'',class_id:'',new_password:''});};const handleDeleteStudent=async userId=>{if(!window.confirm('确定要删除该学生吗？此操作不可恢复。'))return;try{setLoading(true);setError('');setSuccess('');await deleteUser(userId);setSuccess('学生已删除');const usersData=await getUsers(1,50,'student');setUsers(usersData.users);// 刷新课程列表（因为学生数量可能发生变化）\ntry{const coursesData=await getTeacherCourses();if(coursesData&&coursesData.courses){setCourses(coursesData.courses);}}catch(error){console.warn('刷新课程列表失败:',error);}}catch(error){var _error$response1,_error$response1$data;setError(((_error$response1=error.response)===null||_error$response1===void 0?void 0:(_error$response1$data=_error$response1.data)===null||_error$response1$data===void 0?void 0:_error$response1$data.error)||'删除学生失败');}finally{setLoading(false);}};const handleAddStudentSchoolChange=async schoolId=>{setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{school_id:schoolId,department_id:'',major_id:'',class_id:''}));// 不再重置全局的departments、majors和classes数组\n// 这些数组应该保持完整，用于学生列表显示\n};const handleAddStudentDepartmentChange=async departmentId=>{setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{department_id:departmentId,major_id:'',class_id:''}));// 不再重置全局的majors和classes数组\n// 这些数组应该保持完整，用于学生列表显示\n};const handleAddStudentMajorChange=async majorId=>{setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{major_id:majorId,class_id:''}));// 不再重置全局的classes数组\n// 这个数组应该保持完整，用于学生列表显示\n};// 选择题选项管理函数\nconst addChoiceOption=()=>{setProblemForm(prev=>{// 计算下一个可用的字母ID\nconst existingIds=prev.options.map(option=>option.id);let nextId='A';for(let i=0;i<26;i++){const candidateId=String.fromCharCode(65+i);// A, B, C, D...\nif(!existingIds.includes(candidateId)){nextId=candidateId;break;}}return _objectSpread(_objectSpread({},prev),{},{options:[...prev.options,{id:nextId,text:'',is_correct:false}]});});};const removeChoiceOption=optionId=>{setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{options:prev.options.filter(option=>option.id!==optionId)}));};const updateChoiceOption=(optionId,field,value)=>{setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{options:prev.options.map(option=>option.id===optionId?_objectSpread(_objectSpread({},option),{},{[field]:value}):option)}));};const toggleChoiceOptionCorrect=optionId=>{setProblemForm(prev=>{let updatedOptions;if(prev.type==='judge'){// 判断题：单选模式，点击一个选项时取消其他选项\nupdatedOptions=prev.options.map(option=>_objectSpread(_objectSpread({},option),{},{is_correct:option.id===optionId?!option.is_correct:false}));}else{// 选择题：多选模式，可以同时选择多个选项\nupdatedOptions=prev.options.map(option=>option.id===optionId?_objectSpread(_objectSpread({},option),{},{is_correct:!option.is_correct}):option);}// 更新正确答案数组 - 统一使用选项ID\nconst correctAnswers=updatedOptions.filter(option=>option.is_correct).map(option=>option.id);return _objectSpread(_objectSpread({},prev),{},{options:updatedOptions,correct_answers:correctAnswers});});};const handleProblemTypeChange=type=>{setProblemForm(prev=>{if(type==='choice'){// 切换到选择题时，初始化至少两个选项\nreturn _objectSpread(_objectSpread({},prev),{},{type,options:[{id:'A',text:'',is_correct:false},{id:'B',text:'',is_correct:false}],correct_answers:[],is_multiple_choice:false});}else if(type==='judge'){// 切换到判断题时，初始化两个固定选项\nreturn _objectSpread(_objectSpread({},prev),{},{type,options:[{id:'A',text:'正确',is_correct:false},{id:'B',text:'错误',is_correct:false}],correct_answers:[],is_multiple_choice:false});}else if(type==='short_answer'){// 切换到简答题时，清空选项相关字段，添加答案字段\nreturn _objectSpread(_objectSpread({},prev),{},{type,options:[],correct_answers:[],is_multiple_choice:false,answer:''// 简答题答案\n});}else{// 切换到其他题型时，清空选择题相关字段\nreturn _objectSpread(_objectSpread({},prev),{},{type,options:[],correct_answers:[],is_multiple_choice:false});}});};// 获取当前选中学校对应的专业列表（用于选择器显示）\nconst getCurrentSchoolMajors=()=>{if(!selectedSchool)return[];return majors.filter(major=>major.school_id===selectedSchool);};// 获取当前选中专业对应的班级列表（用于选择器显示）\nconst getCurrentMajorClasses=()=>{if(!selectedMajor)return[];const majorId=selectedMajor;const filteredClasses=classes.filter(classItem=>{const classMajorId=classItem.major_id;const isMatch=classMajorId===majorId||classMajorId===parseInt(majorId)||parseInt(classMajorId)===majorId;return isMatch;});return filteredClasses;};// 获取添加学生表单中选中学校对应的专业列表\nconst getAddStudentSchoolMajors=()=>{if(!addStudentForm.school_id)return[];const schoolId=addStudentForm.school_id;const filteredMajors=majors.filter(major=>{const majorSchoolId=major.school_id;const isMatch=majorSchoolId===schoolId||majorSchoolId===parseInt(schoolId)||parseInt(majorSchoolId)===schoolId;return isMatch;});return filteredMajors;};// 获取添加学生表单中选中学校对应的院部列表\nconst getAddStudentSchoolDepartments=()=>{if(!addStudentForm.school_id)return[];const schoolId=addStudentForm.school_id;const filteredDepartments=departments.filter(department=>{const deptSchoolId=department.school_id;const isMatch=deptSchoolId===schoolId||deptSchoolId===parseInt(schoolId)||parseInt(deptSchoolId)===schoolId;return isMatch;});return filteredDepartments;};// 获取添加学生表单中选中院部对应的专业列表\nconst getAddStudentDepartmentMajors=()=>{if(!addStudentForm.department_id)return[];const departmentId=addStudentForm.department_id;const filteredMajors=majors.filter(major=>{const majorDeptId=major.department_id;const isMatch=majorDeptId===departmentId||majorDeptId===parseInt(departmentId)||parseInt(majorDeptId)===departmentId;return isMatch;});return filteredMajors;};// 获取添加学生表单中选中专业对应的班级列表\nconst getAddStudentMajorClasses=()=>{if(!addStudentForm.major_id)return[];const majorId=addStudentForm.major_id;const filteredClasses=classes.filter(classItem=>{const classMajorId=classItem.major_id;const isMatch=classMajorId===majorId||classMajorId===parseInt(majorId)||parseInt(classMajorId)===majorId;return isMatch;});return filteredClasses;};// 获取编辑学生表单中选中学校对应的专业列表\nconst getEditStudentSchoolMajors=()=>{if(!editForm.school_id)return[];const schoolId=editForm.school_id;const filteredMajors=majors.filter(major=>{const majorSchoolId=major.school_id;const isMatch=majorSchoolId===schoolId||majorSchoolId===parseInt(schoolId)||parseInt(majorSchoolId)===schoolId;return isMatch;});return filteredMajors;};// 获取编辑学生表单中选中专业对应的班级列表\nconst getEditStudentMajorClasses=()=>{if(!editForm.major_id)return[];const majorId=editForm.major_id;const filteredClasses=classes.filter(classItem=>{const classMajorId=classItem.major_id;const isMatch=classMajorId===majorId||classMajorId===parseInt(majorId)||parseInt(classMajorId)===majorId;return isMatch;});return filteredClasses;};// 获取当前选中学校对应的院部列表\nconst getCurrentSchoolDepartments=()=>{if(!selectedSchool)return[];const schoolId=selectedSchool;const filteredDepartments=departments.filter(department=>{const deptSchoolId=department.school_id;const isMatch=deptSchoolId===schoolId||deptSchoolId===parseInt(schoolId)||parseInt(deptSchoolId)===schoolId;return isMatch;});return filteredDepartments;};// 获取当前选中院部对应的专业列表\nconst getCurrentDepartmentMajors=()=>{if(!selectedDepartment)return[];const departmentId=selectedDepartment;const filteredMajors=majors.filter(major=>{const majorDeptId=major.department_id;const isMatch=majorDeptId===departmentId||majorDeptId===parseInt(departmentId)||parseInt(majorDeptId)===departmentId;return isMatch;});return filteredMajors;};return/*#__PURE__*/_jsxs(\"div\",{className:\"teacher-dashboard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\u6559\\u5E08\\u7BA1\\u7406\\u63A7\\u5236\\u53F0\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(activeTab==='students'?'active':''),onClick:()=>{setActiveTab('students');setActiveSubTab('list');},children:\"\\u5B66\\u751F\\u7BA1\\u7406\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(activeTab==='problems'?'active':''),onClick:()=>{setActiveTab('problems');setActiveSubTab('list');},children:\"\\u9898\\u76EE\\u7BA1\\u7406\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(activeTab==='courses'?'active':''),onClick:()=>{setActiveTab('courses');setActiveSubTab('list');// 清除课程详情状态\nsetEditingCourse(null);setEditingAssignmentContext('');setAddingStudentContext('');},children:\"\\u6211\\u7684\\u8BFE\\u7A0B\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success}),activeTab==='students'&&renderStudentsTab(),activeTab==='problems'&&renderProblemsTab(),activeTab==='courses'&&renderCoursesTab(),activeTab==='courses'&&activeSubTab==='create-assignment'&&editingCourse&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83D\\uDCDD \\u5E03\\u7F6E\\u4F5C\\u4E1A\\uFF08\",editingCourse.name,\"\\uFF09\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('detail'),children:\"\\u2190 \\u8FD4\\u56DE\\u8BFE\\u7A0B\\u8BE6\\u60C5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"assignment-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u540D\\u79F0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u540D\\u79F0\",value:assignmentForm.name,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingCourse.name,disabled:true,className:\"disabled-input\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u63CF\\u8FF0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u63CF\\u8FF0\",value:assignmentForm.description,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),rows:4})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u8981\\u6C42\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u8981\\u6C42\",value:assignmentForm.requirements,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{requirements:e.target.value})),rows:4})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u622A\\u6B62\\u65F6\\u95F4\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:assignmentForm.due_date,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{due_date:e.target.value}))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"overdue-settings-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCDD \\u8865\\u4EA4\\u4F5C\\u4E1A\\u8BBE\\u7F6E\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:assignmentForm.allow_overdue_submission,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{allow_overdue_submission:e.target.checked}))}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u5141\\u8BB8\\u8865\\u4EA4\\u4F5C\\u4E1A\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-help\",children:\"\\u52FE\\u9009\\u6B64\\u9879\\u540E\\uFF0C\\u5B66\\u751F\\u53EF\\u4EE5\\u5728\\u622A\\u6B62\\u65F6\\u95F4\\u540E\\u8865\\u4EA4\\u4F5C\\u4E1A\\uFF08\\u9700\\u8981\\u6559\\u5E08\\u7279\\u522B\\u6388\\u6743\\uFF09\"})]}),assignmentForm.allow_overdue_submission&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8865\\u4EA4\\u622A\\u6B62\\u65F6\\u95F4\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:assignmentForm.overdue_deadline,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{overdue_deadline:e.target.value})),min:assignmentForm.due_date}),/*#__PURE__*/_jsx(\"div\",{className:\"form-help\",children:\"\\u8BBE\\u7F6E\\u8865\\u4EA4\\u7684\\u6700\\u7EC8\\u622A\\u6B62\\u65F6\\u95F4\\uFF0C\\u5FC5\\u987B\\u665A\\u4E8E\\u6B63\\u5E38\\u622A\\u6B62\\u65F6\\u95F4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u903E\\u671F\\u5F97\\u5206\\u6BD4\\u4F8B\\uFF1A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"score-ratio-control\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"1\",step:\"0.1\",value:assignmentForm.overdue_score_ratio,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{overdue_score_ratio:parseFloat(e.target.value)}))}),/*#__PURE__*/_jsxs(\"span\",{className:\"score-ratio-display\",children:[Math.round(assignmentForm.overdue_score_ratio*100),\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-help\",children:\"\\u903E\\u671F\\u63D0\\u4EA4\\u7684\\u4F5C\\u4E1A\\u5C06\\u6309\\u6B64\\u6BD4\\u4F8B\\u5F97\\u5206\\uFF080% = \\u4E0D\\u5F97\\u5206\\uFF0C100% = \\u6B63\\u5E38\\u5F97\\u5206\\uFF09\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8865\\u4EA4\\u8BF4\\u660E\\uFF1A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overdue-info-box\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCA1 \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u8865\\u4EA4\\u673A\\u5236\\u8BF4\\u660E\\uFF1A\"})]}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u53EA\\u6709\\u88AB\\u6559\\u5E08\\u6DFB\\u52A0\\u5230\\u767D\\u540D\\u5355\\u7684\\u5B66\\u751F\\u53EF\\u4EE5\\u8865\\u4EA4\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u8865\\u4EA4\\u622A\\u6B62\\u65F6\\u95F4\\u540E\\uFF0C\\u7CFB\\u7EDF\\u5C06\\u62D2\\u7EDD\\u6240\\u6709\\u8865\\u4EA4\\u8BF7\\u6C42\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u903E\\u671F\\u63D0\\u4EA4\\u7684\\u4F5C\\u4E1A\\u4F1A\\u6807\\u8BB0\\u4E3A\\\"\\u903E\\u671F\\u63D0\\u4EA4\\\"\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u8865\\u4EA4\\u4F5C\\u4E1A\\u7684\\u5F97\\u5206\\u5C06\\u6309\\u8BBE\\u5B9A\\u6BD4\\u4F8B\\u8BA1\\u7B97\"})]})]})]})]})]}),isEditingAssignment&&editingAssignment&&assignmentForm.allow_overdue_submission&&/*#__PURE__*/_jsx(\"div\",{className:\"whitelist-section\",children:/*#__PURE__*/_jsx(AssignmentWhitelistManager,{assignment:editingAssignment,onUpdate:()=>{// 刷新作业数据\nif(editingCourse){getCourseAssignments().then(data=>{setAssignments(data.assignments||[]);});}}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9009\\u62E9\\u9898\\u76EE\\uFF1A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"problem-selection\",children:problems.map(problem=>/*#__PURE__*/_jsxs(\"label\",{className:\"problem-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:problem.id,checked:assignmentForm.problem_ids.includes(problem.id),onChange:e=>{if(e.target.checked){setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{problem_ids:[...prev.problem_ids,problem.id]}));}else{setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{problem_ids:prev.problem_ids.filter(id=>id!==problem.id)}));}}}),/*#__PURE__*/_jsx(\"span\",{className:\"problem-title\",children:problem.title}),/*#__PURE__*/_jsx(\"span\",{className:\"difficulty-badge \".concat(problem.difficulty),children:problem.difficulty==='easy'?'简单':problem.difficulty==='medium'?'中等':'困难'})]},problem.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleCreateAssignment,disabled:loading||!assignmentForm.name||!assignmentForm.description||!assignmentForm.requirements||!assignmentForm.due_date||!assignmentForm.course_id,children:loading?'创建中...':'布置作业'})})]})]}),activeTab==='courses'&&activeSubTab==='add-student-to-course'&&editingCourse&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83D\\uDC65 \\u6DFB\\u52A0\\u5B66\\u751F\\u5230\\u8BFE\\u7A0B\\uFF1A\",editingCourse.name]}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('detail'),children:\"\\u2190 \\u8FD4\\u56DE\\u8BFE\\u7A0B\\u8BE6\\u60C5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-student-to-course-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-help\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BF7\\u9009\\u62E9\\u8981\\u6DFB\\u52A0\\u5230\\u8BE5\\u8BFE\\u7A0B\\u7684\\u5B66\\u751F\\uFF1A\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u6CE8\\u610F\\uFF1A\\u53EA\\u80FD\\u6DFB\\u52A0\\u5DF2\\u5B58\\u5728\\u7684\\u5B66\\u751F\\u8D26\\u53F7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5B66\\u53F7\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u53F7\",value:addStudentForm.student_no,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{student_no:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u59D3\\u540D\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u751F\\u59D3\\u540D\",value:addStudentForm.name,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value}))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleAddStudentToCourse,disabled:loading||!addStudentForm.student_no||!addStudentForm.name,children:loading?'添加中...':'添加学生到课程'})})]})]}),editingUser&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-header\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u7F16\\u8F91\\u5B66\\u751F\\uFF1A\",editingUser.name,\"\\uFF08\\u5B66\\u53F7\",editingUser.username,\"\\uFF09\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u90AE\\u7BB1\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:editForm.email,onChange:e=>setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{email:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u624B\\u673A\\u53F7\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:editForm.phone,onChange:e=>setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{phone:e.target.value}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u6821\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.school_id,onChange:e=>{const val=e.target.value;setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{school_id:val,major_id:'',class_id:''}));},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u5B66\\u6821\"}),schools.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s.id,children:s.name},s.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4E13\\u4E1A\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.major_id,onChange:e=>{const val=e.target.value;setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{major_id:val,class_id:''}));},disabled:!editForm.school_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u4E13\\u4E1A\"}),getEditStudentSchoolMajors().map(m=>/*#__PURE__*/_jsx(\"option\",{value:m.id,children:m.name},m.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u73ED\\u7EA7\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.class_id,onChange:e=>setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{class_id:e.target.value})),disabled:!editForm.major_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u73ED\\u7EA7\"}),getEditStudentMajorClasses().map(c=>/*#__PURE__*/_jsx(\"option\",{value:c.id,children:c.name},c.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u91CD\\u7F6E\\u5BC6\\u7801\\uFF08\\u53EF\\u9009\\uFF09\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:editForm.new_password,onChange:e=>setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{new_password:e.target.value}))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:handleCancelEditStudent,children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleSaveStudent,disabled:loading,children:loading?'保存中...':'保存'})]})]})})]});};export default TeacherDashboardPage;","map":{"version":3,"names":["React","useState","useEffect","getUsers","getSchools","getMajors","getClasses","batchImportStudents","getProblems","createProblem","updateProblem","deleteProblem","updateUser","deleteUser","registerStudent","getTeacherCourses","getCourseAssignments","createAssignment","updateAssignment","deleteAssignment","getCourseStudents","addStudentToCourse","removeStudentFromCourse","getDepartments","batchImportStudentsFromExcel","excludeOriginalStudent","cancelExcludeOriginalStudent","XLSX","AIProblemGenerationPage","AssignmentWhitelistManager","mockCourses","mockAssignments","formatDate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TeacherDashboardPage","activeTab","setActiveTab","activeSubTab","setActiveSubTab","users","setUsers","problems","setProblems","schools","setSchools","departments","setDepartments","majors","setMajors","classes","setClasses","loading","setLoading","error","setError","success","setSuccess","selectedSchool","setSelectedSchool","selectedDepartment","setSelectedDepartment","selectedMajor","setSelectedMajor","selectedClass","setSelectedClass","uploadedFile","setUploadedFile","problemForm","setProblemForm","title","description","type","testCases","difficulty","time_limit","memory_limit","options","correct_answers","is_multiple_choice","answer","scrollAnimations","setScrollAnimations","formVisible","bottomFormVisible","courseDetailAnimations","setCourseDetailAnimations","courseInfoVisible","studentsSectionVisible","assignmentsSectionVisible","editingProblem","setEditingProblem","isEditing","setIsEditing","addTestCase","newTestCase","id","Date","now","Math","random","input","output","prev","_objectSpread","removeTestCase","testCaseId","filter","tc","updateTestCase","field","value","map","parseTestCases","testCasesStr","expectedOutputStr","trim","startsWith","parsed","JSON","parse","Array","isArray","idx","String","e","console","warn","split","line","expectedOutputs","maxLength","max","length","result","i","push","addStudentForm","setAddStudentForm","student_no","name","password","email","phone","school_id","department_id","major_id","class_id","editingUser","setEditingUser","editForm","setEditForm","new_password","courses","setCourses","editingCourse","setEditingCourse","assignments","setAssignments","assignmentForm","setAssignmentForm","requirements","due_date","course_id","problem_ids","allow_overdue_submission","overdue_deadline","overdue_score_ratio","editingAssignment","setEditingAssignment","isEditingAssignment","setIsEditingAssignment","editingAssignmentContext","setEditingAssignmentContext","addingStudentContext","setAddingStudentContext","studentClassRelations","setStudentClassRelations","fetchInitialData","handleScroll","scrollY","window","windowHeight","innerHeight","documentHeight","document","documentElement","scrollHeight","addEventListener","removeEventListener","handleCourseDetailScroll","handleStorageChange","key","newValue","log","localStorage","removeItem","fetchProblems","handleProblemCreated","handleMessage","data","shouldRefresh","getItem","fetchStudentClassRelations","courseId","courseStudentsData","apiRelations","student","student_id","student_name","added_at","toISOString","problemsData","loadCourseStudents","schoolsData","usersData","Promise","all","fetchAllMajorsAndClasses","forEach","problem","index","concat","coursesData","assignmentsData","_error$response","response","message","_error$response2","_error$response2$data","arguments","undefined","isLoading","schoolsToUse","allDepartments","allMajors","allClasses","school","departmentsData","majorsData","major","classesData","handleSchoolChange","schoolId","handleDepartmentChange","departmentId","handleMajorChange","majorId","handleBatchImport","_resp$success_count","_resp$failed_count","formData","FormData","append","resp","msg","success_count","failed_count","errors","preview","slice","join","_error$response3","_error$response3$data","handleDownloadTemplate","templateData","workbook","utils","book_new","worksheet","aoa_to_sheet","colWidths","wch","book_append_sheet","writeFile","handleFileUpload","event","file","target","files","validTypes","fileExtension","substring","lastIndexOf","toLowerCase","includes","size","handleRemoveFile","handleCreateProblem","submitData","choice_options","option","text","expected_output","Error","structured","test_cases","stringify","_error$response4","_error$response4$data","handleEditProblem","initialOptions","initialCorrectAnswers","optionLines","match","is_correct","fromCharCode","correctAnswers","ans","correctAnswer","handleDeleteProblem","problemId","confirm","_error$response5","_error$response5$data","inferProblemType","choices","alternatives","option_list","optionTexts","opt","option_text","content","label","solution","correct_answer","answer_text","test_cases_text","test_input","expectedOutput","expected_result","expected_answer","getSchoolName","find","s","sId","parseInt","getMajorName","m","mId","getClassName","classId","classItem","c","cId","handleCancelEdit","handleViewCourseDetail","course","handleCreateAssignment","assignmentData","_error$response6","_error$response6$data","handleEditAssignment","assignment","handleDeleteAssignment","assignmentId","_error$response7","_error$response7$data","handleAddStudentToCourse","existingStudent","user","username","role","payload","updatedCourse","apiError","_apiError$response","_apiError$response$da","_error$response8","_error$response8$data","handleRemoveStudentFromCourse","relationId","studentId","_apiError$response2","_apiError$response2$d","renderStudentsTab","className","children","onClick","handleEditStudentClick","handleDeleteStudent","placeholder","onChange","handleAddStudentSchoolChange","handleAddStudentDepartmentChange","disabled","getAddStudentSchoolDepartments","department","style","fontSize","color","marginTop","handleAddStudentMajorChange","getAddStudentDepartmentMajors","getAddStudentMajorClasses","handleAddStudent","display","visibility","opacity","background","padding","borderRadius","borderLeft","marginBottom","fontWeight","margin","lineHeight","paddingLeft","getCurrentSchoolDepartments","getCurrentDepartmentMajors","getCurrentMajorClasses","accept","renderProblemsTab","Object","keys","inferredType","displayType","handleProblemTypeChange","checked","rows","toggleChoiceOptionCorrect","removeChoiceOption","updateChoiceOption","addChoiceOption","readOnly","testCase","min","some","renderCoursesTab","cursor","display_class_name","class_name","teaching_class_name","major_name","school_name","student_count","created_at","courseStudents","originalStudents","relatedStudents","relation","studentInfo","isRelatedStudent","colSpan","_apiError$response3","_apiError$response3$d","is_active","round","_error$response9","_error$response9$data","handleSaveStudent","_error$response0","_error$response0$data","handleCancelEditStudent","userId","_error$response1","_error$response1$data","existingIds","nextId","candidateId","optionId","updatedOptions","getCurrentSchoolMajors","filteredClasses","classMajorId","isMatch","getAddStudentSchoolMajors","filteredMajors","majorSchoolId","filteredDepartments","deptSchoolId","majorDeptId","getEditStudentSchoolMajors","getEditStudentMajorClasses","step","parseFloat","onUpdate","then","val"],"sources":["/Volumes/坞城/OJ_1/frontend/src/pages/TeacherDashboardPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getUsers, getSchools, getMajors, getClasses, batchImportStudents, getProblems, createProblem, updateProblem, deleteProblem, updateUser, deleteUser, registerStudent, getTeacherCourses, getCourseAssignments, createAssignment, updateAssignment, deleteAssignment, getCourseStudents, addStudentToCourse, removeStudentFromCourse, getDepartments, batchImportStudentsFromExcel, excludeOriginalStudent, cancelExcludeOriginalStudent } from '../services/api';\nimport * as XLSX from 'xlsx';\nimport './TeacherDashboardPage.css';\nimport AIProblemGenerationPage from './AIProblemGenerationPage';\nimport AssignmentWhitelistManager from '../components/AssignmentWhitelistManager';\nimport { mockCourses, mockAssignments, formatDate } from '../testData/courses';\n\nconst TeacherDashboardPage = () => {\n  const [activeTab, setActiveTab] = useState('students');\n  const [activeSubTab, setActiveSubTab] = useState('list'); // 子标签页\n  const [users, setUsers] = useState([]);\n  const [problems, setProblems] = useState([]);\n  const [schools, setSchools] = useState([]);\n  const [departments, setDepartments] = useState([]);\n  const [majors, setMajors] = useState([]);\n  const [classes, setClasses] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // 批量导入相关状态\n  const [selectedSchool, setSelectedSchool] = useState('');\n  const [selectedDepartment, setSelectedDepartment] = useState('');\n  const [selectedMajor, setSelectedMajor] = useState('');\n  const [selectedClass, setSelectedClass] = useState('');\n  const [uploadedFile, setUploadedFile] = useState(null);\n\n  // 手动创建题目相关状态\n  const [problemForm, setProblemForm] = useState({\n    title: '',\n    description: '',\n    type: 'programming', // 题目类型：programming(编程题), choice(选择题), judge(判断题), short_answer(简答题)\n    testCases: [], // 测试用例数组，每个元素包含 {id, input, output}\n    difficulty: 'easy',\n    time_limit: 1000,\n    memory_limit: 128,\n    // 选择题相关字段\n    options: [], // 选项数组\n    correct_answers: [], // 正确答案数组（支持多选）\n    is_multiple_choice: false, // 是否多选\n    // 简答题相关字段\n    answer: '' // 简答题答案\n  });\n\n  // 滚动动画相关状态\n  const [scrollAnimations, setScrollAnimations] = useState({\n    formVisible: false,\n    bottomFormVisible: false\n  });\n\n  // 课程详情页荷叶式动画状态\n  const [courseDetailAnimations, setCourseDetailAnimations] = useState({\n    courseInfoVisible: false,\n    studentsSectionVisible: false,\n    assignmentsSectionVisible: false\n  });\n  \n\n  // 编辑题目状态\n  const [editingProblem, setEditingProblem] = useState(null);\n  const [isEditing, setIsEditing] = useState(false);\n\n  // 测试用例管理函数\n  const addTestCase = () => {\n    const newTestCase = {\n      id: Date.now() + Math.random(), // 生成唯一ID\n      input: '',\n      output: ''\n    };\n    setProblemForm(prev => ({\n      ...prev,\n      testCases: [...prev.testCases, newTestCase]\n    }));\n  };\n\n  const removeTestCase = (testCaseId) => {\n    setProblemForm(prev => ({\n      ...prev,\n      testCases: prev.testCases.filter(tc => tc.id !== testCaseId)\n    }));\n  };\n\n  const updateTestCase = (testCaseId, field, value) => {\n    setProblemForm(prev => ({\n      ...prev,\n      testCases: prev.testCases.map(tc => \n        tc.id === testCaseId ? { ...tc, [field]: value } : tc\n      )\n    }));\n  };\n\n  // 解析后端测试用例格式的函数\n  const parseTestCases = (testCasesStr, expectedOutputStr) => {\n    if (!testCasesStr && !expectedOutputStr) {\n      return [];\n    }\n    \n    // 优先尝试解析JSON数组格式：[ { input, output }, ... ]\n    try {\n      if (testCasesStr && testCasesStr.trim().startsWith('[')) {\n        const parsed = JSON.parse(testCasesStr);\n        if (Array.isArray(parsed)) {\n          return parsed.map((tc, idx) => ({\n            id: Date.now() + Math.random() + idx,\n            input: (tc && typeof tc.input !== 'undefined') ? String(tc.input) : '',\n            output: (tc && typeof tc.output !== 'undefined') ? String(tc.output) : ''\n          }));\n        }\n      }\n    } catch (e) {\n      // JSON解析失败则回退到旧格式\n      console.warn('解析JSON测试用例失败，回退旧格式:', e);\n    }\n    \n    const testCases = testCasesStr ? testCasesStr.split('\\n').filter(line => line.trim()) : [];\n    const expectedOutputs = expectedOutputStr ? expectedOutputStr.split('\\n').filter(line => line.trim()) : [];\n    \n    const maxLength = Math.max(testCases.length, expectedOutputs.length);\n    \n    const result = [];\n    for (let i = 0; i < maxLength; i++) {\n      result.push({\n        id: Date.now() + Math.random() + i, // 生成唯一ID\n        input: testCases[i] || '', // 如果没有输入则使用空字符串\n        output: expectedOutputs[i] || '' // 输出是必填的\n      });\n    }\n    \n    return result;\n  };\n\n  // 添加学生相关状态（按新规则：学号、姓名、密码必填）\n  const [addStudentForm, setAddStudentForm] = useState({\n    student_no: '',\n    name: '',\n    password: '',\n    email: '',\n    phone: '',\n    school_id: '',\n    department_id: '',\n    major_id: '',\n    class_id: ''\n  });\n\n  // 学生编辑相关状态\n  const [editingUser, setEditingUser] = useState(null);\n  const [editForm, setEditForm] = useState({\n    email: '',\n    phone: '',\n    school_id: '',\n    major_id: '',\n    class_id: '',\n    new_password: ''\n  });\n\n  // 课程相关状态（只读，用于查看）\n  const [courses, setCourses] = useState([]);\n  const [editingCourse, setEditingCourse] = useState(null);\n\n  // 作业相关状态\n  const [assignments, setAssignments] = useState([]);\n  const [assignmentForm, setAssignmentForm] = useState({\n    name: '',\n    description: '',\n    requirements: '',\n    due_date: '',\n    course_id: '',\n    problem_ids: [],\n    // 补交作业相关字段\n    allow_overdue_submission: false,\n    overdue_deadline: '',\n    overdue_score_ratio: 0.8\n  });\n\n  // 编辑作业状态\n  const [editingAssignment, setEditingAssignment] = useState(null);\n  const [isEditingAssignment, setIsEditingAssignment] = useState(false);\n  const [editingAssignmentContext, setEditingAssignmentContext] = useState(''); // 记录编辑作业时的上下文\n  \n  // 添加学生到课程的状态\n  const [addingStudentContext, setAddingStudentContext] = useState(''); // 记录添加学生时的上下文\n  \n  // 学生-教学班关联关系状态\n  const [studentClassRelations, setStudentClassRelations] = useState([]); // 存储学生与教学班的关联关系\n\n  useEffect(() => {\n    fetchInitialData();\n  }, []);\n\n  // 滚动监听和动画触发\n  useEffect(() => {\n    const handleScroll = () => {\n      const scrollY = window.scrollY;\n      const windowHeight = window.innerHeight;\n      const documentHeight = document.documentElement.scrollHeight;\n      \n      // 检测表单是否进入视口\n      if (scrollY > 100) {\n        setScrollAnimations(prev => ({ ...prev, formVisible: true }));\n      }\n      \n      // 检测是否接近底部，触发底部表单动画\n      if (scrollY + windowHeight > documentHeight - 200) {\n        setScrollAnimations(prev => ({ ...prev, bottomFormVisible: true }));\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    \n    // 初始触发\n    handleScroll();\n    \n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  // 课程详情页荷叶式动画滚动监听\n  useEffect(() => {\n    if (activeSubTab === 'detail' && editingCourse) {\n      const handleCourseDetailScroll = () => {\n        const scrollY = window.scrollY;\n        const windowHeight = window.innerHeight;\n        \n        // 课程基本信息 - 当滚动到页面中央时浮现\n        if (scrollY > windowHeight * 0.3) {\n          setCourseDetailAnimations(prev => ({ ...prev, courseInfoVisible: true }));\n        }\n        \n        // 教学班学生 - 当滚动到页面中央偏下时浮现\n        if (scrollY > windowHeight * 0.6) {\n          setCourseDetailAnimations(prev => ({ ...prev, studentsSectionVisible: true }));\n        }\n        \n        // 已布置作业 - 当滚动到页面底部时浮现\n        if (scrollY > windowHeight * 0.9) {\n          setCourseDetailAnimations(prev => ({ ...prev, assignmentsSectionVisible: true }));\n        }\n      };\n\n      window.addEventListener('scroll', handleCourseDetailScroll);\n      \n      // 初始触发\n      handleCourseDetailScroll();\n      \n      return () => window.removeEventListener('scroll', handleCourseDetailScroll);\n    }\n  }, [activeSubTab, editingCourse]);\n\n  useEffect(() => {\n    fetchInitialData();\n    \n    // 监听多种通知方式，用于AI生题成功后的数据刷新\n    const handleStorageChange = (e) => {\n      if (e.key === 'refreshProblems' && e.newValue === 'true') {\n        console.log('检测到题目创建成功标记，自动刷新题目列表');\n        // 清除标记\n        localStorage.removeItem('refreshProblems');\n        // 刷新题目列表\n        fetchProblems();\n      }\n    };\n    \n    const handleProblemCreated = (e) => {\n      console.log('检测到题目创建成功事件，自动刷新题目列表');\n      fetchProblems();\n    };\n    \n    const handleMessage = (e) => {\n      if (e.data && e.data.type === 'PROBLEM_CREATED') {\n        console.log('检测到题目创建成功消息，自动刷新题目列表');\n        fetchProblems();\n      }\n    };\n    \n    // 监听storage事件（跨标签页）\n    window.addEventListener('storage', handleStorageChange);\n    \n    // 监听自定义事件\n    window.addEventListener('problemCreated', handleProblemCreated);\n    \n    // 监听postMessage\n    window.addEventListener('message', handleMessage);\n    \n    // 检查是否需要刷新（当前标签页）\n    const shouldRefresh = localStorage.getItem('refreshProblems');\n    if (shouldRefresh === 'true') {\n      console.log('检测到题目创建成功标记，自动刷新题目列表');\n      localStorage.removeItem('refreshProblems');\n      fetchProblems();\n    }\n    \n    return () => {\n      window.removeEventListener('storage', handleStorageChange);\n      window.removeEventListener('problemCreated', handleProblemCreated);\n      window.removeEventListener('message', handleMessage);\n    };\n  }, []);\n\n  // 从API加载学生-课程关联关系\n  const fetchStudentClassRelations = async (courseId) => {\n    try {\n      const courseStudentsData = await getCourseStudents(courseId);\n      if (courseStudentsData && courseStudentsData.length > 0) {\n        const apiRelations = courseStudentsData.map(student => ({\n          student_id: student.student_id,\n          class_id: student.class_id,\n          course_id: courseId,\n          student_name: student.student_name,\n          student_no: student.student_no,\n          added_at: student.added_at || new Date().toISOString()\n        }));\n        setStudentClassRelations(apiRelations);\n      } else {\n        setStudentClassRelations([]);\n      }\n    } catch (error) {\n      console.error('获取课程学生关联关系失败:', error);\n      setStudentClassRelations([]);\n    }\n  };\n\n  // 刷新题目列表\n  const fetchProblems = async () => {\n    try {\n      const problemsData = await getProblems(1, 50);\n      if (problemsData && problemsData.problems) {\n        setProblems(problemsData.problems);\n        console.log('题目列表刷新成功，题目数量:', problemsData.problems.length);\n      }\n    } catch (error) {\n      console.warn('刷新题目列表失败:', error);\n    }\n  };\n\n  // 监听课程变化，加载课程学生关联关系\n  useEffect(() => {\n    const loadCourseStudents = async () => {\n      if (editingCourse && editingCourse.id) {\n        console.log('开始加载课程学生数据，课程ID:', editingCourse.id);\n        await fetchStudentClassRelations(editingCourse.id);\n      }\n    };\n    \n    loadCourseStudents();\n  }, [editingCourse]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const fetchInitialData = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      const [schoolsData, usersData, problemsData] = await Promise.all([\n        getSchools(),\n        getUsers(1, 50, 'student'),\n        getProblems(1, 50)\n      ]);\n      \n      setSchools(schoolsData);\n      setUsers(usersData.users);\n      setProblems(problemsData.problems);\n      \n      // 获取所有专业和班级数据 - 确保schools数据已经设置\n      if (schoolsData && schoolsData.length > 0) {\n        await fetchAllMajorsAndClasses(schoolsData);\n      }\n      \n      // 调试信息：打印题目数据\n      console.log('从API获取的题目数据:', problemsData.problems);\n      if (problemsData.problems && problemsData.problems.length > 0) {\n        problemsData.problems.forEach((problem, index) => {\n          console.log(`题目 ${index + 1}:`, {\n            id: problem.id,\n            title: problem.title,\n            type: problem.type,\n            difficulty: problem.difficulty\n          });\n        });\n      }\n      \n      // 获取课程和作业数据（使用测试数据）\n      try {\n        console.log('开始获取课程和作业数据...');\n        const [coursesData, assignmentsData] = await Promise.all([\n          getTeacherCourses(),\n          getCourseAssignments()\n        ]);\n        \n        console.log('API返回的课程数据:', coursesData);\n        console.log('API返回的作业数据:', assignmentsData);\n        \n        if (coursesData && coursesData.courses) {\n          console.log('使用API返回的课程数据，课程数量:', coursesData.courses.length);\n          setCourses(coursesData.courses);\n        } else {\n          console.log('API返回的课程数据无效，使用测试数据');\n          setCourses(mockCourses);\n        }\n        \n        if (assignmentsData && assignmentsData.assignments) {\n          console.log('使用API返回的作业数据，作业数量:', assignmentsData.assignments.length);\n          setAssignments(assignmentsData.assignments);\n        } else {\n          console.log('API返回的作业数据无效，使用测试数据');\n          setAssignments(mockAssignments);\n        }\n      } catch (error) {\n        console.warn('获取课程或作业数据失败，使用测试数据:', error);\n        console.log('错误详情:', error.response?.data || error.message);\n        setCourses(mockCourses);\n        setAssignments(mockAssignments);\n      }\n      \n      // 学生-课程关联关系数据将在进入课程详情页时从API加载\n    } catch (error) {\n      setError(error?.response?.data?.error || '获取数据失败');\n      console.error('Error fetching data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 获取所有专业和班级数据的函数\n  const fetchAllMajorsAndClasses = async (schoolsData = null) => {\n    // 防止重复调用\n    if (fetchAllMajorsAndClasses.isLoading) {\n      console.log('fetchAllMajorsAndClasses 正在执行中，跳过重复调用');\n      return;\n    }\n    \n    fetchAllMajorsAndClasses.isLoading = true;\n    \n    try {\n      // 使用传入的schoolsData参数，如果没有传入则使用state中的schools\n      const schoolsToUse = schoolsData || schools;\n      \n      if (!schoolsToUse || schoolsToUse.length === 0) {\n        console.warn('没有学校数据，无法获取专业和班级');\n        return;\n      }\n      \n      console.log('开始获取数据，学校数量:', schoolsToUse.length);\n      console.log('学校数据:', schoolsToUse);\n      \n      // 按照正确的层次结构获取数据：学校 → 院部 → 专业 → 班级\n      const allDepartments = [];\n      const allMajors = [];\n      const allClasses = [];\n      \n      for (const school of schoolsToUse) {\n        try {\n          console.log(`正在获取学校 ${school.id} (${school.name}) 的数据...`);\n          \n          // 1. 获取学校的院部\n          const departmentsData = await getDepartments(school.id);\n          console.log(`学校 ${school.id} 的院部数据:`, departmentsData);\n          allDepartments.push(...departmentsData);\n          \n          // 2. 获取学校下的所有专业（按school_id过滤）\n          try {\n            console.log(`正在获取学校 ${school.id} 的专业...`);\n            const majorsData = await getMajors(school.id);\n            console.log(`学校 ${school.id} 的专业数据:`, majorsData);\n            allMajors.push(...majorsData);\n            \n            // 3. 获取每个专业的班级\n            for (const major of majorsData) {\n              try {\n                console.log(`正在获取专业 ${major.id} (${major.name}) 的班级...`);\n                const classesData = await getClasses(major.id);\n                console.log(`专业 ${major.id} 的班级数据:`, classesData);\n                allClasses.push(...classesData);\n              } catch (error) {\n                console.error(`获取专业 ${major.id} 的班级失败:`, error);\n              }\n            }\n          } catch (error) {\n            console.error(`获取学校 ${school.id} 的专业失败:`, error);\n          }\n        } catch (error) {\n          console.error(`获取学校 ${school.id} 的院部失败:`, error);\n        }\n      }\n      \n      console.log('最终获取到的数据:');\n      console.log('院部:', allDepartments);\n      console.log('专业:', allMajors);\n      console.log('班级:', allClasses);\n      \n      setDepartments(allDepartments);\n      setMajors(allMajors);\n      setClasses(allClasses);\n      \n      console.log('获取到的所有院部:', allDepartments);\n      console.log('获取到的所有专业:', allMajors);\n      console.log('获取到的所有班级:', allClasses);\n    } catch (error) {\n      console.error('获取所有院部、专业和班级失败:', error);\n    } finally {\n      fetchAllMajorsAndClasses.isLoading = false;\n    }\n  };\n\n  const handleSchoolChange = async (schoolId) => {\n    setSelectedSchool(schoolId);\n    setSelectedDepartment('');\n    setSelectedMajor('');\n    setSelectedClass('');\n    \n    // 不再重置全局的departments、majors和classes数组\n    // 这些数组应该保持完整，用于学生列表显示\n  };\n\n  const handleDepartmentChange = async (departmentId) => {\n    setSelectedDepartment(departmentId);\n    setSelectedMajor('');\n    setSelectedClass('');\n    \n    // 不再重置全局的majors和classes数组\n    // 这些数组应该保持完整，用于学生列表显示\n  };\n\n  const handleMajorChange = async (majorId) => {\n    setSelectedMajor(majorId);\n    setSelectedClass('');\n    \n    // 不再重置全局的classes数组\n    // 这个数组应该保持完整，用于学生列表显示\n  };\n\n  const handleBatchImport = async () => {\n    if (!uploadedFile) {\n      setError('请选择要上传的Excel文件');\n      setSuccess('');\n      return;\n    }\n\n    if (!selectedSchool || !selectedDepartment || !selectedMajor || !selectedClass) {\n      setError('请选择学校、院部、专业和班级');\n      setSuccess('');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      // 创建FormData对象来上传文件\n      const formData = new FormData();\n      formData.append('file', uploadedFile);\n      formData.append('school_id', selectedSchool);\n      formData.append('department_id', selectedDepartment);\n      formData.append('major_id', selectedMajor);\n      formData.append('class_id', selectedClass);\n      \n      // 调用新的批量导入API\n      const resp = await batchImportStudentsFromExcel(formData);\n      \n      const msg = resp?.message || `批量导入完成: 成功 ${resp?.success_count ?? 0} 个, 失败 ${resp?.failed_count ?? 0} 个`;\n      setSuccess(msg);\n      \n      if (resp?.errors && resp.errors.length > 0) {\n        const preview = resp.errors.slice(0, 5).join('；');\n        setError(`部分导入失败：${preview}${resp.errors.length > 5 ? ' 等' : ''}`);\n      }\n      \n      // 刷新用户列表\n      const usersData = await getUsers(1, 50, 'student');\n      setUsers(usersData.users);\n      \n      // 清理上传的文件\n      setUploadedFile(null);\n      \n    } catch (error) {\n      setError(error.response?.data?.error || '批量导入失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 下载Excel模板\n  const handleDownloadTemplate = () => {\n    // 创建Excel模板数据\n    const templateData = [\n      ['学号', '姓名', '密码'],\n      ['2021001', '张三', '123456'],\n      ['2021002', '李四', '123456'],\n      ['2021003', '王五', '123456']\n    ];\n    \n    // 创建工作簿\n    const workbook = XLSX.utils.book_new();\n    \n    // 创建工作表\n    const worksheet = XLSX.utils.aoa_to_sheet(templateData);\n    \n    // 设置列宽\n    const colWidths = [\n      { wch: 15 }, // 学号列宽\n      { wch: 15 }, // 姓名列宽\n      { wch: 15 }  // 密码列宽\n    ];\n    worksheet['!cols'] = colWidths;\n    \n    // 将工作表添加到工作簿\n    XLSX.utils.book_append_sheet(workbook, worksheet, '学生信息');\n    \n    // 生成Excel文件并下载\n    XLSX.writeFile(workbook, '学生信息导入模板.xlsx');\n    \n    setSuccess('Excel模板下载成功！请填写学生信息后重新上传。');\n  };\n\n  // 处理文件上传\n  const handleFileUpload = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      // 检查文件类型\n      const validTypes = ['.xlsx', '.xls', '.csv'];\n      const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n      \n      if (!validTypes.includes(fileExtension)) {\n        setError('请选择有效的Excel文件格式（.xlsx, .xls, .csv）');\n        return;\n      }\n      \n      // 检查文件大小（5MB限制）\n      if (file.size > 5 * 1024 * 1024) {\n        setError('文件大小不能超过5MB');\n        return;\n      }\n      \n      setUploadedFile(file);\n      setError('');\n      setSuccess('文件选择成功！');\n    }\n  };\n\n  // 移除上传的文件\n  const handleRemoveFile = () => {\n    setUploadedFile(null);\n    setError('');\n    setSuccess('');\n  };\n\n  const handleCreateProblem = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      // 构建提交给后端的数据\n      const submitData = { ...problemForm };\n      \n      // 如果是选择题，需要将options数组转换为choice_options字符串\n      if (problemForm.type === 'choice') {\n        // 将选项数组转换为字符串格式：A.选项内容\\nB.选项内容\\nC.选项内容\n        submitData.choice_options = problemForm.options\n          .map((option) => `${option.id}.${option.text}`)\n          .join('\\n');\n        \n        // 将正确答案数组转换为expected_output字符串\n        submitData.expected_output = problemForm.correct_answers.join(',');\n        \n        // 删除前端特有的字段，避免后端报错\n        delete submitData.options;\n        delete submitData.correct_answers;\n      }\n      \n      // 如果是判断题，需要特殊处理\n      if (problemForm.type === 'judge') {\n        // 判断题的选项固定为\"正确\"和\"错误\"\n        submitData.choice_options = 'A.正确\\nB.错误';\n        \n        // 将正确答案转换为expected_output\n        submitData.expected_output = problemForm.correct_answers.join(',');\n        \n        // 删除前端特有的字段\n        delete submitData.options;\n        delete submitData.correct_answers;\n      }\n      \n      // 如果是简答题，需要特殊处理\n      if (problemForm.type === 'short_answer') {\n        // 将简答题答案设置为expected_output\n        submitData.expected_output = problemForm.answer;\n        \n        // 删除前端特有的字段\n        delete submitData.answer;\n      }\n      \n      // 如果是编程题，改为JSON结构提交测试用例\n      if (problemForm.type === 'programming') {\n        const testCases = problemForm.testCases || [];\n        if (testCases.length === 0) {\n          throw new Error('编程题至少需要一个测试用例');\n        }\n        // 以结构化JSON传输，支持多行输入/输出与空输入\n        const structured = testCases.map(tc => ({\n          input: tc.input || '',\n          output: tc.output || ''\n        }));\n        submitData.test_cases = JSON.stringify(structured);\n        // expected_output 保留为所有输出拼接（兼容旧后端或列表展示）\n        submitData.expected_output = testCases.map(tc => tc.output || '').join('\\n');\n        // 删除前端特有字段\n        delete submitData.testCases;\n      }\n      \n      // 添加调试信息\n      console.log('提交的题目数据:', submitData);\n      console.log('题目类型:', submitData.type);\n      console.log('完整表单数据:', JSON.stringify(submitData, null, 2));\n      \n      if (isEditing && editingProblem) {\n        console.log('更新题目，ID:', editingProblem.id);\n        await updateProblem(editingProblem.id, submitData);\n        setSuccess('题目更新成功！');\n      } else {\n        console.log('创建新题目');\n        await createProblem(submitData);\n        setSuccess('题目创建成功！');\n      }\n      \n      // 重置表单\n      setProblemForm({\n        title: '',\n        description: '',\n        type: 'programming',\n        testCases: [],\n        difficulty: 'easy',\n        time_limit: 1000,\n        memory_limit: 128,\n        options: [],\n        correct_answers: [],\n        is_multiple_choice: false,\n        answer: ''\n      });\n      \n      setIsEditing(false);\n      setEditingProblem(null);\n      \n      // 刷新题目列表\n      const problemsData = await getProblems(1, 50);\n      setProblems(problemsData.problems);\n      \n      // 切换到题目列表\n      setActiveSubTab('list');\n      \n    } catch (error) {\n      console.error('题目操作失败:', error);\n      setError(error.response?.data?.error || error.message || '操作失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditProblem = (problem) => {\n    setEditingProblem(problem);\n    // 根据题目类型初始化表单数据\n    let initialOptions = [];\n    let initialCorrectAnswers = [];\n    \n    if (problem.type === 'choice') {\n      // 解析选择题的choice_options字符串\n      if (problem.choice_options) {\n        const optionLines = problem.choice_options.split('\\n').filter(line => line.trim());\n        initialOptions = optionLines.map((line, index) => {\n          const match = line.match(/^([A-Z])\\.(.+)$/);\n          if (match) {\n            return {\n              id: match[1], // 使用字母ID (A, B, C...)\n              text: match[2].trim(),\n              is_correct: false\n            };\n          }\n          return {\n            id: String.fromCharCode(65 + index), // 如果没有匹配到字母，使用默认字母ID\n            text: line.trim(),\n            is_correct: false\n          };\n        });\n      }\n      \n      // 解析expected_output中的正确答案\n      if (problem.expected_output) {\n        const correctAnswers = problem.expected_output.split(',').filter(ans => ans.trim());\n        initialCorrectAnswers = correctAnswers;\n        \n        // 设置选项的正确状态\n        initialOptions = initialOptions.map(option => ({\n          ...option,\n          is_correct: correctAnswers.includes(option.id)\n        }));\n      }\n    } else if (problem.type === 'judge') {\n      // 判断题固定选项\n      initialOptions = [\n        { id: 'A', text: '正确', is_correct: false },\n        { id: 'B', text: '错误', is_correct: false }\n      ];\n      \n      // 根据expected_output设置正确答案\n      if (problem.expected_output) {\n        const correctAnswer = problem.expected_output.trim();\n        if (correctAnswer === 'A') {\n          initialOptions[0].is_correct = true;\n          initialCorrectAnswers = ['A'];\n        } else if (correctAnswer === 'B') {\n          initialOptions[1].is_correct = true;\n          initialCorrectAnswers = ['B'];\n        }\n      }\n    }\n    \n    setProblemForm({\n      title: problem.title,\n      description: problem.description,\n      type: problem.type || 'programming',\n      testCases: problem.type === 'programming' ? parseTestCases(problem.test_cases, problem.expected_output) : [],\n      difficulty: problem.difficulty,\n      time_limit: problem.time_limit || 1000,\n      memory_limit: problem.memory_limit || 128,\n      options: initialOptions,\n      correct_answers: initialCorrectAnswers,\n      is_multiple_choice: problem.is_multiple_choice || false,\n      answer: problem.answer || ''\n    });\n    \n    setIsEditing(true);\n    setActiveSubTab('create');\n  };\n\n  const handleDeleteProblem = async (problemId) => {\n    if (!window.confirm('确定要删除这个题目吗？此操作不可恢复。')) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      await deleteProblem(problemId);\n      setSuccess('题目删除成功！');\n      \n      // 刷新题目列表\n      const problemsData = await getProblems(1, 50);\n      setProblems(problemsData.problems);\n    } catch (error) {\n      setError(error.response?.data?.error || '删除题目失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 根据题目特征推断题目类型\n  const inferProblemType = (problem) => {\n    console.log('开始推断题目类型，题目数据:', problem);\n    \n    // 优先使用明确设置的题目类型\n    if (problem.type && problem.type !== 'undefined') {\n      console.log('使用明确设置的题目类型:', problem.type);\n      return problem.type;\n    }\n    \n    // 如果没有明确设置类型，则通过特征推断\n    console.log('没有明确设置类型，开始推断...');\n    \n    // 检查所有可能的选项字段\n    const options = problem.options || problem.choices || problem.alternatives || problem.option_list || [];\n    console.log('检查到的选项:', options);\n    \n    // 如果有选项，判断是选择题还是判断题\n    if (Array.isArray(options) && options.length > 0) {\n      console.log('发现选项，数量:', options.length);\n      \n      // 检查是否是判断题（只有两个选项：正确、错误）\n      if (options.length === 2) {\n        const optionTexts = options.map(opt => {\n          const text = opt.text || opt.option_text || opt.content || opt.label || '';\n          console.log('选项文本:', text);\n          return text;\n        });\n        \n        if (optionTexts.includes('正确') && optionTexts.includes('错误')) {\n          console.log('推断为判断题');\n          return 'judge';\n        }\n      }\n      \n      console.log('推断为选择题');\n      return 'choice';\n    }\n    \n    // 检查所有可能的答案字段\n    const answer = problem.answer || problem.solution || problem.correct_answer || problem.answer_text || '';\n    console.log('检查到的答案:', answer);\n    \n    if (answer && answer.trim()) {\n      console.log('推断为简答题');\n      return 'short_answer';\n    }\n    \n    // 检查编程题相关字段\n    const testCases = problem.test_cases || problem.test_cases_text || problem.test_input || '';\n    const expectedOutput = problem.expected_output || problem.expected_result || problem.expected_answer || '';\n    console.log('检查到的测试用例:', testCases);\n    console.log('检查到的期望输出:', expectedOutput);\n    \n    if (testCases && expectedOutput) {\n      console.log('推断为编程题');\n      return 'programming';\n    }\n    \n    // 如果都无法推断，默认返回编程题\n    console.log('无法推断类型，默认返回编程题');\n    return 'programming';\n  };\n\n  // 根据ID获取学校名称\n  const getSchoolName = (schoolId) => {\n    if (!schoolId) return '-';\n    const school = schools.find(s => {\n      const sId = s.id;\n      return sId === schoolId || sId === parseInt(schoolId) || parseInt(sId) === schoolId;\n    });\n    return school ? school.name : schoolId;\n  };\n\n  // 根据ID获取专业名称\n  const getMajorName = (majorId) => {\n    if (!majorId) return '-';\n    const major = majors.find(m => {\n      const mId = m.id;\n      return mId === majorId || mId === parseInt(majorId) || parseInt(mId) === majorId;\n    });\n    return major ? major.name : majorId;\n  };\n\n  // 根据ID获取班级名称\n  const getClassName = (classId) => {\n    if (!classId) return '-';\n    const classItem = classes.find(c => {\n      const cId = c.id;\n      return cId === classId || cId === parseInt(classId) || parseInt(cId) === classId;\n    });\n    return classItem ? classItem.name : classId;\n  };\n\n  const handleCancelEdit = () => {\n    setIsEditing(false);\n    setEditingProblem(null);\n    setProblemForm({\n      title: '',\n      description: '',\n      type: 'programming',\n      testCases: [],\n      difficulty: 'easy',\n      time_limit: 1000,\n      memory_limit: 128,\n      options: [],\n      correct_answers: [],\n      is_multiple_choice: false,\n      answer: ''\n    });\n    setActiveSubTab('list');\n  };\n\n  // 课程相关处理函数（只读功能）\n  const handleViewCourseDetail = (courseId) => {\n    const course = courses.find(c => c.id === courseId);\n    if (course) {\n      setActiveTab('courses');\n      setActiveSubTab('detail');\n      setEditingCourse(course);\n    }\n  };\n\n  // 作业相关处理函数\n  const handleCreateAssignment = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      // 如果在课程详情页面创建作业，自动设置课程ID\n      const assignmentData = { ...assignmentForm };\n      if (activeSubTab === 'create-assignment' && editingCourse) {\n        assignmentData.course_id = editingCourse.id;\n      }\n      \n      if (isEditingAssignment && editingAssignment) {\n        await updateAssignment(editingAssignment.id, assignmentData);\n        setSuccess('作业更新成功！');\n      } else {\n        await createAssignment(assignmentData);\n        setSuccess('作业布置成功！');\n      }\n      \n      // 重置表单\n      setAssignmentForm({\n        name: '',\n        description: '',\n        requirements: '',\n        due_date: '',\n        course_id: '',\n        problem_ids: [],\n        // 重置补交设置\n        allow_overdue_submission: false,\n        overdue_deadline: '',\n        overdue_score_ratio: 0.8\n      });\n      \n      setIsEditingAssignment(false);\n      setEditingAssignment(null);\n      \n      // 刷新作业列表\n      const assignmentsData = await getCourseAssignments();\n      setAssignments(assignmentsData.assignments || []);\n      \n      // 如果在课程详情页面，返回到课程详情；否则返回到课程列表\n      if (activeSubTab === 'create-assignment') {\n        setActiveSubTab('detail');\n      } else {\n        setActiveSubTab('list');\n      }\n      \n    } catch (error) {\n      setError(error.response?.data?.error || (isEditingAssignment ? '更新作业失败' : '布置作业失败'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditAssignment = (assignment) => {\n    setEditingAssignment(assignment);\n    setAssignmentForm({\n      name: assignment.name,\n      description: assignment.description || '',\n      requirements: assignment.requirements || '',\n      due_date: assignment.due_date || '',\n      course_id: assignment.course_id || '',\n      problem_ids: assignment.problem_ids || [],\n      // 补交作业相关字段\n      allow_overdue_submission: assignment.allow_overdue_submission || false,\n      overdue_deadline: assignment.overdue_deadline || '',\n      overdue_score_ratio: assignment.overdue_score_ratio || 0.8\n    });\n    setIsEditingAssignment(true);\n    \n    // 记录编辑作业时的上下文\n    if (activeSubTab === 'detail' && editingCourse) {\n      setEditingAssignmentContext('course-detail');\n    } else {\n      setEditingAssignmentContext('course-list');\n    }\n    \n    // 切换到作业创建模式\n    setActiveSubTab('create-assignment');\n  };\n\n  const handleDeleteAssignment = async (assignmentId) => {\n    if (!window.confirm('确定要删除该作业吗？此操作不可恢复。')) return;\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      await deleteAssignment(assignmentId);\n      setSuccess('作业已删除');\n      \n      // 刷新作业列表\n      const assignmentsData = await getCourseAssignments();\n      setAssignments(assignmentsData.assignments || []);\n      \n    } catch (error) {\n      setError(error.response?.data?.error || '删除作业失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 学生-课程关联关系处理函数\n  const handleAddStudentToCourse = async () => {\n    if (!editingCourse) return;\n    \n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      // 查找学生是否已存在\n      const existingStudent = users.find(user => \n        user.username === addStudentForm.student_no && user.role === 'student'\n      );\n      \n      if (!existingStudent) {\n        setError('学生不存在，请先创建学生账号');\n        return;\n      }\n      \n      // 使用API添加学生到课程\n      try {\n        const payload = { student_id: existingStudent.id };\n        if (editingCourse.class_id) {\n          payload.class_id = editingCourse.class_id;\n        }\n        await addStudentToCourse(editingCourse.id, payload);\n        setSuccess('学生已成功添加到课程！');\n        \n        // 重新加载课程学生数据\n        const courseStudentsData = await getCourseStudents(editingCourse.id);\n        if (courseStudentsData && courseStudentsData.length > 0) {\n          const apiRelations = courseStudentsData.map(student => ({\n            student_id: student.student_id,\n            class_id: student.class_id,\n            course_id: editingCourse.id,\n            student_name: student.student_name,\n            student_no: student.student_no,\n            added_at: student.added_at || new Date().toISOString()\n          }));\n          setStudentClassRelations(apiRelations);\n        } else {\n          setStudentClassRelations([]);\n        }\n        \n        // 刷新课程列表（因为学生数量发生变化）\n        try {\n          const coursesData = await getTeacherCourses();\n          if (coursesData && coursesData.courses) {\n            setCourses(coursesData.courses);\n            // 更新当前编辑的课程信息\n            const updatedCourse = coursesData.courses.find(c => c.id === editingCourse.id);\n            if (updatedCourse) {\n              setEditingCourse(updatedCourse);\n            }\n          }\n        } catch (error) {\n          console.warn('刷新课程列表失败:', error);\n        }\n      } catch (apiError) {\n        console.error('添加学生到课程失败:', apiError);\n        setError(apiError.response?.data?.error || '添加学生失败');\n        return;\n      }\n      \n      // 重置表单\n      setAddStudentForm({\n        student_no: '',\n        name: '',\n        password: '',\n        email: '',\n        phone: '',\n        school_id: '',\n        department_id: '',\n        major_id: '',\n        class_id: ''\n      });\n      \n      // 返回到课程详情页\n      setActiveSubTab('detail');\n      \n    } catch (error) {\n      setError(error.response?.data?.error || '添加学生失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRemoveStudentFromCourse = async (relationId) => {\n    if (!window.confirm('确定要从该课程中移除该学生吗？')) return;\n    \n    try {\n      // 解析relationId获取学生ID和课程ID\n      const [studentId] = relationId.split('_');\n      \n      // 使用API从课程中移除学生\n      try {\n        await removeStudentFromCourse(editingCourse.id, studentId);\n        setSuccess('学生已从课程中移除');\n        \n        // 重新加载课程学生数据\n        const courseStudentsData = await getCourseStudents(editingCourse.id);\n        if (courseStudentsData && courseStudentsData.length > 0) {\n          const apiRelations = courseStudentsData.map(student => ({\n            student_id: student.student_id,\n            class_id: student.class_id,\n            course_id: editingCourse.id,\n            student_name: student.student_name,\n            student_no: student.student_no,\n            added_at: student.added_at || new Date().toISOString()\n          }));\n          setStudentClassRelations(apiRelations);\n        } else {\n          setStudentClassRelations([]);\n        }\n        \n        // 刷新课程列表（因为学生数量发生变化）\n        try {\n          const coursesData = await getTeacherCourses();\n          if (coursesData && coursesData.courses) {\n            setCourses(coursesData.courses);\n            // 更新当前编辑的课程信息\n            const updatedCourse = coursesData.courses.find(c => c.id === editingCourse.id);\n            if (updatedCourse) {\n              setEditingCourse(updatedCourse);\n            }\n          }\n        } catch (error) {\n          console.warn('刷新课程列表失败:', error);\n        }\n      } catch (apiError) {\n        console.error('从课程中移除学生失败:', apiError);\n        setError(apiError.response?.data?.error || '移除学生失败');\n        return;\n      }\n    } catch (error) {\n      setError('移除学生失败');\n    }\n  };\n\n  // 学生管理标签页渲染函数\n  const renderStudentsTab = () => (\n    <div className=\"tab-content\">\n      <div className=\"sub-tabs\">\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'list' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('list')}\n        >\n          学生列表\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'add' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('add')}\n        >\n          添加学生\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'import' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('import')}\n        >\n          批量导入\n        </button>\n      </div>\n\n      {activeSubTab === 'list' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>学生列表</h2>\n            <button \n              className=\"add-btn\"\n              onClick={() => setActiveSubTab('add')}\n            >\n              添加学生\n            </button>\n          </div>\n          \n          <div className=\"students-table\">\n            <table>\n              <thead>\n                <tr>\n                  <th>ID</th>\n                  <th>学号</th>\n                  <th>姓名</th>\n                  <th>邮箱</th>\n                  <th>手机号</th>\n                  <th>学校</th>\n                  <th>专业</th>\n                  <th>班级</th>\n                  <th>操作</th>\n                </tr>\n              </thead>\n              <tbody>\n                {users.map(user => (\n                  <tr key={user.id}>\n                    <td>{user.id}</td>\n                    <td>{user.username}</td>\n                    <td>{user.name}</td>\n                    <td>{user.email || '-'}</td>\n                    <td>{user.phone || '-'}</td>\n                    <td>{getSchoolName(user.school_id)}</td>\n                    <td>{getMajorName(user.major_id)}</td>\n                    <td>{getClassName(user.class_id)}</td>\n                    <td>\n                      <button \n                        className=\"action-btn edit\"\n                        onClick={() => handleEditStudentClick(user)}\n                      >\n                        编辑\n                      </button>\n                      <button \n                        className=\"action-btn delete\"\n                        onClick={() => handleDeleteStudent(user.id)}\n                      >\n                        删除\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'add' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>➕ 添加学生</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => setActiveSubTab('list')}\n            >\n              ← 返回学生列表\n            </button>\n          </div>\n          \n          <div className={`add-student-form ${scrollAnimations.formVisible ? 'form-visible' : ''}`}>\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>学号：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"请输入学号\"\n                  value={addStudentForm.student_no}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, student_no: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>姓名：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"请输入学生姓名\"\n                  value={addStudentForm.name}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, name: e.target.value }))}\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>密码：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"password\" \n                  placeholder=\"请输入初始密码\"\n                  value={addStudentForm.password}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, password: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>邮箱：</label>\n                <input \n                  type=\"email\" \n                  placeholder=\"请输入邮箱地址\"\n                  value={addStudentForm.email}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, email: e.target.value }))}\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>手机号：</label>\n                <input \n                  type=\"tel\" \n                  placeholder=\"请输入手机号码\"\n                  value={addStudentForm.phone}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, phone: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>学校：</label>\n                <select \n                  value={addStudentForm.school_id} \n                  onChange={(e) => handleAddStudentSchoolChange(e.target.value)}\n                >\n                  <option value=\"\">请选择学校（可选）</option>\n                  {schools.map(school => (\n                    <option key={school.id} value={school.id}>\n                      {school.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>院部：</label>\n                <select \n                  value={addStudentForm.department_id} \n                  onChange={(e) => handleAddStudentDepartmentChange(e.target.value)}\n                  disabled={!addStudentForm.school_id}\n                >\n                  <option value=\"\">请选择院部（可选）</option>\n                  {getAddStudentSchoolDepartments().map(department => (\n                    <option key={department.id} value={department.id}>\n                      {department.name}\n                    </option>\n                  ))}\n                </select>\n                {/* 调试信息 */}\n                <div style={{ fontSize: '12px', color: '#666', marginTop: '5px' }}>\n                  当前学校ID: {addStudentForm.school_id} | \n                  可用院部数量: {getAddStudentSchoolDepartments().length} | \n                  总院部数量: {departments.length}\n                </div>\n              </div>\n              \n              <div className=\"form-group\">\n                <label>专业：</label>\n                <select \n                  value={addStudentForm.major_id} \n                  onChange={(e) => handleAddStudentMajorChange(e.target.value)}\n                  disabled={!addStudentForm.department_id}\n                >\n                  <option value=\"\">请选择专业（可选）</option>\n                  {getAddStudentDepartmentMajors().map(major => (\n                    <option key={major.id} value={major.id}>\n                      {major.name}\n                    </option>\n                  ))}\n                </select>\n                {/* 调试信息 */}\n                <div style={{ fontSize: '12px', color: '#666', marginTop: '5px' }}>\n                  当前院部ID: {addStudentForm.department_id} | \n                  可用专业数量: {getAddStudentDepartmentMajors().length} | \n                  总专业数量: {majors.length}\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>班级：</label>\n                <select \n                  value={addStudentForm.class_id} \n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, class_id: e.target.value }))}\n                  disabled={!addStudentForm.major_id}\n                >\n                  <option value=\"\">请选择班级（可选）</option>\n                  {getAddStudentMajorClasses().map(classItem => (\n                    <option key={classItem.id} value={classItem.id}>\n                      {classItem.name}\n                    </option>\n                  ))}\n                </select>\n                {/* 调试信息 */}\n                <div style={{ fontSize: '12px', color: '#666', marginTop: '5px' }}>\n                  当前专业ID: {addStudentForm.major_id} | \n                  可用班级数量: {getAddStudentMajorClasses().length} | \n                  总班级数量: {classes.length}\n                </div>\n              </div>\n            </div>\n            \n            <div className={`form-actions ${scrollAnimations.bottomFormVisible ? 'bottom-form-visible' : ''}`}>\n              <button \n                className=\"submit-btn\"\n                onClick={handleAddStudent}\n                disabled={loading || !addStudentForm.student_no || !addStudentForm.name || !addStudentForm.password}\n              >\n                {loading ? '创建中...' : '创建学生账号'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'import' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>📥 批量导入学生</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => setActiveSubTab('list')}\n            >\n              ← 返回学生列表\n            </button>\n          </div>\n          \n          <div className=\"import-form\">\n            <div className=\"form-help\" style={{ \n              display: 'block', \n              visibility: 'visible', \n              opacity: '1', \n              background: '#f8f9fa',\n              padding: '20px',\n              borderRadius: '8px',\n              borderLeft: '4px solid #667eea',\n              marginBottom: '25px'\n            }}>\n              <h3 style={{ color: '#333', fontSize: '18px', fontWeight: '600', margin: '0 0 15px 0' }}>导入说明</h3>\n              <p style={{ color: '#666', fontSize: '14px', lineHeight: '1.6', margin: '10px 0' }}>请按以下步骤操作：</p>\n              <ol style={{ margin: '15px 0', paddingLeft: '20px' }}>\n                <li style={{ margin: '8px 0', color: '#495057', lineHeight: '1.5' }}>点击下方\"下载Excel模板\"按钮，下载标准格式的Excel文件（.xlsx格式）</li>\n                <li style={{ margin: '8px 0', color: '#495057', lineHeight: '1.5' }}>在Excel文件中填写学生信息（学号、姓名、密码）</li>\n                <li style={{ margin: '8px 0', color: '#495057', lineHeight: '1.5' }}>选择学校、院部、专业、班级信息</li>\n                <li style={{ margin: '8px 0', color: '#495057', lineHeight: '1.5' }}>上传填写好的Excel文件</li>\n                <li style={{ margin: '8px 0', color: '#495057', lineHeight: '1.5' }}>系统将自动识别并添加学生信息</li>\n              </ol>\n              <p style={{ color: '#666', fontSize: '14px', lineHeight: '1.6', margin: '10px 0' }}><strong style={{ color: '#dc3545', fontWeight: '600' }}>注意：</strong>学号、姓名、密码为必填项，学校、院部、专业、班级信息将应用到所有导入的学生</p>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>学校：</label>\n                <select \n                  value={selectedSchool} \n                  onChange={(e) => handleSchoolChange(e.target.value)}\n                >\n                  <option value=\"\">请选择学校（必选）</option>\n                  {schools.map(school => (\n                    <option key={school.id} value={school.id}>\n                      {school.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div className=\"form-group\">\n                <label>院部：</label>\n                <select \n                  value={selectedDepartment} \n                  onChange={(e) => handleDepartmentChange(e.target.value)}\n                  disabled={!selectedSchool}\n                >\n                  <option value=\"\">请选择院部（必选）</option>\n                  {getCurrentSchoolDepartments().map(department => (\n                    <option key={department.id} value={department.id}>\n                      {department.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>专业：</label>\n                <select \n                  value={selectedMajor} \n                  onChange={(e) => handleMajorChange(e.target.value)}\n                  disabled={!selectedDepartment}\n                >\n                  <option value=\"\">请选择专业（必选）</option>\n                  {getCurrentDepartmentMajors().map(major => (\n                    <option key={major.id} value={major.id}>\n                      {major.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div className=\"form-group\">\n                <label>班级：</label>\n                <select \n                  value={selectedClass} \n                  onChange={(e) => setSelectedClass(e.target.value)}\n                  disabled={!selectedMajor}\n                >\n                  <option value=\"\">请选择班级（必选）</option>\n                  {getCurrentMajorClasses().map(classItem => (\n                    <option key={classItem.id} value={classItem.id}>\n                      {classItem.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <button \n                  className=\"download-btn\"\n                  onClick={handleDownloadTemplate}\n                  disabled={loading}\n                >\n                  📥 下载Excel模板\n                </button>\n                <span className=\"form-help-text\">下载包含学号、姓名、密码三列的标准Excel模板（.xlsx格式）</span>\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>上传Excel文件：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"file\" \n                  accept=\".xlsx,.xls\"\n                  onChange={handleFileUpload}\n                  disabled={loading || !selectedSchool || !selectedDepartment || !selectedMajor || !selectedClass}\n                />\n                <span className=\"form-help-text\">支持.xlsx和.xls格式，文件大小不超过5MB。建议使用下载的Excel模板填写数据。</span>\n              </div>\n            </div>\n            \n            {uploadedFile && (\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <div className=\"file-info\">\n                    <span>📎 已选择文件: {uploadedFile.name}</span>\n                    <button \n                      className=\"remove-file-btn\"\n                      onClick={handleRemoveFile}\n                    >\n                      ✕ 移除\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleBatchImport}\n                disabled={loading || !uploadedFile || !selectedSchool || !selectedDepartment || !selectedMajor || !selectedClass}\n              >\n                {loading ? '导入中...' : '开始导入'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  // 题目管理标签页渲染函数\n  const renderProblemsTab = () => (\n    <div className=\"tab-content\">\n      <div className=\"sub-tabs\">\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'list' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('list')}\n        >\n          题目列表\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'create' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('create')}\n        >\n          创建题目\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'ai' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('ai')}\n        >\n          AI生题\n        </button>\n      </div>\n\n      {activeSubTab === 'list' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>题目列表</h2>\n            <button \n              className=\"add-btn\"\n              onClick={() => setActiveSubTab('create')}\n            >\n              创建题目\n            </button>\n          </div>\n          \n          <div className=\"problems-table\">\n            <table>\n              <thead>\n                <tr>\n                  <th>ID</th>\n                  <th>标题</th>\n                  <th>类型</th>\n                  <th>难度</th>\n                  <th>时间限制</th>\n                  <th>内存限制</th>\n                  <th>操作</th>\n                </tr>\n              </thead>\n              <tbody>\n                {problems.map(problem => {\n                  // 调试信息：打印每个题目的类型\n                  console.log(`=== 题目 ${problem.id} 调试信息 ===`);\n                  console.log('题目标题:', problem.title);\n                  console.log('原始类型:', problem.type);\n                  console.log('完整题目对象:', problem);\n                  console.log('所有字段名:', Object.keys(problem));\n                  console.log('选项字段:', problem.options);\n                  console.log('答案字段:', problem.answer);\n                  console.log('测试用例字段:', problem.test_cases);\n                  console.log('期望输出字段:', problem.expected_output);\n                  \n                  const inferredType = inferProblemType(problem);\n                  console.log('推断类型:', inferredType);\n                  console.log('=== 调试信息结束 ===');\n                  \n                  return (\n                    <tr key={problem.id}>\n                      <td>{problem.id}</td>\n                      <td>{problem.title}</td>\n                      <td>\n                        {(() => {\n                          const inferredType = inferProblemType(problem);\n                          const displayType = inferredType === 'choice' ? '选择题' : \n                                            inferredType === 'judge' ? '判断题' : \n                                            inferredType === 'short_answer' ? '简答题' : '编程题';\n                          \n                          return (\n                            <span className={`type-badge ${inferredType}`}>\n                              {displayType}\n                            </span>\n                          );\n                        })()}\n                        {/* 调试信息 */}\n                        <small style={{display: 'block', color: '#999', fontSize: '10px'}}>\n                          原始类型: {problem.type || 'undefined'} | 推断类型: {inferProblemType(problem)}\n                        </small>\n                      </td>\n                      <td>\n                        <span className={`difficulty-badge ${problem.difficulty}`}>\n                          {problem.difficulty === 'easy' ? '简单' : \n                           problem.difficulty === 'medium' ? '中等' : '困难'}\n                        </span>\n                      </td>\n                      <td>{problem.time_limit || '-'}ms</td>\n                      <td>{problem.memory_limit || '-'}MB</td>\n                      <td>\n                        <button \n                          className=\"action-btn edit\"\n                          onClick={() => handleEditProblem(problem)}\n                        >\n                          编辑\n                        </button>\n                        <button \n                          className=\"action-btn delete\"\n                          onClick={() => handleDeleteProblem(problem.id)}\n                        >\n                          删除\n                        </button>\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'create' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>{isEditing ? '✏️ 编辑题目' : '➕ 创建题目'}</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={handleCancelEdit}\n            >\n              ← 返回题目列表\n            </button>\n          </div>\n          \n          <div className=\"problem-form\">\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>题目标题：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"请输入题目标题\"\n                  value={problemForm.title}\n                  onChange={(e) => setProblemForm(prev => ({ ...prev, title: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>题目类型：<span className=\"required-mark\">*</span></label>\n                <select \n                  value={problemForm.type}\n                  onChange={(e) => handleProblemTypeChange(e.target.value)}\n                >\n                  <option value=\"programming\">编程题</option>\n                  <option value=\"choice\">选择题</option>\n                  <option value=\"judge\">判断题</option>\n                  <option value=\"short_answer\">简答题</option>\n                </select>\n              </div>\n            </div>\n\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>难度：<span className=\"required-mark\">*</span></label>\n                <select \n                  value={problemForm.difficulty}\n                  onChange={(e) => setProblemForm(prev => ({ ...prev, difficulty: e.target.value }))}\n                >\n                  <option value=\"easy\">简单</option>\n                  <option value=\"medium\">中等</option>\n                  <option value=\"hard\">困难</option>\n                </select>\n              </div>\n              \n              {problemForm.type === 'choice' && (\n                <div className=\"form-group\">\n                  <label>选择类型：</label>\n                  <div className=\"checkbox-group\">\n                    <label className=\"checkbox-label\">\n                      <input \n                        type=\"checkbox\"\n                        checked={problemForm.is_multiple_choice}\n                        onChange={(e) => setProblemForm(prev => ({ \n                          ...prev, \n                          is_multiple_choice: e.target.checked \n                        }))}\n                      />\n                      <span>多选题</span>\n                    </label>\n                  </div>\n                </div>\n              )}\n            </div>\n            \n            <div className=\"form-group\">\n              <label>题目描述：<span className=\"required-mark\">*</span></label>\n              <textarea\n                placeholder=\"请输入题目描述\"\n                value={problemForm.description}\n                onChange={(e) => setProblemForm(prev => ({ ...prev, description: e.target.value }))}\n                rows={6}\n              />\n            </div>\n\n            {/* 选择题选项管理 */}\n            {problemForm.type === 'choice' && (\n              <div className=\"form-group\">\n                <label>选项：<span className=\"required-mark\">*</span></label>\n                <div className=\"choice-options\">\n                  {problemForm.options.map((option, index) => (\n                    <div key={option.id} className=\"choice-option\">\n                      <div className=\"option-header\">\n                        <span className=\"option-label\">选项 {String.fromCharCode(65 + index)}</span>\n                        <div className=\"option-controls\">\n                          <label className=\"checkbox-label\">\n                            <input \n                              type=\"checkbox\"\n                              checked={option.is_correct}\n                              onChange={() => toggleChoiceOptionCorrect(option.id)}\n                            />\n                            <span>正确答案</span>\n                          </label>\n                          {problemForm.options.length > 2 && (\n                            <button \n                              type=\"button\"\n                              className=\"remove-option-btn\"\n                              onClick={() => removeChoiceOption(option.id)}\n                            >\n                              删除\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                      <input \n                        type=\"text\" \n                        placeholder={`请输入选项 ${String.fromCharCode(65 + index)} 的内容`}\n                        value={option.text}\n                        onChange={(e) => updateChoiceOption(option.id, 'text', e.target.value)}\n                        className=\"option-input\"\n                      />\n                    </div>\n                  ))}\n                  <button \n                    type=\"button\"\n                    className=\"add-option-btn\"\n                    onClick={addChoiceOption}\n                  >\n                    + 添加选项\n                  </button>\n                </div>\n                <small>至少需要2个选项，最多支持10个选项</small>\n              </div>\n            )}\n\n            {/* 判断题选项管理 */}\n            {problemForm.type === 'judge' && (\n              <div className=\"form-group\">\n                <label>选项：<span className=\"required-mark\">*</span></label>\n                <div className=\"choice-options\">\n                  {problemForm.options.map((option, index) => (\n                    <div key={option.id} className=\"choice-option\">\n                      <div className=\"option-header\">\n                        <span className=\"option-label\">选项 {index + 1}</span>\n                        <div className=\"option-controls\">\n                          <label className=\"checkbox-label\">\n                            <input \n                              type=\"checkbox\"\n                              checked={option.is_correct}\n                              onChange={() => toggleChoiceOptionCorrect(option.id)}\n                            />\n                            <span>正确答案</span>\n                          </label>\n                        </div>\n                      </div>\n                      <input \n                        type=\"text\" \n                        value={option.text}\n                        onChange={(e) => updateChoiceOption(option.id, 'text', e.target.value)}\n                        className=\"option-input\"\n                        readOnly\n                      />\n                      <small className=\"option-hint\">判断题选项不可编辑</small>\n                    </div>\n                  ))}\n                </div>\n                <small>判断题固定为\"正确\"和\"错误\"两个选项，请选择其中一个作为正确答案</small>\n              </div>\n            )}\n            \n            {/* 简答题答案 */}\n            {problemForm.type === 'short_answer' && (\n              <div className=\"form-group\">\n                <label>答案：<span className=\"required-mark\">*</span></label>\n                <textarea\n                  placeholder=\"请输入简答题的标准答案\"\n                  value={problemForm.answer}\n                  onChange={(e) => setProblemForm(prev => ({ ...prev, answer: e.target.value }))}\n                  rows={6}\n                />\n                <small>请提供详细的答案内容，供学生参考和教师评分使用</small>\n              </div>\n            )}\n            \n            {/* 编程题相关字段 */}\n            {problemForm.type === 'programming' && (\n              <>\n                <div className=\"form-group\">\n                  <label>测试用例管理：<span className=\"required-mark\">*</span></label>\n                  <div className=\"test-cases-manager\">\n                    <div className=\"test-cases-header\">\n                      <span>测试用例</span>\n                      <button \n                        type=\"button\" \n                        className=\"add-test-case-btn\"\n                        onClick={() => addTestCase()}\n                      >\n                        ➕ 添加测试用例\n                      </button>\n                    </div>\n                    \n                    {problemForm.testCases && problemForm.testCases.length > 0 ? (\n                      <div className=\"test-cases-list\">\n                        {problemForm.testCases.map((testCase, index) => (\n                          <div key={testCase.id} className=\"test-case-item\">\n                            <div className=\"test-case-header\">\n                              <span className=\"test-case-number\">测试用例 {index + 1}</span>\n                              <button \n                                type=\"button\"\n                                className=\"remove-test-case-btn\"\n                                onClick={() => removeTestCase(testCase.id)}\n                              >\n                                ❌\n                              </button>\n                            </div>\n                            \n                            <div className=\"test-case-content\">\n                              <div className=\"test-case-input\">\n                                <label>输入：</label>\n                                <textarea\n                                  placeholder=\"输入数据（如果没有输入请留空）\"\n                                  value={testCase.input || ''}\n                                  onChange={(e) => updateTestCase(testCase.id, 'input', e.target.value)}\n                                  rows={3}\n                                />\n                                <small>如果没有输入，请留空</small>\n                              </div>\n                              \n                              <div className=\"test-case-output\">\n                                <label>期望输出：<span className=\"required-mark\">*</span></label>\n                                <textarea\n                                  placeholder=\"期望的输出结果\"\n                                  value={testCase.output || ''}\n                                  onChange={(e) => updateTestCase(testCase.id, 'output', e.target.value)}\n                                  rows={3}\n                                />\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    ) : (\n                      <div className=\"no-test-cases\">\n                        <p>还没有添加测试用例，请点击\"添加测试用例\"按钮添加</p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                <div className=\"form-row\">\n                  <div className=\"form-group\">\n                    <label>时间限制：<span className=\"required-mark\">*</span></label>\n                    <input \n                      type=\"number\" \n                      placeholder=\"请输入时间限制（毫秒）\"\n                      value={problemForm.time_limit}\n                      onChange={(e) => setProblemForm(prev => ({ ...prev, time_limit: parseInt(e.target.value) || 1000 }))}\n                      min=\"100\"\n                      max=\"10000\"\n                    />\n                    <small>单位：毫秒，范围：100-10000</small>\n                  </div>\n                  \n                  <div className=\"form-group\">\n                    <label>内存限制：<span className=\"required-mark\">*</span></label>\n                    <input \n                      type=\"number\" \n                      placeholder=\"请输入内存限制（MB）\"\n                      value={problemForm.memory_limit}\n                      onChange={(e) => setProblemForm(prev => ({ ...prev, memory_limit: parseInt(e.target.value) || 128 }))}\n                      min=\"16\"\n                      max=\"512\"\n                    />\n                    <small>单位：MB，范围：16-512</small>\n                  </div>\n                </div>\n              </>\n            )}\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleCreateProblem}\n                disabled={loading || !problemForm.title || !problemForm.description || \n                  (problemForm.type === 'programming' && (problemForm.testCases.length === 0 || \n                    problemForm.testCases.some(tc => !tc.output.trim()))) ||\n                  (problemForm.type === 'choice' && (problemForm.options.length < 2 || \n                    problemForm.options.some(option => !option.text) || \n                    problemForm.correct_answers.length === 0)) ||\n                  (problemForm.type === 'judge' && problemForm.correct_answers.length !== 1) ||\n                  (problemForm.type === 'short_answer' && !problemForm.answer)}\n              >\n                {loading ? (isEditing ? '更新中...' : '创建中...') : (isEditing ? '更新题目' : '创建题目')}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'ai' && (\n        <AIProblemGenerationPage />\n      )}\n    </div>\n  );\n\n  // 课程查看标签页渲染函数（只读功能）\n  const renderCoursesTab = () => (\n    <div className=\"tab-content\">\n      <div className=\"sub-tabs\">\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'list' ? 'active' : ''}`}\n          onClick={() => {\n            setActiveSubTab('list');\n            // 如果当前在课程详情页，清除课程详情状态\n            if (activeSubTab === 'detail') {\n              setEditingCourse(null);\n            }\n            // 清除添加学生上下文\n            setAddingStudentContext('');\n          }}\n        >\n          课程列表\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'detail' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('detail')}\n          style={{ display: (editingCourse && activeSubTab === 'detail') ? 'inline-block' : 'none' }}\n        >\n          课程详情\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'add-student-to-course' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('add-student-to-course')}\n          style={{ display: (editingCourse && activeSubTab === 'detail') ? 'inline-block' : 'none' }}\n        >\n          添加学生\n        </button>\n      </div>\n\n      {activeSubTab === 'list' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>我的课程</h2>\n            <div className=\"section-info\">\n              <p>💡 点击任意课程卡片即可查看详情、管理学生和布置作业</p>\n            </div>\n          </div>\n          \n          <div className=\"courses-grid\">\n            {courses.length === 0 ? (\n              <div className=\"empty-state\">\n                <p>暂无课程，请联系管理员添加课程</p>\n              </div>\n            ) : (\n              courses.map(course => (\n                <div \n                  key={course.id} \n                  className=\"course-card\"\n                  onClick={() => handleViewCourseDetail(course.id)}\n                  style={{ cursor: 'pointer' }}\n                >\n                  <div className=\"course-header\">\n                    <h3>{course.name}</h3>\n                    <span className=\"course-status active\">进行中</span>\n                  </div>\n                  <div className=\"course-info\">\n                    <p><strong>教学班：</strong>{course.display_class_name || course.class_name || (course.teaching_class_name || '未设置')}</p>\n                    <p><strong>专业：</strong>{course.major_name}</p>\n                    <p><strong>学校：</strong>{course.school_name}</p>\n                    <p><strong>学生数量：</strong>{course.student_count || 0}人</p>\n                    <p><strong>创建时间：</strong>{formatDate(course.created_at)}</p>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'detail' && editingCourse && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>📚 课程详情：{editingCourse.name}</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => {\n                setActiveSubTab('list');\n                setEditingCourse(null);\n              }}\n            >\n              ← 返回课程列表\n            </button>\n          </div>\n          \n          <div className=\"course-detail\">\n            <div className={`course-info-section ${courseDetailAnimations.courseInfoVisible ? 'lotus-visible' : ''}`}>\n              <h3>课程基本信息</h3>\n              <div className=\"info-grid\">\n                <div className=\"info-item\">\n                  <label>课程名称：</label>\n                  <span>{editingCourse.name}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>课程描述：</label>\n                  <span>{editingCourse.description}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>教学班：</label>\n                  <span>{editingCourse.display_class_name || editingCourse.class_name || (editingCourse.teaching_class_name || '未设置')}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>专业：</label>\n                  <span>{editingCourse.major_name}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>学校：</label>\n                  <span>{editingCourse.school_name}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>学生数量：</label>\n                  <span>{editingCourse.student_count || 0}人</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>创建时间：</label>\n                  <span>{formatDate(editingCourse.created_at)}</span>\n                </div>\n              </div>\n            </div>\n\n            <div className={`course-students-section ${courseDetailAnimations.studentsSectionVisible ? 'lotus-visible' : ''}`}>\n              <div className=\"section-header\">\n                <h3>教学班学生</h3>\n                <button \n                  className=\"add-btn\"\n                  onClick={() => {\n                    // 设置添加学生上下文为课程详情页\n                    setAddingStudentContext('course-detail');\n                    setActiveSubTab('add-student-to-course');\n                  }}\n                >\n                  添加学生\n                </button>\n              </div>\n              <div className=\"students-table\">\n                <table>\n                  <thead>\n                    <tr>\n                      <th>学号</th>\n                      <th>姓名</th>\n                      <th>邮箱</th>\n                      <th>状态</th>\n                      <th>操作</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {(() => {\n                      // 获取当前课程的所有学生\n                      const courseStudents = [];\n                      \n                      // 1. 添加原本属于该教学班的学生\n                      const originalStudents = users.filter(user => \n                        user.class_id === editingCourse.class_id && user.role === 'student'\n                      );\n                      courseStudents.push(...originalStudents);\n                      \n                      // 2. 添加通过关联关系添加的学生\n                      const relatedStudents = studentClassRelations\n                        .filter(relation => relation.course_id === editingCourse.id)\n                        .map(relation => {\n                          // 查找学生的完整信息\n                          const studentInfo = users.find(user => user.id === relation.student_id);\n                          return {\n                            ...studentInfo,\n                            // 使用关联关系中的信息作为后备\n                            name: studentInfo ? studentInfo.name : relation.student_name,\n                            username: studentInfo ? studentInfo.username : relation.student_no,\n                            // 标记这是通过关联关系添加的学生\n                            isRelatedStudent: true,\n                            relationId: `${relation.student_id}_${relation.course_id}`\n                          };\n                        });\n                      courseStudents.push(...relatedStudents);\n                      \n                      if (courseStudents.length === 0) {\n                        return (\n                          <tr>\n                            <td colSpan=\"5\">\n                              <div className=\"empty-state\">\n                                <p>该教学班暂无学生</p>\n                              </div>\n                            </td>\n                          </tr>\n                        );\n                      }\n                      \n                      return courseStudents.map(student => (\n                        <tr key={student.id || student.relationId}>\n                          <td>{student.username}</td>\n                          <td>{student.name}</td>\n                          <td>{student.email || '-'}</td>\n                          <td>\n                            <span className={`status-badge ${student.isRelatedStudent ? 'related' : 'original'}`}>\n                              {student.isRelatedStudent ? '已添加' : '原班级'}\n                            </span>\n                          </td>\n                          <td>\n                            {student.isRelatedStudent ? (\n                              <button \n                                className=\"action-btn delete\"\n                                onClick={() => handleRemoveStudentFromCourse(student.relationId)}\n                              >\n                                移除\n                              </button>\n                            ) : (\n                              <button \n                                className=\"action-btn delete\"\n                                onClick={async () => {\n                                  if (!window.confirm('确定要将该原班级学生从本课程中退课吗？此操作不会删除其账号。')) return;\n                                  try {\n                                    await excludeOriginalStudent(editingCourse.id, student.id);\n                                    setSuccess('该学生已从本课程退课');\n                                    // 刷新课程学生数据\n                                    await fetchStudentClassRelations(editingCourse.id);\n                                  } catch (apiError) {\n                                    console.error('退课失败:', apiError);\n                                    setError(apiError.response?.data?.error || '退课失败');\n                                  }\n                                }}\n                              >\n                                退课\n                              </button>\n                            )}\n                          </td>\n                        </tr>\n                      ));\n                    })()}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n\n            <div className={`course-assignments-section ${courseDetailAnimations.assignmentsSectionVisible ? 'lotus-visible' : ''}`}>\n              <div className=\"section-header\">\n                <h3>已布置作业</h3>\n                <button \n                  className=\"add-btn\"\n                  onClick={() => {\n                    // 自动设置当前课程ID到作业表单\n                    setAssignmentForm(prev => ({\n                      ...prev,\n                      course_id: editingCourse.id\n                    }));\n                    // 设置编辑作业上下文为课程详情页\n                    setEditingAssignmentContext('course-detail');\n                    setActiveSubTab('create-assignment');\n                  }}\n                >\n                  布置作业\n                </button>\n              </div>\n              <div className=\"assignments-table\">\n                <table>\n                  <thead>\n                    <tr>\n                      <th>作业名称</th>\n                      <th>描述</th>\n                      <th>截止时间</th>\n                      <th>状态</th>\n                      <th>补交设置</th>\n                      <th>操作</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {assignments.filter(assignment => assignment.course_id === editingCourse.id).map(assignment => (\n                      <tr key={assignment.id}>\n                        <td>{assignment.name}</td>\n                        <td>{assignment.description}</td>\n                        <td>{formatDate(assignment.due_date)}</td>\n                        <td>\n                          <span className={`status-badge ${assignment.is_active ? 'active' : 'inactive'}`}>\n                            {assignment.is_active ? '进行中' : '已结束'}\n                          </span>\n                        </td>\n                        <td>\n                          {assignment.allow_overdue_submission ? (\n                            <div className=\"overdue-status\">\n                              <span className=\"overdue-badge enabled\">允许补交</span>\n                              {assignment.overdue_deadline && (\n                                <div className=\"overdue-detail\">\n                                  <small>补交截止: {formatDate(assignment.overdue_deadline)}</small>\n                                  <small>得分比例: {Math.round((assignment.overdue_score_ratio || 0.8) * 100)}%</small>\n                                </div>\n                              )}\n                            </div>\n                          ) : (\n                            <span className=\"overdue-badge disabled\">不允许补交</span>\n                          )}\n                        </td>\n                        <td>\n                          <button \n                            className=\"action-btn edit\"\n                            onClick={() => handleEditAssignment(assignment)}\n                          >\n                            编辑\n                          </button>\n                          <button \n                            className=\"action-btn delete\"\n                            onClick={() => handleDeleteAssignment(assignment.id)}\n                          >\n                            删除\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n                {assignments.filter(assignment => assignment.course_id === editingCourse.id).length === 0 && (\n                  <div className=\"empty-state\">\n                    <p>该课程暂无作业</p>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* 作业创建表单 */}\n            {activeSubTab === 'create-assignment' && (\n              <div className=\"course-assignment-form\">\n                <div className=\"section-header\">\n                  <h3>📝 布置作业（{editingCourse.name}）</h3>\n                  <button \n                    className=\"secondary-btn\"\n                    onClick={() => setActiveSubTab('detail')}\n                  >\n                    ← 返回课程详情\n                  </button>\n                </div>\n                \n                <div className=\"assignment-form\">\n                  <div className=\"form-row\">\n                    <div className=\"form-group\">\n                      <label>作业名称：<span className=\"required-mark\">*</span></label>\n                      <input \n                        type=\"text\" \n                        placeholder=\"请输入作业名称\"\n                        value={assignmentForm.name}\n                        onChange={(e) => setAssignmentForm(prev => ({ ...prev, name: e.target.value }))}\n                      />\n                    </div>\n                    \n                    <div className=\"form-group\">\n                      <label>课程：</label>\n                      <input \n                        type=\"text\" \n                        value={editingCourse.name}\n                        disabled\n                        className=\"disabled-input\"\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"form-group\">\n                    <label>作业描述：<span className=\"required-mark\">*</span></label>\n                    <textarea\n                      placeholder=\"请输入作业描述\"\n                      value={assignmentForm.description}\n                      onChange={(e) => setAssignmentForm(prev => ({ ...prev, description: e.target.value }))}\n                      rows={4}\n                    />\n                  </div>\n                  \n                  <div className=\"form-group\">\n                    <label>作业要求：<span className=\"required-mark\">*</span></label>\n                    <textarea\n                      placeholder=\"请输入作业要求\"\n                      value={assignmentForm.requirements}\n                      onChange={(e) => setAssignmentForm(prev => ({ ...prev, requirements: e.target.value }))}\n                      rows={4}\n                    />\n                  </div>\n                  \n                  <div className=\"form-row\">\n                    <div className=\"form-group\">\n                      <label>截止时间：<span className=\"required-mark\">*</span></label>\n                      <input \n                        type=\"datetime-local\" \n                        value={assignmentForm.due_date}\n                        onChange={(e) => setAssignmentForm(prev => ({ ...prev, due_date: e.target.value }))}\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"form-group\">\n                    <label>选择题目：</label>\n                    <div className=\"problem-selection\">\n                      {problems.map(problem => (\n                        <label key={problem.id} className=\"problem-checkbox\">\n                          <input \n                            type=\"checkbox\" \n                            value={problem.id}\n                            checked={assignmentForm.problem_ids.includes(problem.id)}\n                            onChange={(e) => {\n                              if (e.target.checked) {\n                                setAssignmentForm(prev => ({ \n                                  ...prev, \n                                  problem_ids: [...prev.problem_ids, problem.id] \n                                }));\n                              } else {\n                                setAssignmentForm(prev => ({ \n                                  ...prev, \n                                  problem_ids: prev.problem_ids.filter(id => id !== problem.id) \n                                }));\n                              }\n                            }}\n                          />\n                          <span className=\"problem-title\">{problem.title}</span>\n                          <span className={`difficulty-badge ${problem.difficulty}`}>\n                            {problem.difficulty === 'easy' ? '简单' : \n                             problem.difficulty === 'medium' ? '中等' : '困难'}\n                          </span>\n                        </label>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  <div className=\"form-actions\">\n                    <button \n                      className=\"submit-btn\"\n                      onClick={handleCreateAssignment}\n                      disabled={loading || !assignmentForm.name || !assignmentForm.description || !assignmentForm.requirements || !assignmentForm.due_date || !assignmentForm.course_id}\n                    >\n                      {loading ? '创建中...' : '布置作业'}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* 添加学生到课程的表单 */}\n            {activeSubTab === 'add-student-to-course' && editingCourse && (\n              <div className=\"section-content\">\n                <div className=\"section-header\">\n                  <h3>👥 添加学生到课程：{editingCourse.name}</h3>\n                  <button \n                    className=\"secondary-btn\"\n                    onClick={() => setActiveSubTab('detail')}\n                  >\n                    ← 返回课程详情\n                  </button>\n                </div>\n                \n                <div className=\"add-student-to-course-form\">\n                  <div className=\"form-help\">\n                    <p>请选择要添加到该课程的学生：</p>\n                    <p>注意：只能添加已存在的学生账号</p>\n                  </div>\n                  \n                  <div className=\"form-row\">\n                    <div className=\"form-group\">\n                      <label>学号：<span className=\"required-mark\">*</span></label>\n                      <input \n                        type=\"text\" \n                        placeholder=\"请输入学号\"\n                        value={addStudentForm.student_no}\n                        onChange={(e) => setAddStudentForm(prev => ({ ...prev, student_no: e.target.value }))}\n                      />\n                    </div>\n                    \n                    <div className=\"form-group\">\n                      <label>姓名：<span className=\"required-mark\">*</span></label>\n                      <input \n                        type=\"text\" \n                        placeholder=\"请输入学生姓名\"\n                        value={addStudentForm.name}\n                        onChange={(e) => setAddStudentForm(prev => ({ ...prev, name: e.target.value }))}\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"form-actions\">\n                    <button \n                      className=\"submit-btn\"\n                      onClick={handleAddStudentToCourse}\n                      disabled={loading || !addStudentForm.student_no || !addStudentForm.name}\n                    >\n                      {loading ? '添加中...' : '添加学生到课程'}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  // 学生相关处理函数\n  const handleAddStudent = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      await registerStudent(addStudentForm);\n      setSuccess('学生账号创建成功！');\n      \n      // 重置表单\n      setAddStudentForm({\n        student_no: '',\n        name: '',\n        password: '',\n        email: '',\n        phone: '',\n        school_id: '',\n        department_id: '',\n        major_id: '',\n        class_id: ''\n      });\n      \n      // 刷新用户列表\n      const usersData = await getUsers(1, 50, 'student');\n      setUsers(usersData.users);\n      \n      // 刷新课程列表（因为学生数量可能发生变化）\n      try {\n        const coursesData = await getTeacherCourses();\n        if (coursesData && coursesData.courses) {\n          setCourses(coursesData.courses);\n        }\n      } catch (error) {\n        console.warn('刷新课程列表失败:', error);\n      }\n      \n      // 切换到学生列表\n      setActiveSubTab('list');\n      \n    } catch (error) {\n      setError(error.response?.data?.error || '创建学生账号失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditStudentClick = (user) => {\n    setEditingUser(user);\n    setEditForm({\n      email: user.email || '',\n      phone: user.phone || '',\n      school_id: user.school_id || '',\n      major_id: user.major_id || '',\n      class_id: user.class_id || '',\n      new_password: ''\n    });\n    setError('');\n    setSuccess('');\n  };\n\n  const handleSaveStudent = async () => {\n    if (!editingUser) return;\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      await updateUser(editingUser.id, editForm);\n      setSuccess('学生信息已更新');\n      // 刷新列表\n      const usersData = await getUsers(1, 50, 'student');\n      setUsers(usersData.users);\n      \n      // 刷新课程列表（因为学生数量可能发生变化）\n      try {\n        const coursesData = await getTeacherCourses();\n        if (coursesData && coursesData.courses) {\n          setCourses(coursesData.courses);\n        }\n      } catch (error) {\n        console.warn('刷新课程列表失败:', error);\n      }\n      \n      setEditingUser(null);\n    } catch (error) {\n      setError(error.response?.data?.error || '更新学生信息失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCancelEditStudent = () => {\n    setEditingUser(null);\n    setEditForm({ email: '', phone: '', school_id: '', major_id: '', class_id: '', new_password: '' });\n  };\n\n  const handleDeleteStudent = async (userId) => {\n    if (!window.confirm('确定要删除该学生吗？此操作不可恢复。')) return;\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      await deleteUser(userId);\n      setSuccess('学生已删除');\n      const usersData = await getUsers(1, 50, 'student');\n      setUsers(usersData.users);\n      \n      // 刷新课程列表（因为学生数量可能发生变化）\n      try {\n        const coursesData = await getTeacherCourses();\n        if (coursesData && coursesData.courses) {\n          setCourses(coursesData.courses);\n        }\n      } catch (error) {\n        console.warn('刷新课程列表失败:', error);\n      }\n      \n    } catch (error) {\n      setError(error.response?.data?.error || '删除学生失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddStudentSchoolChange = async (schoolId) => {\n    setAddStudentForm(prev => ({ \n      ...prev, \n      school_id: schoolId, \n      department_id: '', \n      major_id: '', \n      class_id: '' \n    }));\n    \n    // 不再重置全局的departments、majors和classes数组\n    // 这些数组应该保持完整，用于学生列表显示\n  };\n\n  const handleAddStudentDepartmentChange = async (departmentId) => {\n    setAddStudentForm(prev => ({ \n      ...prev, \n      department_id: departmentId, \n      major_id: '', \n      class_id: '' \n    }));\n    \n    // 不再重置全局的majors和classes数组\n    // 这些数组应该保持完整，用于学生列表显示\n  };\n\n  const handleAddStudentMajorChange = async (majorId) => {\n    setAddStudentForm(prev => ({ \n      ...prev, \n      major_id: majorId, \n      class_id: '' \n    }));\n    \n    // 不再重置全局的classes数组\n    // 这个数组应该保持完整，用于学生列表显示\n  };\n\n  // 选择题选项管理函数\n  const addChoiceOption = () => {\n    setProblemForm(prev => {\n      // 计算下一个可用的字母ID\n      const existingIds = prev.options.map(option => option.id);\n      let nextId = 'A';\n      for (let i = 0; i < 26; i++) {\n        const candidateId = String.fromCharCode(65 + i); // A, B, C, D...\n        if (!existingIds.includes(candidateId)) {\n          nextId = candidateId;\n          break;\n        }\n      }\n      \n      return {\n        ...prev,\n        options: [...prev.options, { id: nextId, text: '', is_correct: false }]\n      };\n    });\n  };\n\n  const removeChoiceOption = (optionId) => {\n    setProblemForm(prev => ({\n      ...prev,\n      options: prev.options.filter(option => option.id !== optionId)\n    }));\n  };\n\n  const updateChoiceOption = (optionId, field, value) => {\n    setProblemForm(prev => ({\n      ...prev,\n      options: prev.options.map(option => \n        option.id === optionId ? { ...option, [field]: value } : option\n      )\n    }));\n  };\n\n  const toggleChoiceOptionCorrect = (optionId) => {\n    setProblemForm(prev => {\n      let updatedOptions;\n      \n      if (prev.type === 'judge') {\n        // 判断题：单选模式，点击一个选项时取消其他选项\n        updatedOptions = prev.options.map(option => ({\n          ...option,\n          is_correct: option.id === optionId ? !option.is_correct : false\n        }));\n      } else {\n        // 选择题：多选模式，可以同时选择多个选项\n        updatedOptions = prev.options.map(option => \n          option.id === optionId ? { ...option, is_correct: !option.is_correct } : option\n        );\n      }\n      \n      // 更新正确答案数组 - 统一使用选项ID\n      const correctAnswers = updatedOptions\n        .filter(option => option.is_correct)\n        .map(option => option.id);\n      \n      return {\n        ...prev,\n        options: updatedOptions,\n        correct_answers: correctAnswers\n      };\n    });\n  };\n\n  const handleProblemTypeChange = (type) => {\n    setProblemForm(prev => {\n      if (type === 'choice') {\n        // 切换到选择题时，初始化至少两个选项\n        return {\n          ...prev,\n          type,\n          options: [\n            { id: 'A', text: '', is_correct: false },\n            { id: 'B', text: '', is_correct: false }\n          ],\n          correct_answers: [],\n          is_multiple_choice: false\n        };\n      } else if (type === 'judge') {\n        // 切换到判断题时，初始化两个固定选项\n        return {\n          ...prev,\n          type,\n          options: [\n            { id: 'A', text: '正确', is_correct: false },\n            { id: 'B', text: '错误', is_correct: false }\n          ],\n          correct_answers: [],\n          is_multiple_choice: false\n        };\n      } else if (type === 'short_answer') {\n        // 切换到简答题时，清空选项相关字段，添加答案字段\n        return {\n          ...prev,\n          type,\n          options: [],\n          correct_answers: [],\n          is_multiple_choice: false,\n          answer: '' // 简答题答案\n        };\n      } else {\n        // 切换到其他题型时，清空选择题相关字段\n        return {\n          ...prev,\n          type,\n          options: [],\n          correct_answers: [],\n          is_multiple_choice: false\n        };\n      }\n    });\n  };\n\n  // 获取当前选中学校对应的专业列表（用于选择器显示）\n  const getCurrentSchoolMajors = () => {\n    if (!selectedSchool) return [];\n    return majors.filter(major => major.school_id === selectedSchool);\n  };\n\n  // 获取当前选中专业对应的班级列表（用于选择器显示）\n  const getCurrentMajorClasses = () => {\n    if (!selectedMajor) return [];\n    \n    const majorId = selectedMajor;\n    const filteredClasses = classes.filter(classItem => {\n      const classMajorId = classItem.major_id;\n      const isMatch = classMajorId === majorId || classMajorId === parseInt(majorId) || parseInt(classMajorId) === majorId;\n      return isMatch;\n    });\n    \n    return filteredClasses;\n  };\n\n  // 获取添加学生表单中选中学校对应的专业列表\n  const getAddStudentSchoolMajors = () => {\n    if (!addStudentForm.school_id) return [];\n    \n    const schoolId = addStudentForm.school_id;\n    const filteredMajors = majors.filter(major => {\n      const majorSchoolId = major.school_id;\n      const isMatch = majorSchoolId === schoolId || majorSchoolId === parseInt(schoolId) || parseInt(majorSchoolId) === schoolId;\n      return isMatch;\n    });\n    \n    return filteredMajors;\n  };\n\n  // 获取添加学生表单中选中学校对应的院部列表\n  const getAddStudentSchoolDepartments = () => {\n    if (!addStudentForm.school_id) return [];\n    \n    const schoolId = addStudentForm.school_id;\n    const filteredDepartments = departments.filter(department => {\n      const deptSchoolId = department.school_id;\n      const isMatch = deptSchoolId === schoolId || deptSchoolId === parseInt(schoolId) || parseInt(deptSchoolId) === schoolId;\n      return isMatch;\n    });\n    \n    return filteredDepartments;\n  };\n\n  // 获取添加学生表单中选中院部对应的专业列表\n  const getAddStudentDepartmentMajors = () => {\n    if (!addStudentForm.department_id) return [];\n    \n    const departmentId = addStudentForm.department_id;\n    const filteredMajors = majors.filter(major => {\n      const majorDeptId = major.department_id;\n      const isMatch = majorDeptId === departmentId || majorDeptId === parseInt(departmentId) || parseInt(majorDeptId) === departmentId;\n      return isMatch;\n    });\n    \n    return filteredMajors;\n  };\n\n  // 获取添加学生表单中选中专业对应的班级列表\n  const getAddStudentMajorClasses = () => {\n    if (!addStudentForm.major_id) return [];\n    \n    const majorId = addStudentForm.major_id;\n    const filteredClasses = classes.filter(classItem => {\n      const classMajorId = classItem.major_id;\n      const isMatch = classMajorId === majorId || classMajorId === parseInt(majorId) || parseInt(classMajorId) === majorId;\n      return isMatch;\n    });\n    \n    return filteredClasses;\n  };\n\n  // 获取编辑学生表单中选中学校对应的专业列表\n  const getEditStudentSchoolMajors = () => {\n    if (!editForm.school_id) return [];\n    \n    const schoolId = editForm.school_id;\n    const filteredMajors = majors.filter(major => {\n      const majorSchoolId = major.school_id;\n      const isMatch = majorSchoolId === schoolId || majorSchoolId === parseInt(schoolId) || parseInt(majorSchoolId) === schoolId;\n      return isMatch;\n    });\n    \n    return filteredMajors;\n  };\n\n  // 获取编辑学生表单中选中专业对应的班级列表\n  const getEditStudentMajorClasses = () => {\n    if (!editForm.major_id) return [];\n    \n    const majorId = editForm.major_id;\n    const filteredClasses = classes.filter(classItem => {\n      const classMajorId = classItem.major_id;\n      const isMatch = classMajorId === majorId || classMajorId === parseInt(majorId) || parseInt(classMajorId) === majorId;\n      return isMatch;\n    });\n    \n    return filteredClasses;\n  };\n\n  // 获取当前选中学校对应的院部列表\n  const getCurrentSchoolDepartments = () => {\n    if (!selectedSchool) return [];\n    \n    const schoolId = selectedSchool;\n    const filteredDepartments = departments.filter(department => {\n      const deptSchoolId = department.school_id;\n      const isMatch = deptSchoolId === schoolId || deptSchoolId === parseInt(schoolId) || parseInt(deptSchoolId) === schoolId;\n      return isMatch;\n    });\n    \n    return filteredDepartments;\n  };\n\n  // 获取当前选中院部对应的专业列表\n  const getCurrentDepartmentMajors = () => {\n    if (!selectedDepartment) return [];\n    \n    const departmentId = selectedDepartment;\n    const filteredMajors = majors.filter(major => {\n      const majorDeptId = major.department_id;\n      const isMatch = majorDeptId === departmentId || majorDeptId === parseInt(departmentId) || parseInt(majorDeptId) === departmentId;\n      return isMatch;\n    });\n    \n    return filteredMajors;\n  };\n\n\n\n\n\n  return (\n    <div className=\"teacher-dashboard\">\n      <div className=\"dashboard-header\">\n        <h1>教师管理控制台</h1>\n      </div>\n      \n      <div className=\"dashboard-tabs\">\n        <button \n          className={`tab-btn ${activeTab === 'students' ? 'active' : ''}`}\n          onClick={() => {\n            setActiveTab('students');\n            setActiveSubTab('list');\n          }}\n        >\n          学生管理\n        </button>\n        <button \n          className={`tab-btn ${activeTab === 'problems' ? 'active' : ''}`}\n          onClick={() => {\n            setActiveTab('problems');\n            setActiveSubTab('list');\n          }}\n        >\n          题目管理\n        </button>\n        <button \n          className={`tab-btn ${activeTab === 'courses' ? 'active' : ''}`}\n          onClick={() => {\n            setActiveTab('courses');\n            setActiveSubTab('list');\n            // 清除课程详情状态\n            setEditingCourse(null);\n            setEditingAssignmentContext('');\n            setAddingStudentContext('');\n          }}\n        >\n          我的课程\n        </button>\n      </div>\n      \n      {error && <div className=\"error-message\">{error}</div>}\n      {success && <div className=\"success-message\">{success}</div>}\n      \n      {activeTab === 'students' && renderStudentsTab()}\n      {activeTab === 'problems' && renderProblemsTab()}\n      {activeTab === 'courses' && renderCoursesTab()}\n      \n      {/* 独立的布置作业表单面板 */}\n      {activeTab === 'courses' && activeSubTab === 'create-assignment' && editingCourse && (\n        <div className=\"tab-content\">\n          <div className=\"section-header\">\n            <h3>📝 布置作业（{editingCourse.name}）</h3>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => setActiveSubTab('detail')}\n            >\n              ← 返回课程详情\n            </button>\n          </div>\n          \n          <div className=\"assignment-form\">\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>作业名称：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"请输入作业名称\"\n                  value={assignmentForm.name}\n                  onChange={(e) => setAssignmentForm(prev => ({ ...prev, name: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>课程：</label>\n                <input \n                  type=\"text\" \n                  value={editingCourse.name}\n                  disabled\n                  className=\"disabled-input\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-group\">\n              <label>作业描述：<span className=\"required-mark\">*</span></label>\n              <textarea\n                placeholder=\"请输入作业描述\"\n                value={assignmentForm.description}\n                onChange={(e) => setAssignmentForm(prev => ({ ...prev, description: e.target.value }))}\n                rows={4}\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label>作业要求：<span className=\"required-mark\">*</span></label>\n              <textarea\n                placeholder=\"请输入作业要求\"\n                value={assignmentForm.requirements}\n                onChange={(e) => setAssignmentForm(prev => ({ ...prev, requirements: e.target.value }))}\n                rows={4}\n              />\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>截止时间：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"datetime-local\" \n                  value={assignmentForm.due_date}\n                  onChange={(e) => setAssignmentForm(prev => ({ ...prev, due_date: e.target.value }))}\n                />\n              </div>\n            </div>\n            \n            {/* 补交作业设置 */}\n            <div className=\"overdue-settings-section\">\n              <h4>📝 补交作业设置</h4>\n              <div className=\"form-group\">\n                <label className=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    checked={assignmentForm.allow_overdue_submission}\n                    onChange={(e) => setAssignmentForm(prev => ({ \n                      ...prev, \n                      allow_overdue_submission: e.target.checked \n                    }))}\n                  />\n                  <span>允许补交作业</span>\n                </label>\n                <div className=\"form-help\">\n                  勾选此项后，学生可以在截止时间后补交作业（需要教师特别授权）\n                </div>\n              </div>\n              \n              {assignmentForm.allow_overdue_submission && (\n                <>\n                  <div className=\"form-row\">\n                    <div className=\"form-group\">\n                      <label>补交截止时间：</label>\n                      <input \n                        type=\"datetime-local\" \n                        value={assignmentForm.overdue_deadline}\n                        onChange={(e) => setAssignmentForm(prev => ({ \n                          ...prev, \n                          overdue_deadline: e.target.value \n                        }))}\n                        min={assignmentForm.due_date}\n                      />\n                      <div className=\"form-help\">\n                        设置补交的最终截止时间，必须晚于正常截止时间\n                      </div>\n                    </div>\n                    \n                    <div className=\"form-group\">\n                      <label>逾期得分比例：</label>\n                      <div className=\"score-ratio-control\">\n                        <input \n                          type=\"range\" \n                          min=\"0\" \n                          max=\"1\" \n                          step=\"0.1\"\n                          value={assignmentForm.overdue_score_ratio}\n                          onChange={(e) => setAssignmentForm(prev => ({ \n                            ...prev, \n                            overdue_score_ratio: parseFloat(e.target.value) \n                          }))}\n                        />\n                        <span className=\"score-ratio-display\">\n                          {Math.round(assignmentForm.overdue_score_ratio * 100)}%\n                        </span>\n                      </div>\n                      <div className=\"form-help\">\n                        逾期提交的作业将按此比例得分（0% = 不得分，100% = 正常得分）\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"form-group\">\n                    <label>补交说明：</label>\n                    <div className=\"overdue-info-box\">\n                      <p>💡 <strong>补交机制说明：</strong></p>\n                      <ul>\n                        <li>只有被教师添加到白名单的学生可以补交</li>\n                        <li>补交截止时间后，系统将拒绝所有补交请求</li>\n                        <li>逾期提交的作业会标记为\"逾期提交\"</li>\n                        <li>补交作业的得分将按设定比例计算</li>\n                      </ul>\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n            \n            {/* 白名单管理（仅在编辑模式下显示） */}\n            {isEditingAssignment && editingAssignment && assignmentForm.allow_overdue_submission && (\n              <div className=\"whitelist-section\">\n                <AssignmentWhitelistManager \n                  assignment={editingAssignment}\n                  onUpdate={() => {\n                    // 刷新作业数据\n                    if (editingCourse) {\n                      getCourseAssignments().then(data => {\n                        setAssignments(data.assignments || []);\n                      });\n                    }\n                  }}\n                />\n              </div>\n            )}\n            \n            <div className=\"form-group\">\n              <label>选择题目：</label>\n              <div className=\"problem-selection\">\n                {problems.map(problem => (\n                  <label key={problem.id} className=\"problem-checkbox\">\n                    <input \n                      type=\"checkbox\" \n                      value={problem.id}\n                      checked={assignmentForm.problem_ids.includes(problem.id)}\n                      onChange={(e) => {\n                        if (e.target.checked) {\n                          setAssignmentForm(prev => ({ \n                            ...prev, \n                            problem_ids: [...prev.problem_ids, problem.id] \n                          }));\n                        } else {\n                          setAssignmentForm(prev => ({ \n                            ...prev, \n                            problem_ids: prev.problem_ids.filter(id => id !== problem.id) \n                          }));\n                        }\n                      }}\n                    />\n                    <span className=\"problem-title\">{problem.title}</span>\n                    <span className={`difficulty-badge ${problem.difficulty}`}>\n                      {problem.difficulty === 'easy' ? '简单' : \n                       problem.difficulty === 'medium' ? '中等' : '困难'}\n                    </span>\n                  </label>\n                ))}\n              </div>\n            </div>\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleCreateAssignment}\n                disabled={loading || !assignmentForm.name || !assignmentForm.description || !assignmentForm.requirements || !assignmentForm.due_date || !assignmentForm.course_id}\n              >\n                {loading ? '创建中...' : '布置作业'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* 独立的添加学生到课程表单面板 */}\n      {activeTab === 'courses' && activeSubTab === 'add-student-to-course' && editingCourse && (\n        <div className=\"tab-content\">\n          <div className=\"section-header\">\n            <h3>👥 添加学生到课程：{editingCourse.name}</h3>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => setActiveSubTab('detail')}\n            >\n              ← 返回课程详情\n            </button>\n          </div>\n          \n          <div className=\"add-student-to-course-form\">\n            <div className=\"form-help\">\n              <p>请选择要添加到该课程的学生：</p>\n              <p>注意：只能添加已存在的学生账号</p>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>学号：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"请输入学号\"\n                  value={addStudentForm.student_no}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, student_no: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>姓名：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"请输入学生姓名\"\n                  value={addStudentForm.name}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, name: e.target.value }))}\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleAddStudentToCourse}\n                disabled={loading || !addStudentForm.student_no || !addStudentForm.name}\n              >\n                {loading ? '添加中...' : '添加学生到课程'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* 编辑学生表单 - 全局显示 */}\n      {editingUser && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal\">\n            <div className=\"modal-header\">\n              <h3>编辑学生：{editingUser.name}（学号{editingUser.username}）</h3>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>邮箱：</label>\n                  <input type=\"email\" value={editForm.email} onChange={(e) => setEditForm(prev => ({ ...prev, email: e.target.value }))} />\n                </div>\n                <div className=\"form-group\">\n                  <label>手机号：</label>\n                  <input type=\"tel\" value={editForm.phone} onChange={(e) => setEditForm(prev => ({ ...prev, phone: e.target.value }))} />\n                </div>\n              </div>\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>学校：</label>\n                  <select value={editForm.school_id} onChange={(e) => {\n                    const val = e.target.value;\n                    setEditForm(prev => ({ ...prev, school_id: val, major_id: '', class_id: '' }));\n                  }}>\n                    <option value=\"\">请选择学校</option>\n                    {schools.map(s => <option key={s.id} value={s.id}>{s.name}</option>)}\n                  </select>\n                </div>\n                <div className=\"form-group\">\n                  <label>专业：</label>\n                  <select value={editForm.major_id} onChange={(e) => {\n                    const val = e.target.value;\n                    setEditForm(prev => ({ ...prev, major_id: val, class_id: '' }));\n                  }} disabled={!editForm.school_id}>\n                    <option value=\"\">请选择专业</option>\n                    {getEditStudentSchoolMajors().map(m => <option key={m.id} value={m.id}>{m.name}</option>)}\n                  </select>\n                </div>\n              </div>\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>班级：</label>\n                  <select value={editForm.class_id} onChange={(e) => setEditForm(prev => ({ ...prev, class_id: e.target.value }))} disabled={!editForm.major_id}>\n                    <option value=\"\">请选择班级</option>\n                    {getEditStudentMajorClasses().map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n                  </select>\n                </div>\n                <div className=\"form-group\">\n                  <label>重置密码（可选）：</label>\n                  <input type=\"password\" value={editForm.new_password} onChange={(e) => setEditForm(prev => ({ ...prev, new_password: e.target.value }))} />\n                </div>\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button className=\"secondary-btn\" onClick={handleCancelEditStudent}>取消</button>\n              <button className=\"submit-btn\" onClick={handleSaveStudent} disabled={loading}>{loading ? '保存中...' : '保存'}</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TeacherDashboardPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}