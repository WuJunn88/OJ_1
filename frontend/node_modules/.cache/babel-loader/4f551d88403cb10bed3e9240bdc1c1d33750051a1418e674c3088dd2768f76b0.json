{"ast":null,"code":"import _objectSpread from\"/Volumes/\\u575E\\u57CE/Judger_1/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{getUsers,getSchools,getMajors,getClasses,batchImportStudents,getProblems,createProblem,updateProblem,deleteProblem,updateUser,deleteUser,registerStudent,getTeacherCourses,createCourse,updateCourse,deleteCourse,getCourseAssignments,createAssignment,updateAssignment,deleteAssignment}from'../services/api';import'./TeacherDashboardPage.css';import AIProblemGenerationPage from'./AIProblemGenerationPage';import{mockCourses,mockAssignments,formatDate}from'../testData/courses';import WhaleIcon from'../components/WhaleIcon';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TeacherDashboardPage=()=>{const[activeTab,setActiveTab]=useState('students');const[activeSubTab,setActiveSubTab]=useState('list');// 子标签页\nconst[users,setUsers]=useState([]);const[problems,setProblems]=useState([]);const[schools,setSchools]=useState([]);const[majors,setMajors]=useState([]);const[classes,setClasses]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');// 批量导入相关状态\nconst[importData,setImportData]=useState('');const[selectedSchool,setSelectedSchool]=useState('');const[selectedMajor,setSelectedMajor]=useState('');const[selectedClass,setSelectedClass]=useState('');// 手动创建题目相关状态\nconst[problemForm,setProblemForm]=useState({title:'',description:'',test_cases:'',expected_output:'',difficulty:'easy',time_limit:1000,memory_limit:128});// 编辑题目状态\nconst[editingProblem,setEditingProblem]=useState(null);const[isEditing,setIsEditing]=useState(false);// 添加学生相关状态（按新规则：学号、姓名、密码必填）\nconst[addStudentForm,setAddStudentForm]=useState({student_no:'',name:'',password:'',email:'',phone:'',school_id:'',major_id:'',class_id:''});// 学生编辑相关状态\nconst[editingUser,setEditingUser]=useState(null);const[editForm,setEditForm]=useState({email:'',phone:'',school_id:'',major_id:'',class_id:'',new_password:''});// 课程相关状态\nconst[courses,setCourses]=useState([]);const[courseForm,setCourseForm]=useState({name:'',description:'',class_id:'',major_id:'',school_id:''});// 作业相关状态\nconst[assignments,setAssignments]=useState([]);const[assignmentForm,setAssignmentForm]=useState({name:'',description:'',requirements:'',due_date:'',course_id:'',problem_ids:[]});// 编辑课程状态\nconst[editingCourse,setEditingCourse]=useState(null);const[isEditingCourse,setIsEditingCourse]=useState(false);// 编辑作业状态\nconst[editingAssignment,setEditingAssignment]=useState(null);const[isEditingAssignment,setIsEditingAssignment]=useState(false);const[editingAssignmentContext,setEditingAssignmentContext]=useState('');// 记录编辑作业时的上下文\n// 添加学生到课程的状态\nconst[addingStudentContext,setAddingStudentContext]=useState('');// 记录添加学生时的上下文\n// 学生-教学班关联关系状态\nconst[studentClassRelations,setStudentClassRelations]=useState([]);// 存储学生与教学班的关联关系\nuseEffect(()=>{fetchInitialData();},[]);const fetchInitialData=async()=>{try{setLoading(true);setError('');setSuccess('');const[schoolsData,usersData,problemsData]=await Promise.all([getSchools(),getUsers(1,50,'student'),getProblems(1,50)]);setSchools(schoolsData);setUsers(usersData.users);setProblems(problemsData.problems);// 获取课程和作业数据（使用测试数据）\ntry{const[coursesData,assignmentsData]=await Promise.all([getTeacherCourses(),getCourseAssignments()]);setCourses(coursesData.courses||mockCourses);setAssignments(assignmentsData.assignments||mockAssignments);}catch(error){console.warn('获取课程或作业数据失败，使用测试数据:',error);setCourses(mockCourses);setAssignments(mockAssignments);}}catch(error){var _error$response,_error$response$data;setError((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'获取数据失败');console.error('Error fetching data:',error);}finally{setLoading(false);}};const handleSchoolChange=async schoolId=>{setSelectedSchool(schoolId);setSelectedMajor('');setSelectedClass('');if(schoolId){try{const majorsData=await getMajors(schoolId);setMajors(majorsData);}catch(error){console.error('Error fetching majors:',error);}}else{setMajors([]);}};const handleMajorChange=async majorId=>{setSelectedMajor(majorId);setSelectedClass('');if(majorId){try{const classesData=await getClasses(majorId);setClasses(classesData);}catch(error){console.error('Error fetching classes:',error);}}else{setClasses([]);}};const handleBatchImport=async()=>{if(!importData.trim()){setError('请输入要导入的学生数据');setSuccess('');return;}if(!selectedSchool||!selectedMajor||!selectedClass){setError('请选择学校、专业和班级');setSuccess('');return;}// 解析CSV数据为学生对象数组\nconst lines=importData.split(/\\r?\\n/).map(l=>l.trim()).filter(l=>l&&!/^\\s*#/.test(l));const students=[];for(const line of lines){const parts=line.split(',').map(s=>s.trim());if(parts.length<3)continue;// 至少: 学号,姓名,密码\nconst[studentNo,name,password,email,phone]=parts;students.push({username:studentNo,name,password,email:email||undefined,phone:phone||undefined,school_id:selectedSchool,major_id:selectedMajor,class_id:selectedClass,role:'student'});}if(students.length===0){setError('没有有效的学生数据行。请按 CSV: 学号,姓名,密码[,邮箱][,手机号]');setSuccess('');return;}try{var _resp$success_count,_resp$failed_count;setLoading(true);setError('');setSuccess('');const resp=await batchImportStudents({students});const msg=(resp===null||resp===void 0?void 0:resp.message)||\"\\u6279\\u91CF\\u5BFC\\u5165\\u5B8C\\u6210: \\u6210\\u529F \".concat((_resp$success_count=resp===null||resp===void 0?void 0:resp.success_count)!==null&&_resp$success_count!==void 0?_resp$success_count:students.length,\" \\u4E2A, \\u5931\\u8D25 \").concat((_resp$failed_count=resp===null||resp===void 0?void 0:resp.failed_count)!==null&&_resp$failed_count!==void 0?_resp$failed_count:0,\" \\u4E2A\");setSuccess(msg);if(resp!==null&&resp!==void 0&&resp.errors&&resp.errors.length>0){const preview=resp.errors.slice(0,5).join('；');setError(\"\\u90E8\\u5206\\u5BFC\\u5165\\u5931\\u8D25\\uFF1A\".concat(preview).concat(resp.errors.length>5?' 等':''));}// 刷新用户列表\nconst usersData=await getUsers(1,50,'student');setUsers(usersData.users);setImportData('');}catch(error){var _error$response2,_error$response2$data;setError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'批量导入失败');}finally{setLoading(false);}};const handleCreateProblem=async()=>{try{setLoading(true);setError('');setSuccess('');if(isEditing&&editingProblem){await updateProblem(editingProblem.id,problemForm);setSuccess('题目更新成功！');}else{await createProblem(problemForm);setSuccess('题目创建成功！');}// 重置表单\nsetProblemForm({title:'',description:'',test_cases:'',expected_output:'',difficulty:'easy',time_limit:1000,memory_limit:128});setIsEditing(false);setEditingProblem(null);// 刷新题目列表\nconst problemsData=await getProblems(1,50);setProblems(problemsData.problems);// 切换到题目列表\nsetActiveSubTab('list');}catch(error){var _error$response3,_error$response3$data;setError(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||(isEditing?'更新题目失败':'创建题目失败'));}finally{setLoading(false);}};const handleEditProblem=problem=>{setEditingProblem(problem);setProblemForm({title:problem.title,description:problem.description,test_cases:problem.test_cases,expected_output:problem.expected_output,difficulty:problem.difficulty,time_limit:problem.time_limit,memory_limit:problem.memory_limit});setIsEditing(true);setActiveSubTab('create');};const handleDeleteProblem=async problemId=>{if(!window.confirm('确定要删除这个题目吗？此操作不可恢复。')){return;}try{setLoading(true);setError('');setSuccess('');await deleteProblem(problemId);setSuccess('题目删除成功！');// 刷新题目列表\nconst problemsData=await getProblems(1,50);setProblems(problemsData.problems);}catch(error){var _error$response4,_error$response4$data;setError(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'删除题目失败');}finally{setLoading(false);}};const handleCancelEdit=()=>{setIsEditing(false);setEditingProblem(null);setProblemForm({title:'',description:'',test_cases:'',expected_output:'',difficulty:'easy',time_limit:1000,memory_limit:128});setActiveSubTab('list');};// 学生管理标签页渲染函数\nconst renderStudentsTab=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sub-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='list'?'active':''),onClick:()=>setActiveSubTab('list'),children:\"\\u5B66\\u751F\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='add'?'active':''),onClick:()=>setActiveSubTab('add'),children:\"\\u6DFB\\u52A0\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='import'?'active':''),onClick:()=>setActiveSubTab('import'),children:\"\\u6279\\u91CF\\u5BFC\\u5165\"})]}),activeSubTab==='list'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u5B66\\u751F\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>setActiveSubTab('add'),children:\"\\u6DFB\\u52A0\\u5B66\\u751F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"users-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u5B66\\u53F7\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u59D3\\u540D\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u90AE\\u7BB1\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u73ED\\u7EA7\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u64CD\\u4F5C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.id}),/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email||'-'}),/*#__PURE__*/_jsx(\"td\",{children:user.class_id||'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(user.is_active?'active':'inactive'),children:user.is_active?'活跃':'禁用'})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit\",onClick:()=>handleEditStudentClick(user),children:\"\\u7F16\\u8F91\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleDeleteStudent(user.id),children:\"\\u5220\\u9664\"})]})]},user.id))})]})})]}),activeSubTab==='add'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u2795 \\u6DFB\\u52A0\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('list'),children:\"\\u2190 \\u8FD4\\u56DE\\u5B66\\u751F\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-student-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5B66\\u53F7\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"required-text\",children:\"\\u5FC5\\u586B\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u53F7\",value:addStudentForm.student_no,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{student_no:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5BC6\\u7801\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"required-text\",children:\"\\u5FC5\\u586B\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",value:addStudentForm.password,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{password:e.target.value})),required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u59D3\\u540D\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"required-text\",children:\"\\u5FC5\\u586B\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u751F\\u59D3\\u540D\",value:addStudentForm.name,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u90AE\\u7BB1\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\",value:addStudentForm.email,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{email:e.target.value}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u624B\\u673A\\u53F7\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801\",value:addStudentForm.phone,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{phone:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u6821\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:addStudentForm.school_id,onChange:e=>handleAddStudentSchoolChange(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u5B66\\u6821\"}),schools.map(school=>/*#__PURE__*/_jsx(\"option\",{value:school.id,children:school.name},school.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4E13\\u4E1A\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:addStudentForm.major_id,onChange:e=>handleAddStudentMajorChange(e.target.value),disabled:!addStudentForm.school_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u4E13\\u4E1A\"}),majors.map(major=>/*#__PURE__*/_jsx(\"option\",{value:major.id,children:major.name},major.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u73ED\\u7EA7\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:addStudentForm.class_id,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{class_id:e.target.value})),disabled:!addStudentForm.major_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u73ED\\u7EA7\"}),classes.map(classItem=>/*#__PURE__*/_jsx(\"option\",{value:classItem.id,children:classItem.name},classItem.id))]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleAddStudent,disabled:loading||!addStudentForm.student_no||!addStudentForm.name||!addStudentForm.password,children:loading?'添加中...':'添加学生'})})]})]}),activeSubTab==='import'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCE5 \\u6279\\u91CF\\u5BFC\\u5165\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('list'),children:\"\\u2190 \\u8FD4\\u56DE\\u5B66\\u751F\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"import-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9009\\u62E9\\u5B66\\u6821:\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedSchool,onChange:e=>handleSchoolChange(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u5B66\\u6821\"}),schools.map(school=>/*#__PURE__*/_jsx(\"option\",{value:school.id,children:school.name},school.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9009\\u62E9\\u4E13\\u4E1A:\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedMajor,onChange:e=>handleMajorChange(e.target.value),disabled:!selectedSchool,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u4E13\\u4E1A\"}),majors.map(major=>/*#__PURE__*/_jsx(\"option\",{value:major.id,children:major.name},major.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9009\\u62E9\\u73ED\\u7EA7:\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedClass,onChange:e=>setSelectedClass(e.target.value),disabled:!selectedMajor,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u73ED\\u7EA7\"}),classes.map(classItem=>/*#__PURE__*/_jsx(\"option\",{value:classItem.id,children:classItem.name},classItem.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u751F\\u6570\\u636E (CSV\\u683C\\u5F0F):\"}),/*#__PURE__*/_jsx(\"textarea\",{value:importData,onChange:e=>setImportData(e.target.value),placeholder:\"\\u5B66\\u53F7,\\u59D3\\u540D,\\u5BC6\\u7801,\\u90AE\\u7BB1,\\u624B\\u673A\\u53F7\\n2021001,\\u5F20\\u4E09,123456,zhangsan@example.com,13800138001\\n2021002,\\u674E\\u56DB,123456,lisi@example.com,13800138002\",rows:10}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-help\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"CSV\\u683C\\u5F0F\\u8BF4\\u660E\\uFF1A\\u6BCF\\u884C\\u4E00\\u4E2A\\u5B66\\u751F\\uFF0C\\u5B57\\u6BB5\\u7528\\u9017\\u53F7\\u5206\\u9694\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u5FC5\\u586B\\u5B57\\u6BB5\\uFF1A\\u5B66\\u53F7,\\u59D3\\u540D,\\u5BC6\\u7801\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u53EF\\u9009\\u5B57\\u6BB5\\uFF1A\\u90AE\\u7BB1,\\u624B\\u673A\\u53F7\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleBatchImport,disabled:loading||!importData.trim()||!selectedSchool||!selectedMajor||!selectedClass,children:loading?'导入中...':'开始导入'})})]})]})]});// 题目管理标签页渲染函数\nconst renderProblemsTab=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sub-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='list'?'active':''),onClick:()=>setActiveSubTab('list'),children:\"\\u9898\\u76EE\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='create'?'active':''),onClick:()=>setActiveSubTab('create'),children:isEditing?'编辑题目':'创建题目'}),/*#__PURE__*/_jsxs(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='ai'?'active':''),onClick:()=>setActiveSubTab('ai'),children:[/*#__PURE__*/_jsx(WhaleIcon,{size:20}),\" AI\\u751F\\u9898\"]})]}),activeSubTab==='list'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u9898\\u76EE\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>{setIsEditing(false);setEditingProblem(null);setActiveSubTab('create');},children:\"\\u521B\\u5EFA\\u9898\\u76EE\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"problems-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u6807\\u9898\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u96BE\\u5EA6\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u65F6\\u95F4\\u9650\\u5236\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u5185\\u5B58\\u9650\\u5236\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u64CD\\u4F5C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:problems.map(problem=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:problem.id}),/*#__PURE__*/_jsx(\"td\",{children:problem.title}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"difficulty-badge \".concat(problem.difficulty),children:problem.difficulty==='easy'?'简单':problem.difficulty==='medium'?'中等':'困难'})}),/*#__PURE__*/_jsxs(\"td\",{children:[problem.time_limit,\"ms\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[problem.memory_limit,\"MB\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(problem.is_active?'active':'inactive'),children:problem.is_active?'启用':'禁用'})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit\",onClick:()=>handleEditProblem(problem),children:\"\\u7F16\\u8F91\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleDeleteProblem(problem.id),children:\"\\u5220\\u9664\"})]})]},problem.id))})]})})]}),activeSubTab==='create'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isEditing?'✏️ 编辑题目':'➕ 创建题目'}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:handleCancelEdit,children:\"\\u2190 \\u8FD4\\u56DE\\u9898\\u76EE\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"problem-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9898\\u76EE\\u6807\\u9898\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u9898\\u76EE\\u6807\\u9898\",value:problemForm.title,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{title:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u96BE\\u5EA6\\u7B49\\u7EA7\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:problemForm.difficulty,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{difficulty:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"easy\",children:\"\\u7B80\\u5355\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"\\u4E2D\\u7B49\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hard\",children:\"\\u56F0\\u96BE\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u65F6\\u95F4\\u9650\\u5236 (ms)\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"1000\",value:problemForm.time_limit,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{time_limit:parseInt(e.target.value)})),min:\"100\",max:\"10000\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5185\\u5B58\\u9650\\u5236 (MB)\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"128\",value:problemForm.memory_limit,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{memory_limit:parseInt(e.target.value)})),min:\"16\",max:\"1024\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9898\\u76EE\\u63CF\\u8FF0\\uFF1A\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u9898\\u76EE\\u7684\\u8BE6\\u7EC6\\u63CF\\u8FF0\",value:problemForm.description,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),rows:6})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u6D4B\\u8BD5\\u7528\\u4F8B\\uFF1A\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u6D4B\\u8BD5\\u7528\\u4F8B\",value:problemForm.test_cases,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{test_cases:e.target.value})),rows:4})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u671F\\u671B\\u8F93\\u51FA\\uFF1A\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u671F\\u671B\\u7684\\u8F93\\u51FA\\u7ED3\\u679C\",value:problemForm.expected_output,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{expected_output:e.target.value})),rows:4})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleCreateProblem,disabled:loading||!problemForm.title||!problemForm.description||!problemForm.test_cases||!problemForm.expected_output,children:loading?isEditing?'更新中...':'创建中...':isEditing?'更新题目':'创建题目'})})]})]}),activeSubTab==='ai'&&/*#__PURE__*/_jsx(\"div\",{className:\"section-content\",children:/*#__PURE__*/_jsx(AIProblemGenerationPage,{})})]});// 课程管理标签页渲染函数\nconst renderCoursesTab=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sub-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='list'?'active':''),onClick:()=>{setActiveSubTab('list');// 如果当前在课程详情页，清除课程详情状态\nif(activeSubTab==='detail'){setEditingCourse(null);}// 清除添加学生上下文\nsetAddingStudentContext('');},children:\"\\u8BFE\\u7A0B\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='add'?'active':''),onClick:()=>setActiveSubTab('add'),children:\"\\u6DFB\\u52A0\\u8BFE\\u7A0B\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='detail'?'active':''),onClick:()=>setActiveSubTab('detail'),style:{display:editingCourse&&activeSubTab==='detail'?'inline-block':'none'},children:\"\\u8BFE\\u7A0B\\u8BE6\\u60C5\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='add-student-to-course'?'active':''),onClick:()=>setActiveSubTab('add-student-to-course'),style:{display:editingCourse&&activeSubTab==='detail'?'inline-block':'none'},children:\"\\u6DFB\\u52A0\\u5B66\\u751F\"})]}),activeSubTab==='list'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u6211\\u7684\\u8BFE\\u7A0B\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>{setActiveSubTab('add');// 如果当前在课程详情页，清除课程详情状态\nif(activeSubTab==='detail'){setEditingCourse(null);}// 清除添加学生上下文\nsetAddingStudentContext('');},children:\"\\u6DFB\\u52A0\\u8BFE\\u7A0B\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"courses-grid\",children:courses.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u6682\\u65E0\\u8BFE\\u7A0B\\uFF0C\\u8BF7\\u6DFB\\u52A0\\u60A8\\u7684\\u7B2C\\u4E00\\u4E2A\\u6559\\u5B66\\u73ED\"}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:()=>setActiveSubTab('add'),children:\"\\u6DFB\\u52A0\\u8BFE\\u7A0B\"})]}):courses.map(course=>/*#__PURE__*/_jsxs(\"div\",{className:\"course-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:course.name}),/*#__PURE__*/_jsx(\"span\",{className:\"course-status active\",children:\"\\u8FDB\\u884C\\u4E2D\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u6559\\u5B66\\u73ED\\uFF1A\"}),course.class_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u4E13\\u4E1A\\uFF1A\"}),course.major_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u5B66\\u6821\\uFF1A\"}),course.school_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u5B66\\u751F\\u6570\\u91CF\\uFF1A\"}),course.student_count||0,\"\\u4EBA\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u521B\\u5EFA\\u65F6\\u95F4\\uFF1A\"}),formatDate(course.created_at)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn primary\",onClick:()=>handleViewCourseDetail(course.id),children:\"\\u67E5\\u770B\\u8BE6\\u60C5\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit\",onClick:()=>handleEditCourse(course),children:\"\\u7F16\\u8F91\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleDeleteCourse(course.id),children:\"\\u5220\\u9664\"})]})]},course.id))})]}),activeSubTab==='add'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isEditingCourse?'✏️ 编辑课程':'➕ 添加课程'}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>{setActiveSubTab('list');setIsEditingCourse(false);setEditingCourse(null);setCourseForm({name:'',description:'',class_id:'',major_id:'',school_id:''});},children:\"\\u2190 \\u8FD4\\u56DE\\u8BFE\\u7A0B\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u8BFE\\u7A0B\\u540D\\u79F0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u8BFE\\u7A0B\\u540D\\u79F0\",value:courseForm.name,onChange:e=>setCourseForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\u63CF\\u8FF0\\uFF1A\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u8BFE\\u7A0B\\u63CF\\u8FF0\",value:courseForm.description,onChange:e=>setCourseForm(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),rows:3})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5B66\\u6821\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:courseForm.school_id,onChange:e=>handleCourseSchoolChange(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u5B66\\u6821\"}),schools.map(school=>/*#__PURE__*/_jsx(\"option\",{value:school.id,children:school.name},school.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4E13\\u4E1A\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:courseForm.major_id,onChange:e=>handleCourseMajorChange(e.target.value),disabled:!courseForm.school_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u4E13\\u4E1A\"}),majors.map(major=>/*#__PURE__*/_jsx(\"option\",{value:major.id,children:major.name},major.id))]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u6559\\u5B66\\u73ED\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:courseForm.class_id,onChange:e=>setCourseForm(prev=>_objectSpread(_objectSpread({},prev),{},{class_id:e.target.value})),disabled:!courseForm.major_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u6559\\u5B66\\u73ED\"}),classes.map(classItem=>/*#__PURE__*/_jsx(\"option\",{value:classItem.id,children:classItem.name},classItem.id))]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleCreateCourse,disabled:loading||!courseForm.name||!courseForm.school_id||!courseForm.major_id||!courseForm.class_id,children:loading?isEditingCourse?'更新中...':'创建中...':isEditingCourse?'更新课程':'创建课程'})})]})]}),activeSubTab==='create-assignment'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isEditingAssignment?'✏️ 编辑作业':'📝 布置作业'}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>{// 根据上下文智能返回\nif(editingAssignmentContext==='course-detail'){setActiveSubTab('detail');}else{setActiveSubTab('list');}setIsEditingAssignment(false);setEditingAssignment(null);setEditingAssignmentContext('');setAssignmentForm({name:'',description:'',requirements:'',due_date:'',course_id:'',problem_ids:[]});},children:editingAssignmentContext==='course-detail'?'← 返回课程详情':'← 返回课程列表'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"assignment-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u540D\\u79F0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u540D\\u79F0\",value:assignmentForm.name,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\uFF1A\"}),editingAssignmentContext==='course-detail'&&editingCourse?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingCourse.name,disabled:true,className:\"disabled-input\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"}),/*#__PURE__*/_jsxs(\"select\",{value:assignmentForm.course_id,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{course_id:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u8BFE\\u7A0B\"}),courses.map(course=>/*#__PURE__*/_jsxs(\"option\",{value:course.id,children:[course.name,\" - \",course.class_name]},course.id))]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u63CF\\u8FF0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u63CF\\u8FF0\",value:assignmentForm.description,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),rows:4})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u8981\\u6C42\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u8981\\u6C42\",value:assignmentForm.requirements,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{requirements:e.target.value})),rows:4})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u622A\\u6B62\\u65F6\\u95F4\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:assignmentForm.due_date,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{due_date:e.target.value}))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9009\\u62E9\\u9898\\u76EE\\uFF1A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"problem-selection\",children:problems.map(problem=>/*#__PURE__*/_jsxs(\"label\",{className:\"problem-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:problem.id,checked:assignmentForm.problem_ids.includes(problem.id),onChange:e=>{if(e.target.checked){setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{problem_ids:[...prev.problem_ids,problem.id]}));}else{setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{problem_ids:prev.problem_ids.filter(id=>id!==problem.id)}));}}}),/*#__PURE__*/_jsx(\"span\",{className:\"problem-title\",children:problem.title}),/*#__PURE__*/_jsx(\"span\",{className:\"difficulty-badge \".concat(problem.difficulty),children:problem.difficulty==='easy'?'简单':problem.difficulty==='medium'?'中等':'困难'})]},problem.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleCreateAssignment,disabled:loading||!assignmentForm.name||!assignmentForm.description||!assignmentForm.requirements||!assignmentForm.due_date||!assignmentForm.course_id,children:loading?isEditingAssignment?'更新中...':'创建中...':isEditingAssignment?'更新作业':'布置作业'})})]})]}),activeSubTab==='detail'&&editingCourse&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\uD83D\\uDCDA \\u8BFE\\u7A0B\\u8BE6\\u60C5\\uFF1A\",editingCourse.name]}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>{setActiveSubTab('list');setEditingCourse(null);},children:\"\\u2190 \\u8FD4\\u56DE\\u8BFE\\u7A0B\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course-info-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u8BFE\\u7A0B\\u57FA\\u672C\\u4FE1\\u606F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\u540D\\u79F0\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\u63CF\\u8FF0\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u6559\\u5B66\\u73ED\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.class_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4E13\\u4E1A\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.major_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u6821\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.school_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u751F\\u6570\\u91CF\\uFF1A\"}),/*#__PURE__*/_jsxs(\"span\",{children:[editingCourse.student_count||0,\"\\u4EBA\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u521B\\u5EFA\\u65F6\\u95F4\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(editingCourse.created_at)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-students-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u6559\\u5B66\\u73ED\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>{// 设置添加学生上下文为课程详情页\nsetAddingStudentContext('course-detail');setActiveSubTab('add-student-to-course');},children:\"\\u6DFB\\u52A0\\u5B66\\u751F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"students-table\",children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u5B66\\u53F7\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u59D3\\u540D\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u90AE\\u7BB1\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u64CD\\u4F5C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(()=>{// 获取当前课程的所有学生\nconst courseStudents=[];// 1. 添加原本属于该教学班的学生\nconst originalStudents=users.filter(user=>user.class_id===editingCourse.class_id&&user.role==='student');courseStudents.push(...originalStudents);// 2. 添加通过关联关系添加的学生\nconst relatedStudents=studentClassRelations.filter(relation=>relation.course_id===editingCourse.id).map(relation=>{// 查找学生的完整信息\nconst studentInfo=users.find(user=>user.id===relation.student_id);return _objectSpread(_objectSpread({},studentInfo),{},{// 使用关联关系中的信息作为后备\nname:studentInfo?studentInfo.name:relation.student_name,username:studentInfo?studentInfo.username:relation.student_no,// 标记这是通过关联关系添加的学生\nisRelatedStudent:true,relationId:relation.student_id+'_'+relation.class_id});});// 合并学生列表，去重\nconst allStudents=[...originalStudents,...relatedStudents];const uniqueStudents=allStudents.filter((student,index,self)=>index===self.findIndex(s=>s.id===student.id));return uniqueStudents.map(student=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:student.username}),/*#__PURE__*/_jsx(\"td\",{children:student.name}),/*#__PURE__*/_jsx(\"td\",{children:student.email||'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(student.is_active?'active':'inactive'),children:student.is_active?'活跃':'禁用'})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit\",onClick:()=>handleEditStudentClick(student),children:\"\\u7F16\\u8F91\"}),student.isRelatedStudent&&/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleRemoveStudentFromCourse(student.relationId),children:\"\\u79FB\\u9664\"})]})]},student.relationId||student.id));})()})]}),(()=>{// 获取当前课程的所有学生数量\nconst originalStudents=users.filter(user=>user.class_id===editingCourse.class_id&&user.role==='student');const relatedStudents=studentClassRelations.filter(relation=>relation.course_id===editingCourse.id);const totalStudents=originalStudents.length+relatedStudents.length;if(totalStudents===0){return/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BE5\\u6559\\u5B66\\u73ED\\u6682\\u65E0\\u5B66\\u751F\"})});}return null;})()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-assignments-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u5DF2\\u5E03\\u7F6E\\u4F5C\\u4E1A\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>{// 自动设置当前课程ID到作业表单\nsetAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{course_id:editingCourse.id}));// 设置编辑作业上下文为课程详情页\nsetEditingAssignmentContext('course-detail');setActiveSubTab('create-assignment');},children:\"\\u5E03\\u7F6E\\u4F5C\\u4E1A\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"assignments-table\",children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u4F5C\\u4E1A\\u540D\\u79F0\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u63CF\\u8FF0\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u622A\\u6B62\\u65F6\\u95F4\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u64CD\\u4F5C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:assignments.filter(assignment=>assignment.course_id===editingCourse.id).map(assignment=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:assignment.name}),/*#__PURE__*/_jsx(\"td\",{children:assignment.description}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(assignment.due_date)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(assignment.is_active?'active':'inactive'),children:assignment.is_active?'进行中':'已结束'})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit\",onClick:()=>handleEditAssignment(assignment),children:\"\\u7F16\\u8F91\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleDeleteAssignment(assignment.id),children:\"\\u5220\\u9664\"})]})]},assignment.id))})]}),assignments.filter(assignment=>assignment.course_id===editingCourse.id).length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BE5\\u8BFE\\u7A0B\\u6682\\u65E0\\u4F5C\\u4E1A\"})})]})]}),activeSubTab==='create-assignment'&&/*#__PURE__*/_jsxs(\"div\",{className:\"course-assignment-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCDD \\u5E03\\u7F6E\\u4F5C\\u4E1A\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('detail'),children:\"\\u2190 \\u8FD4\\u56DE\\u8BFE\\u7A0B\\u8BE6\\u60C5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"assignment-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u540D\\u79F0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u540D\\u79F0\",value:assignmentForm.name,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingCourse.name,disabled:true,className:\"disabled-input\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u63CF\\u8FF0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u63CF\\u8FF0\",value:assignmentForm.description,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),rows:4})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u8981\\u6C42\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u8981\\u6C42\",value:assignmentForm.requirements,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{requirements:e.target.value})),rows:4})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u622A\\u6B62\\u65F6\\u95F4\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:assignmentForm.due_date,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{due_date:e.target.value}))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9009\\u62E9\\u9898\\u76EE\\uFF1A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"problem-selection\",children:problems.map(problem=>/*#__PURE__*/_jsxs(\"label\",{className:\"problem-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:problem.id,checked:assignmentForm.problem_ids.includes(problem.id),onChange:e=>{if(e.target.checked){setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{problem_ids:[...prev.problem_ids,problem.id]}));}else{setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{problem_ids:prev.problem_ids.filter(id=>id!==problem.id)}));}}}),/*#__PURE__*/_jsx(\"span\",{className:\"problem-title\",children:problem.title}),/*#__PURE__*/_jsx(\"span\",{className:\"difficulty-badge \".concat(problem.difficulty),children:problem.difficulty==='easy'?'简单':problem.difficulty==='medium'?'中等':'困难'})]},problem.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleCreateAssignment,disabled:loading||!assignmentForm.name||!assignmentForm.description||!assignmentForm.requirements||!assignmentForm.due_date||!assignmentForm.course_id,children:loading?'创建中...':'布置作业'})})]})]})]})]}),activeSubTab==='add-student-to-course'&&editingCourse&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83D\\uDC65 \\u6DFB\\u52A0\\u5B66\\u751F\\u5230\\u8BFE\\u7A0B\\uFF1A\",editingCourse.name]}),/*#__PURE__*/_jsx(\"p\",{className:\"form-description\",children:\"\\u8BF7\\u8F93\\u5165\\u5DF2\\u6CE8\\u518C\\u5B66\\u751F\\u7684\\u5B66\\u53F7\\u548C\\u59D3\\u540D\\uFF0C\\u5C06\\u5176\\u6DFB\\u52A0\\u5230\\u5F53\\u524D\\u6559\\u5B66\\u73ED\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('detail'),children:\"\\u2190 \\u8FD4\\u56DE\\u8BFE\\u7A0B\\u8BE6\\u60C5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-student-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5B66\\u53F7\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u53F7\",value:addStudentForm.student_no,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{student_no:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u59D3\\u540D\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u751F\\u59D3\\u540D\",value:addStudentForm.name,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value})),required:true})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u6559\\u5B66\\u73ED\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingCourse.class_name,disabled:true,className:\"disabled-input\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleAddStudentToCourse,disabled:loading||!addStudentForm.student_no||!addStudentForm.name,children:loading?'添加中...':'添加学生'})})]})]})]});// 处理添加学生时的学校选择变化\nconst handleAddStudentSchoolChange=async schoolId=>{setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{school_id:schoolId,major_id:'',class_id:''}));if(schoolId){try{const majorsData=await getMajors(schoolId);setMajors(majorsData);}catch(error){console.error('Error fetching majors:',error);}}else{setMajors([]);}};// 处理添加学生时的专业选择变化\nconst handleAddStudentMajorChange=async majorId=>{setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{major_id:majorId,class_id:''}));if(majorId){try{const classesData=await getClasses(majorId);setClasses(classesData);}catch(error){console.error('Error fetching classes:',error);}}else{setClasses([]);}};// 处理添加学生\nconst handleAddStudent=async()=>{try{setLoading(true);setError('');setSuccess('');await registerStudent(addStudentForm);setSuccess('学生添加成功！');// 重置表单\nsetAddStudentForm({student_no:'',name:'',password:'',email:'',phone:'',school_id:'',major_id:'',class_id:''});// 刷新用户列表\nconst usersData=await getUsers(1,50,'student');setUsers(usersData.users);// 切换到学生列表\nsetActiveSubTab('list');}catch(error){var _error$response5,_error$response5$data;setError(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||'添加学生失败');}finally{setLoading(false);}};// 处理向课程添加学生\nconst handleAddStudentToCourse=async()=>{try{setLoading(true);setError('');setSuccess('');// 查找学生是否已存在\nconst existingStudent=users.find(user=>user.username===addStudentForm.student_no&&user.name===addStudentForm.name&&user.role==='student');if(!existingStudent){setError('未找到该学生，请确认学号和姓名是否正确');return;}// 检查学生是否已经在该教学班中\n// 由于一个学生可以属于多个教学班，我们需要检查学生是否已经在该课程的教学班中\nconst isAlreadyInClass=users.some(user=>user.id===existingStudent.id&&user.class_id===editingCourse.class_id);if(isAlreadyInClass){setError('该学生已经在该教学班中');return;}// 检查学生是否已经通过关联关系添加到该课程\nconst isAlreadyRelated=studentClassRelations.some(relation=>relation.student_id===existingStudent.id&&relation.course_id===editingCourse.id);if(isAlreadyRelated){setError('该学生已经在该课程中');return;}// 添加学生到教学班的关联关系\nconst newRelation={student_id:existingStudent.id,class_id:editingCourse.class_id,course_id:editingCourse.id,student_name:existingStudent.name,student_no:existingStudent.username,added_at:new Date().toISOString()};setStudentClassRelations(prev=>[...prev,newRelation]);setSuccess('学生已成功添加到课程！');// 重置表单\nsetAddStudentForm({student_no:'',name:'',password:'',email:'',phone:'',school_id:'',major_id:'',class_id:''});// 返回到课程详情页\nsetActiveSubTab('detail');}catch(error){var _error$response6,_error$response6$data;setError(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||'添加学生失败');}finally{setLoading(false);}};// 处理从课程中移除学生\nconst handleRemoveStudentFromCourse=relationId=>{if(!window.confirm('确定要从该课程中移除该学生吗？'))return;try{// 从关联关系中移除\nsetStudentClassRelations(prev=>prev.filter(relation=>relation.student_id+'_'+relation.class_id!==relationId));setSuccess('学生已从课程中移除');}catch(error){setError('移除学生失败');}};// 学生编辑/删除相关\nconst handleEditStudentClick=user=>{setEditingUser(user);setEditForm({email:user.email||'',phone:user.phone||'',school_id:user.school_id||'',major_id:user.major_id||'',class_id:user.class_id||'',new_password:''});setError('');setSuccess('');};const handleSaveStudent=async()=>{if(!editingUser)return;try{setLoading(true);setError('');setSuccess('');await updateUser(editingUser.id,editForm);setSuccess('学生信息已更新');// 刷新列表\nconst usersData=await getUsers(1,50,'student');setUsers(usersData.users);setEditingUser(null);}catch(error){var _error$response7,_error$response7$data;setError(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.error)||'更新学生信息失败');}finally{setLoading(false);}};const handleCancelEditStudent=()=>{setEditingUser(null);setEditForm({email:'',phone:'',school_id:'',major_id:'',class_id:'',new_password:''});};const handleDeleteStudent=async userId=>{if(!window.confirm('确定要删除该学生吗？此操作不可恢复。'))return;try{setLoading(true);setError('');setSuccess('');await deleteUser(userId);setSuccess('学生已删除');const usersData=await getUsers(1,50,'student');setUsers(usersData.users);}catch(error){var _error$response8,_error$response8$data;setError(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.error)||'删除学生失败');}finally{setLoading(false);}};// 课程相关处理函数\nconst handleCourseSchoolChange=async schoolId=>{setCourseForm(prev=>_objectSpread(_objectSpread({},prev),{},{school_id:schoolId,major_id:'',class_id:''}));if(schoolId){try{const majorsData=await getMajors(schoolId);setMajors(majorsData);}catch(error){console.error('Error fetching majors:',error);}}else{setMajors([]);}};const handleCourseMajorChange=async majorId=>{setCourseForm(prev=>_objectSpread(_objectSpread({},prev),{},{major_id:majorId,class_id:''}));if(majorId){try{const classesData=await getClasses(majorId);setClasses(classesData);}catch(error){console.error('Error fetching classes:',error);}}else{setClasses([]);}};const handleCreateCourse=async()=>{try{setLoading(true);setError('');setSuccess('');if(isEditingCourse&&editingCourse){await updateCourse(editingCourse.id,courseForm);setSuccess('课程更新成功！');}else{await createCourse(courseForm);setSuccess('课程创建成功！');}// 重置表单\nsetCourseForm({name:'',description:'',class_id:'',major_id:'',school_id:''});setIsEditingCourse(false);setEditingCourse(null);// 刷新课程列表\nconst coursesData=await getTeacherCourses();setCourses(coursesData.courses||[]);// 切换到课程列表\nsetActiveSubTab('list');}catch(error){var _error$response9,_error$response9$data;setError(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.error)||(isEditingCourse?'更新课程失败':'创建课程失败'));}finally{setLoading(false);}};const handleEditCourse=course=>{setEditingCourse(course);setCourseForm({name:course.name,description:course.description||'',school_id:course.school_id||'',major_id:course.major_id||'',class_id:course.class_id||''});setIsEditingCourse(true);setActiveSubTab('add');};const handleDeleteCourse=async courseId=>{if(!window.confirm('确定要删除该课程吗？此操作不可恢复。'))return;try{setLoading(true);setError('');setSuccess('');await deleteCourse(courseId);setSuccess('课程已删除');// 刷新课程列表\nconst coursesData=await getTeacherCourses();setCourses(coursesData.courses||[]);}catch(error){var _error$response0,_error$response0$data;setError(((_error$response0=error.response)===null||_error$response0===void 0?void 0:(_error$response0$data=_error$response0.data)===null||_error$response0$data===void 0?void 0:_error$response0$data.error)||'删除课程失败');}finally{setLoading(false);}};const handleViewCourseDetail=courseId=>{const course=courses.find(c=>c.id===courseId);if(course){setActiveTab('courses');setActiveSubTab('detail');setEditingCourse(course);}};// 作业相关处理函数\nconst handleCreateAssignment=async()=>{try{setLoading(true);setError('');setSuccess('');// 如果在课程详情页面创建作业，自动设置课程ID\nconst assignmentData=_objectSpread({},assignmentForm);if(activeSubTab==='create-assignment'&&editingCourse){assignmentData.course_id=editingCourse.id;}if(isEditingAssignment&&editingAssignment){await updateAssignment(editingAssignment.id,assignmentData);setSuccess('作业更新成功！');}else{await createAssignment(assignmentData);setSuccess('作业布置成功！');}// 重置表单\nsetAssignmentForm({name:'',description:'',requirements:'',due_date:'',course_id:'',problem_ids:[]});setIsEditingAssignment(false);setEditingAssignment(null);// 刷新作业列表\nconst assignmentsData=await getCourseAssignments();setAssignments(assignmentsData.assignments||[]);// 如果在课程详情页面，返回到课程详情；否则返回到课程列表\nif(activeSubTab==='create-assignment'){setActiveSubTab('detail');}else{setActiveSubTab('list');}}catch(error){var _error$response1,_error$response1$data;setError(((_error$response1=error.response)===null||_error$response1===void 0?void 0:(_error$response1$data=_error$response1.data)===null||_error$response1$data===void 0?void 0:_error$response1$data.error)||(isEditingAssignment?'更新作业失败':'布置作业失败'));}finally{setLoading(false);}};const handleEditAssignment=assignment=>{setEditingAssignment(assignment);setAssignmentForm({name:assignment.name,description:assignment.description||'',requirements:assignment.requirements||'',due_date:assignment.due_date||'',course_id:assignment.course_id||'',problem_ids:assignment.problem_ids||[]});setIsEditingAssignment(true);// 记录编辑作业时的上下文\nif(activeSubTab==='detail'&&editingCourse){setEditingAssignmentContext('course-detail');}else{setEditingAssignmentContext('course-list');}// 切换到作业创建模式\nsetActiveSubTab('create-assignment');};const handleDeleteAssignment=async assignmentId=>{if(!window.confirm('确定要删除该作业吗？此操作不可恢复。'))return;try{setLoading(true);setError('');setSuccess('');await deleteAssignment(assignmentId);setSuccess('作业已删除');// 刷新作业列表\nconst assignmentsData=await getCourseAssignments();setAssignments(assignmentsData.assignments||[]);}catch(error){var _error$response10,_error$response10$dat;setError(((_error$response10=error.response)===null||_error$response10===void 0?void 0:(_error$response10$dat=_error$response10.data)===null||_error$response10$dat===void 0?void 0:_error$response10$dat.error)||'删除作业失败');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"teacher-dashboard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\u6559\\u5E08\\u7BA1\\u7406\\u63A7\\u5236\\u53F0\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(activeTab==='students'?'active':''),onClick:()=>{setActiveTab('students');setActiveSubTab('list');// 清除课程相关状态\nsetEditingCourse(null);setEditingAssignmentContext('');setAddingStudentContext('');},children:\"\\u5B66\\u751F\\u7BA1\\u7406\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(activeTab==='problems'?'active':''),onClick:()=>{setActiveTab('problems');setActiveSubTab('list');// 清除课程相关状态\nsetEditingCourse(null);setEditingAssignmentContext('');setAddingStudentContext('');},children:\"\\u9898\\u76EE\\u7BA1\\u7406\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(activeTab==='courses'?'active':''),onClick:()=>{setActiveTab('courses');setActiveSubTab('list');// 清除课程详情状态，但保留课程列表\nsetEditingCourse(null);setEditingAssignmentContext('');setAddingStudentContext('');},children:\"\\u6211\\u7684\\u8BFE\\u7A0B\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success}),activeTab==='students'&&renderStudentsTab(),activeTab==='problems'&&renderProblemsTab(),activeTab==='courses'&&renderCoursesTab(),editingUser&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-header\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u7F16\\u8F91\\u5B66\\u751F\\uFF1A\",editingUser.name,\"\\uFF08\\u5B66\\u53F7\",editingUser.username,\"\\uFF09\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u90AE\\u7BB1\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:editForm.email,onChange:e=>setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{email:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u624B\\u673A\\u53F7\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:editForm.phone,onChange:e=>setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{phone:e.target.value}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u6821\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.school_id,onChange:async e=>{const val=e.target.value;setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{school_id:val,major_id:'',class_id:''}));if(val){const majorsData=await getMajors(val);setMajors(majorsData);}else{setMajors([]);setClasses([]);}},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u5B66\\u6821\"}),schools.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s.id,children:s.name},s.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4E13\\u4E1A\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.major_id,onChange:async e=>{const val=e.target.value;setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{major_id:val,class_id:''}));if(val){const classesData=await getClasses(val);setClasses(classesData);}else{setClasses([]);}},disabled:!editForm.school_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u4E13\\u4E1A\"}),majors.map(m=>/*#__PURE__*/_jsx(\"option\",{value:m.id,children:m.name},m.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u73ED\\u7EA7\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.class_id,onChange:e=>setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{class_id:e.target.value})),disabled:!editForm.major_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u73ED\\u7EA7\"}),classes.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c.id,children:c.name},c.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u91CD\\u7F6E\\u5BC6\\u7801\\uFF08\\u53EF\\u9009\\uFF09\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:editForm.new_password,onChange:e=>setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{new_password:e.target.value}))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:handleCancelEditStudent,children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleSaveStudent,disabled:loading,children:loading?'保存中...':'保存'})]})]})})]});};export default TeacherDashboardPage;","map":{"version":3,"names":["React","useState","useEffect","getUsers","getSchools","getMajors","getClasses","batchImportStudents","getProblems","createProblem","updateProblem","deleteProblem","updateUser","deleteUser","registerStudent","getTeacherCourses","createCourse","updateCourse","deleteCourse","getCourseAssignments","createAssignment","updateAssignment","deleteAssignment","AIProblemGenerationPage","mockCourses","mockAssignments","formatDate","WhaleIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TeacherDashboardPage","activeTab","setActiveTab","activeSubTab","setActiveSubTab","users","setUsers","problems","setProblems","schools","setSchools","majors","setMajors","classes","setClasses","loading","setLoading","error","setError","success","setSuccess","importData","setImportData","selectedSchool","setSelectedSchool","selectedMajor","setSelectedMajor","selectedClass","setSelectedClass","problemForm","setProblemForm","title","description","test_cases","expected_output","difficulty","time_limit","memory_limit","editingProblem","setEditingProblem","isEditing","setIsEditing","addStudentForm","setAddStudentForm","student_no","name","password","email","phone","school_id","major_id","class_id","editingUser","setEditingUser","editForm","setEditForm","new_password","courses","setCourses","courseForm","setCourseForm","assignments","setAssignments","assignmentForm","setAssignmentForm","requirements","due_date","course_id","problem_ids","editingCourse","setEditingCourse","isEditingCourse","setIsEditingCourse","editingAssignment","setEditingAssignment","isEditingAssignment","setIsEditingAssignment","editingAssignmentContext","setEditingAssignmentContext","addingStudentContext","setAddingStudentContext","studentClassRelations","setStudentClassRelations","fetchInitialData","schoolsData","usersData","problemsData","Promise","all","coursesData","assignmentsData","console","warn","_error$response","_error$response$data","response","data","handleSchoolChange","schoolId","majorsData","handleMajorChange","majorId","classesData","handleBatchImport","trim","lines","split","map","l","filter","test","students","line","parts","s","length","studentNo","push","username","undefined","role","_resp$success_count","_resp$failed_count","resp","msg","message","concat","success_count","failed_count","errors","preview","slice","join","_error$response2","_error$response2$data","handleCreateProblem","id","_error$response3","_error$response3$data","handleEditProblem","problem","handleDeleteProblem","problemId","window","confirm","_error$response4","_error$response4$data","handleCancelEdit","renderStudentsTab","className","children","onClick","user","is_active","handleEditStudentClick","handleDeleteStudent","type","placeholder","value","onChange","e","prev","_objectSpread","target","required","handleAddStudentSchoolChange","school","handleAddStudentMajorChange","disabled","major","classItem","handleAddStudent","rows","renderProblemsTab","size","parseInt","min","max","renderCoursesTab","style","display","course","class_name","major_name","school_name","student_count","created_at","handleViewCourseDetail","handleEditCourse","handleDeleteCourse","handleCourseSchoolChange","handleCourseMajorChange","handleCreateCourse","checked","includes","handleCreateAssignment","courseStudents","originalStudents","relatedStudents","relation","studentInfo","find","student_id","student_name","isRelatedStudent","relationId","allStudents","uniqueStudents","student","index","self","findIndex","handleRemoveStudentFromCourse","totalStudents","assignment","handleEditAssignment","handleDeleteAssignment","handleAddStudentToCourse","_error$response5","_error$response5$data","existingStudent","isAlreadyInClass","some","isAlreadyRelated","newRelation","added_at","Date","toISOString","_error$response6","_error$response6$data","handleSaveStudent","_error$response7","_error$response7$data","handleCancelEditStudent","userId","_error$response8","_error$response8$data","_error$response9","_error$response9$data","courseId","_error$response0","_error$response0$data","c","assignmentData","_error$response1","_error$response1$data","assignmentId","_error$response10","_error$response10$dat","val","m"],"sources":["/Volumes/坞城/Judger_1/frontend/src/pages/TeacherDashboardPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getUsers, getSchools, getMajors, getClasses, batchImportStudents, getProblems, createProblem, updateProblem, deleteProblem, updateUser, deleteUser, registerStudent, getTeacherCourses, createCourse, updateCourse, deleteCourse, getCourseAssignments, createAssignment, updateAssignment, deleteAssignment } from '../services/api';\nimport './TeacherDashboardPage.css';\nimport AIProblemGenerationPage from './AIProblemGenerationPage';\nimport { mockCourses, mockAssignments, formatDate } from '../testData/courses';\nimport WhaleIcon from '../components/WhaleIcon';\n\nconst TeacherDashboardPage = () => {\n  const [activeTab, setActiveTab] = useState('students');\n  const [activeSubTab, setActiveSubTab] = useState('list'); // 子标签页\n  const [users, setUsers] = useState([]);\n  const [problems, setProblems] = useState([]);\n  const [schools, setSchools] = useState([]);\n  const [majors, setMajors] = useState([]);\n  const [classes, setClasses] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // 批量导入相关状态\n  const [importData, setImportData] = useState('');\n  const [selectedSchool, setSelectedSchool] = useState('');\n  const [selectedMajor, setSelectedMajor] = useState('');\n  const [selectedClass, setSelectedClass] = useState('');\n\n  // 手动创建题目相关状态\n  const [problemForm, setProblemForm] = useState({\n    title: '',\n    description: '',\n    test_cases: '',\n    expected_output: '',\n    difficulty: 'easy',\n    time_limit: 1000,\n    memory_limit: 128\n  });\n\n  // 编辑题目状态\n  const [editingProblem, setEditingProblem] = useState(null);\n  const [isEditing, setIsEditing] = useState(false);\n\n  // 添加学生相关状态（按新规则：学号、姓名、密码必填）\n  const [addStudentForm, setAddStudentForm] = useState({\n    student_no: '',\n    name: '',\n    password: '',\n    email: '',\n    phone: '',\n    school_id: '',\n    major_id: '',\n    class_id: ''\n  });\n\n  // 学生编辑相关状态\n  const [editingUser, setEditingUser] = useState(null);\n  const [editForm, setEditForm] = useState({\n    email: '',\n    phone: '',\n    school_id: '',\n    major_id: '',\n    class_id: '',\n    new_password: ''\n  });\n\n  // 课程相关状态\n  \n  const [courses, setCourses] = useState([]);\n  const [courseForm, setCourseForm] = useState({\n    name: '',\n    description: '',\n    class_id: '',\n    major_id: '',\n    school_id: ''\n  });\n\n  // 作业相关状态\n  const [assignments, setAssignments] = useState([]);\n  const [assignmentForm, setAssignmentForm] = useState({\n    name: '',\n    description: '',\n    requirements: '',\n    due_date: '',\n    course_id: '',\n    problem_ids: []\n  });\n\n  // 编辑课程状态\n  const [editingCourse, setEditingCourse] = useState(null);\n  const [isEditingCourse, setIsEditingCourse] = useState(false);\n\n  // 编辑作业状态\n  const [editingAssignment, setEditingAssignment] = useState(null);\n  const [isEditingAssignment, setIsEditingAssignment] = useState(false);\n  const [editingAssignmentContext, setEditingAssignmentContext] = useState(''); // 记录编辑作业时的上下文\n  \n  // 添加学生到课程的状态\n  const [addingStudentContext, setAddingStudentContext] = useState(''); // 记录添加学生时的上下文\n  \n  // 学生-教学班关联关系状态\n  const [studentClassRelations, setStudentClassRelations] = useState([]); // 存储学生与教学班的关联关系\n\n  useEffect(() => {\n    fetchInitialData();\n  }, []);\n\n  const fetchInitialData = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      const [schoolsData, usersData, problemsData] = await Promise.all([\n        getSchools(),\n        getUsers(1, 50, 'student'),\n        getProblems(1, 50)\n      ]);\n      \n      setSchools(schoolsData);\n      setUsers(usersData.users);\n      setProblems(problemsData.problems);\n      \n      // 获取课程和作业数据（使用测试数据）\n      try {\n        const [coursesData, assignmentsData] = await Promise.all([\n          getTeacherCourses(),\n          getCourseAssignments()\n        ]);\n        setCourses(coursesData.courses || mockCourses);\n        setAssignments(assignmentsData.assignments || mockAssignments);\n      } catch (error) {\n        console.warn('获取课程或作业数据失败，使用测试数据:', error);\n        setCourses(mockCourses);\n        setAssignments(mockAssignments);\n      }\n    } catch (error) {\n      setError(error?.response?.data?.error || '获取数据失败');\n      console.error('Error fetching data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSchoolChange = async (schoolId) => {\n    setSelectedSchool(schoolId);\n    setSelectedMajor('');\n    setSelectedClass('');\n    \n    if (schoolId) {\n      try {\n        const majorsData = await getMajors(schoolId);\n        setMajors(majorsData);\n      } catch (error) {\n        console.error('Error fetching majors:', error);\n      }\n    } else {\n      setMajors([]);\n    }\n  };\n\n  const handleMajorChange = async (majorId) => {\n    setSelectedMajor(majorId);\n    setSelectedClass('');\n    \n    if (majorId) {\n      try {\n        const classesData = await getClasses(majorId);\n        setClasses(classesData);\n      } catch (error) {\n        console.error('Error fetching classes:', error);\n      }\n    } else {\n      setClasses([]);\n    }\n  };\n\n  const handleBatchImport = async () => {\n    if (!importData.trim()) {\n      setError('请输入要导入的学生数据');\n      setSuccess('');\n      return;\n    }\n\n    if (!selectedSchool || !selectedMajor || !selectedClass) {\n      setError('请选择学校、专业和班级');\n      setSuccess('');\n      return;\n    }\n\n    // 解析CSV数据为学生对象数组\n    const lines = importData\n      .split(/\\r?\\n/)\n      .map(l => l.trim())\n      .filter(l => l && !/^\\s*#/.test(l));\n    const students = [];\n    for (const line of lines) {\n      const parts = line.split(',').map(s => s.trim());\n      if (parts.length < 3) continue; // 至少: 学号,姓名,密码\n      const [studentNo, name, password, email, phone] = parts;\n      students.push({\n        username: studentNo,\n        name,\n        password,\n        email: email || undefined,\n        phone: phone || undefined,\n        school_id: selectedSchool,\n        major_id: selectedMajor,\n        class_id: selectedClass,\n        role: 'student'\n      });\n    }\n\n    if (students.length === 0) {\n      setError('没有有效的学生数据行。请按 CSV: 学号,姓名,密码[,邮箱][,手机号]');\n      setSuccess('');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      const resp = await batchImportStudents({ students });\n      \n      const msg = resp?.message || `批量导入完成: 成功 ${resp?.success_count ?? students.length} 个, 失败 ${resp?.failed_count ?? 0} 个`;\n      setSuccess(msg);\n      if (resp?.errors && resp.errors.length > 0) {\n        const preview = resp.errors.slice(0, 5).join('；');\n        setError(`部分导入失败：${preview}${resp.errors.length > 5 ? ' 等' : ''}`);\n      }\n      \n      // 刷新用户列表\n      const usersData = await getUsers(1, 50, 'student');\n      setUsers(usersData.users);\n      setImportData('');\n    } catch (error) {\n      setError(error.response?.data?.error || '批量导入失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateProblem = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      if (isEditing && editingProblem) {\n        await updateProblem(editingProblem.id, problemForm);\n        setSuccess('题目更新成功！');\n      } else {\n        await createProblem(problemForm);\n        setSuccess('题目创建成功！');\n      }\n      \n      // 重置表单\n      setProblemForm({\n        title: '',\n        description: '',\n        test_cases: '',\n        expected_output: '',\n        difficulty: 'easy',\n        time_limit: 1000,\n        memory_limit: 128\n      });\n      \n      setIsEditing(false);\n      setEditingProblem(null);\n      \n      // 刷新题目列表\n      const problemsData = await getProblems(1, 50);\n      setProblems(problemsData.problems);\n      \n      // 切换到题目列表\n      setActiveSubTab('list');\n      \n    } catch (error) {\n      setError(error.response?.data?.error || (isEditing ? '更新题目失败' : '创建题目失败'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditProblem = (problem) => {\n    setEditingProblem(problem);\n    setProblemForm({\n      title: problem.title,\n      description: problem.description,\n      test_cases: problem.test_cases,\n      expected_output: problem.expected_output,\n      difficulty: problem.difficulty,\n      time_limit: problem.time_limit,\n      memory_limit: problem.memory_limit\n    });\n    setIsEditing(true);\n    setActiveSubTab('create');\n  };\n\n  const handleDeleteProblem = async (problemId) => {\n    if (!window.confirm('确定要删除这个题目吗？此操作不可恢复。')) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      await deleteProblem(problemId);\n      setSuccess('题目删除成功！');\n      \n      // 刷新题目列表\n      const problemsData = await getProblems(1, 50);\n      setProblems(problemsData.problems);\n    } catch (error) {\n      setError(error.response?.data?.error || '删除题目失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCancelEdit = () => {\n    setIsEditing(false);\n    setEditingProblem(null);\n    setProblemForm({\n      title: '',\n      description: '',\n      test_cases: '',\n      expected_output: '',\n      difficulty: 'easy',\n      time_limit: 1000,\n      memory_limit: 128\n    });\n    setActiveSubTab('list');\n  };\n\n  // 学生管理标签页渲染函数\n  const renderStudentsTab = () => (\n    <div className=\"tab-content\">\n      <div className=\"sub-tabs\">\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'list' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('list')}\n        >\n          学生列表\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'add' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('add')}\n        >\n          添加学生\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'import' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('import')}\n        >\n          批量导入\n        </button>\n      </div>\n\n      {activeSubTab === 'list' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>学生列表</h2>\n            <button \n              className=\"add-btn\"\n              onClick={() => setActiveSubTab('add')}\n            >\n              添加学生\n            </button>\n          </div>\n          \n          <div className=\"users-table\">\n            <table>\n              <thead>\n                <tr>\n                  <th>ID</th>\n                  <th>学号</th>\n                  <th>姓名</th>\n                  <th>邮箱</th>\n                  <th>班级</th>\n                  <th>状态</th>\n                  <th>操作</th>\n                </tr>\n              </thead>\n              <tbody>\n                {users.map(user => (\n                  <tr key={user.id}>\n                    <td>{user.id}</td>\n                    <td>{user.username}</td>\n                    <td>{user.name}</td>\n                    <td>{user.email || '-'}</td>\n                    <td>{user.class_id || '-'}</td>\n                    <td>\n                      <span className={`status-badge ${user.is_active ? 'active' : 'inactive'}`}>\n                        {user.is_active ? '活跃' : '禁用'}\n                      </span>\n                    </td>\n                    <td>\n                      <button className=\"action-btn edit\" onClick={() => handleEditStudentClick(user)}>编辑</button>\n                      <button className=\"action-btn delete\" onClick={() => handleDeleteStudent(user.id)}>删除</button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'add' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>➕ 添加学生</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => setActiveSubTab('list')}\n            >\n              ← 返回学生列表\n            </button>\n          </div>\n          \n          <div className=\"add-student-form\">\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>学号：<span className=\"required-mark\">*</span> <span className=\"required-text\">必填</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"请输入学号\"\n                  value={addStudentForm.student_no}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, student_no: e.target.value }))}\n                  required\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>密码：<span className=\"required-mark\">*</span> <span className=\"required-text\">必填</span></label>\n                <input \n                  type=\"password\" \n                  placeholder=\"请输入密码\"\n                  value={addStudentForm.password}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, password: e.target.value }))}\n                  required\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>姓名：<span className=\"required-mark\">*</span> <span className=\"required-text\">必填</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"请输入学生姓名\"\n                  value={addStudentForm.name}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, name: e.target.value }))}\n                  required\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>邮箱：</label>\n                <input \n                  type=\"email\" \n                  placeholder=\"请输入邮箱地址\"\n                  value={addStudentForm.email}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, email: e.target.value }))}\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>手机号：</label>\n                <input \n                  type=\"tel\" \n                  placeholder=\"请输入手机号码\"\n                  value={addStudentForm.phone}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, phone: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>学校：</label>\n                <select \n                  value={addStudentForm.school_id} \n                  onChange={(e) => handleAddStudentSchoolChange(e.target.value)}\n                >\n                  <option value=\"\">请选择学校</option>\n                  {schools.map(school => (\n                    <option key={school.id} value={school.id}>\n                      {school.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>专业：</label>\n                <select \n                  value={addStudentForm.major_id} \n                  onChange={(e) => handleAddStudentMajorChange(e.target.value)}\n                  disabled={!addStudentForm.school_id}\n                >\n                  <option value=\"\">请选择专业</option>\n                  {majors.map(major => (\n                    <option key={major.id} value={major.id}>\n                      {major.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div className=\"form-group\">\n                <label>班级：</label>\n                <select \n                  value={addStudentForm.class_id} \n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, class_id: e.target.value }))}\n                  disabled={!addStudentForm.major_id}\n                >\n                  <option value=\"\">请选择班级</option>\n                  {classes.map(classItem => (\n                    <option key={classItem.id} value={classItem.id}>\n                      {classItem.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleAddStudent}\n                disabled={loading || !addStudentForm.student_no || !addStudentForm.name || !addStudentForm.password}\n              >\n                {loading ? '添加中...' : '添加学生'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'import' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>📥 批量导入学生</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => setActiveSubTab('list')}\n            >\n              ← 返回学生列表\n            </button>\n          </div>\n          \n          <div className=\"import-form\">\n            <div className=\"form-group\">\n              <label>选择学校:</label>\n              <select \n                value={selectedSchool} \n                onChange={(e) => handleSchoolChange(e.target.value)}\n              >\n                <option value=\"\">请选择学校</option>\n                {schools.map(school => (\n                  <option key={school.id} value={school.id}>\n                    {school.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div className=\"form-group\">\n              <label>选择专业:</label>\n              <select \n                value={selectedMajor} \n                onChange={(e) => handleMajorChange(e.target.value)}\n                disabled={!selectedSchool}\n              >\n                <option value=\"\">请选择专业</option>\n                {majors.map(major => (\n                  <option key={major.id} value={major.id}>\n                    {major.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div className=\"form-group\">\n              <label>选择班级:</label>\n              <select \n                value={selectedClass} \n                onChange={(e) => setSelectedClass(e.target.value)}\n                disabled={!selectedMajor}\n              >\n                <option value=\"\">请选择班级</option>\n                {classes.map(classItem => (\n                  <option key={classItem.id} value={classItem.id}>\n                    {classItem.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div className=\"form-group\">\n              <label>学生数据 (CSV格式):</label>\n              <textarea\n                value={importData}\n                onChange={(e) => setImportData(e.target.value)}\n                placeholder=\"学号,姓名,密码,邮箱,手机号&#10;2021001,张三,123456,zhangsan@example.com,13800138001&#10;2021002,李四,123456,lisi@example.com,13800138002\"\n                rows={10}\n              />\n              <div className=\"form-help\">\n                <p>CSV格式说明：每行一个学生，字段用逗号分隔</p>\n                <p>必填字段：学号,姓名,密码</p>\n                <p>可选字段：邮箱,手机号</p>\n              </div>\n            </div>\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleBatchImport}\n                disabled={loading || !importData.trim() || !selectedSchool || !selectedMajor || !selectedClass}\n              >\n                {loading ? '导入中...' : '开始导入'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  // 题目管理标签页渲染函数\n  const renderProblemsTab = () => (\n    <div className=\"tab-content\">\n      <div className=\"sub-tabs\">\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'list' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('list')}\n        >\n          题目列表\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'create' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('create')}\n        >\n          {isEditing ? '编辑题目' : '创建题目'}\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'ai' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('ai')}\n        >\n          <WhaleIcon size={20} /> AI生题\n        </button>\n      </div>\n\n      {activeSubTab === 'list' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>题目列表</h2>\n            <button \n              className=\"add-btn\"\n              onClick={() => {\n                setIsEditing(false);\n                setEditingProblem(null);\n                setActiveSubTab('create');\n              }}\n            >\n              创建题目\n            </button>\n          </div>\n          \n          <div className=\"problems-table\">\n            <table>\n              <thead>\n                <tr>\n                  <th>ID</th>\n                  <th>标题</th>\n                  <th>难度</th>\n                  <th>时间限制</th>\n                  <th>内存限制</th>\n                  <th>状态</th>\n                  <th>操作</th>\n                </tr>\n              </thead>\n              <tbody>\n                {problems.map(problem => (\n                  <tr key={problem.id}>\n                    <td>{problem.id}</td>\n                    <td>{problem.title}</td>\n                    <td>\n                      <span className={`difficulty-badge ${problem.difficulty}`}>\n                        {problem.difficulty === 'easy' ? '简单' : \n                         problem.difficulty === 'medium' ? '中等' : '困难'}\n                      </span>\n                    </td>\n                    <td>{problem.time_limit}ms</td>\n                    <td>{problem.memory_limit}MB</td>\n                    <td>\n                      <span className={`status-badge ${problem.is_active ? 'active' : 'inactive'}`}>\n                        {problem.is_active ? '启用' : '禁用'}\n                      </span>\n                    </td>\n                    <td>\n                      <button \n                        className=\"action-btn edit\"\n                        onClick={() => handleEditProblem(problem)}\n                      >\n                        编辑\n                      </button>\n                      <button \n                        className=\"action-btn delete\"\n                        onClick={() => handleDeleteProblem(problem.id)}\n                      >\n                        删除\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'create' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>{isEditing ? '✏️ 编辑题目' : '➕ 创建题目'}</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={handleCancelEdit}\n            >\n              ← 返回题目列表\n            </button>\n          </div>\n          \n          <div className=\"problem-form\">\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>题目标题：</label>\n                <input \n                  type=\"text\" \n                  placeholder=\"请输入题目标题\"\n                  value={problemForm.title}\n                  onChange={(e) => setProblemForm(prev => ({ ...prev, title: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>难度等级：</label>\n                <select \n                  value={problemForm.difficulty}\n                  onChange={(e) => setProblemForm(prev => ({ ...prev, difficulty: e.target.value }))}\n                >\n                  <option value=\"easy\">简单</option>\n                  <option value=\"medium\">中等</option>\n                  <option value=\"hard\">困难</option>\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>时间限制 (ms)：</label>\n                <input \n                  type=\"number\" \n                  placeholder=\"1000\"\n                  value={problemForm.time_limit}\n                  onChange={(e) => setProblemForm(prev => ({ ...prev, time_limit: parseInt(e.target.value) }))}\n                  min=\"100\"\n                  max=\"10000\"\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>内存限制 (MB)：</label>\n                <input \n                  type=\"number\" \n                  placeholder=\"128\"\n                  value={problemForm.memory_limit}\n                  onChange={(e) => setProblemForm(prev => ({ ...prev, memory_limit: parseInt(e.target.value) }))}\n                  min=\"16\"\n                  max=\"1024\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-group\">\n              <label>题目描述：</label>\n              <textarea\n                placeholder=\"请输入题目的详细描述\"\n                value={problemForm.description}\n                onChange={(e) => setProblemForm(prev => ({ ...prev, description: e.target.value }))}\n                rows={6}\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label>测试用例：</label>\n              <textarea\n                placeholder=\"请输入测试用例\"\n                value={problemForm.test_cases}\n                onChange={(e) => setProblemForm(prev => ({ ...prev, test_cases: e.target.value }))}\n                rows={4}\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label>期望输出：</label>\n              <textarea\n                placeholder=\"请输入期望的输出结果\"\n                value={problemForm.expected_output}\n                onChange={(e) => setProblemForm(prev => ({ ...prev, expected_output: e.target.value }))}\n                rows={4}\n              />\n            </div>\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleCreateProblem}\n                disabled={loading || !problemForm.title || !problemForm.description || !problemForm.test_cases || !problemForm.expected_output}\n              >\n                {loading ? (isEditing ? '更新中...' : '创建中...') : (isEditing ? '更新题目' : '创建题目')}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'ai' && (\n        <div className=\"section-content\">\n          <AIProblemGenerationPage />\n        </div>\n      )}\n    </div>\n  );\n\n  // 课程管理标签页渲染函数\n  const renderCoursesTab = () => (\n    <div className=\"tab-content\">\n      <div className=\"sub-tabs\">\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'list' ? 'active' : ''}`}\n          onClick={() => {\n            setActiveSubTab('list');\n            // 如果当前在课程详情页，清除课程详情状态\n            if (activeSubTab === 'detail') {\n              setEditingCourse(null);\n            }\n            // 清除添加学生上下文\n            setAddingStudentContext('');\n          }}\n        >\n          课程列表\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'add' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('add')}\n        >\n          添加课程\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'detail' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('detail')}\n          style={{ display: (editingCourse && activeSubTab === 'detail') ? 'inline-block' : 'none' }}\n        >\n          课程详情\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'add-student-to-course' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('add-student-to-course')}\n          style={{ display: (editingCourse && activeSubTab === 'detail') ? 'inline-block' : 'none' }}\n        >\n          添加学生\n        </button>\n      </div>\n\n      {activeSubTab === 'list' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>我的课程</h2>\n            <button \n              className=\"add-btn\"\n              onClick={() => {\n                setActiveSubTab('add');\n                // 如果当前在课程详情页，清除课程详情状态\n                if (activeSubTab === 'detail') {\n                  setEditingCourse(null);\n                }\n                // 清除添加学生上下文\n                setAddingStudentContext('');\n              }}\n            >\n              添加课程\n            </button>\n          </div>\n          \n          <div className=\"courses-grid\">\n            {courses.length === 0 ? (\n              <div className=\"empty-state\">\n                <p>暂无课程，请添加您的第一个教学班</p>\n                <button \n                  className=\"submit-btn\"\n                  onClick={() => setActiveSubTab('add')}\n                >\n                  添加课程\n                </button>\n              </div>\n            ) : (\n              courses.map(course => (\n                <div key={course.id} className=\"course-card\">\n                  <div className=\"course-header\">\n                    <h3>{course.name}</h3>\n                    <span className=\"course-status active\">进行中</span>\n                  </div>\n                  <div className=\"course-info\">\n                    <p><strong>教学班：</strong>{course.class_name}</p>\n                    <p><strong>专业：</strong>{course.major_name}</p>\n                    <p><strong>学校：</strong>{course.school_name}</p>\n                    <p><strong>学生数量：</strong>{course.student_count || 0}人</p>\n                    <p><strong>创建时间：</strong>{formatDate(course.created_at)}</p>\n                  </div>\n                  <div className=\"course-actions\">\n                    <button \n                      className=\"action-btn primary\"\n                      onClick={() => handleViewCourseDetail(course.id)}\n                    >\n                      查看详情\n                    </button>\n                    <button \n                      className=\"action-btn edit\"\n                      onClick={() => handleEditCourse(course)}\n                    >\n                      编辑\n                    </button>\n                    <button \n                      className=\"action-btn delete\"\n                      onClick={() => handleDeleteCourse(course.id)}\n                    >\n                      删除\n                    </button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'add' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>{isEditingCourse ? '✏️ 编辑课程' : '➕ 添加课程'}</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => {\n                setActiveSubTab('list');\n                setIsEditingCourse(false);\n                setEditingCourse(null);\n                setCourseForm({\n                  name: '',\n                  description: '',\n                  class_id: '',\n                  major_id: '',\n                  school_id: ''\n                });\n              }}\n            >\n              ← 返回课程列表\n            </button>\n          </div>\n          \n          <div className=\"course-form\">\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>课程名称：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"请输入课程名称\"\n                  value={courseForm.name}\n                  onChange={(e) => setCourseForm(prev => ({ ...prev, name: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>课程描述：</label>\n                <textarea\n                  placeholder=\"请输入课程描述\"\n                  value={courseForm.description}\n                  onChange={(e) => setCourseForm(prev => ({ ...prev, description: e.target.value }))}\n                  rows={3}\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>学校：<span className=\"required-mark\">*</span></label>\n                <select \n                  value={courseForm.school_id} \n                  onChange={(e) => handleCourseSchoolChange(e.target.value)}\n                >\n                  <option value=\"\">请选择学校</option>\n                  {schools.map(school => (\n                    <option key={school.id} value={school.id}>\n                      {school.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div className=\"form-group\">\n                <label>专业：<span className=\"required-mark\">*</span></label>\n                <select \n                  value={courseForm.major_id} \n                  onChange={(e) => handleCourseMajorChange(e.target.value)}\n                  disabled={!courseForm.school_id}\n                >\n                  <option value=\"\">请选择专业</option>\n                  {majors.map(major => (\n                    <option key={major.id} value={major.id}>\n                      {major.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>教学班：<span className=\"required-mark\">*</span></label>\n                <select \n                  value={courseForm.class_id} \n                  onChange={(e) => setCourseForm(prev => ({ ...prev, class_id: e.target.value }))}\n                  disabled={!courseForm.major_id}\n                >\n                  <option value=\"\">请选择教学班</option>\n                  {classes.map(classItem => (\n                    <option key={classItem.id} value={classItem.id}>\n                      {classItem.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            \n                            <div className=\"form-actions\">\n                  <button \n                    className=\"submit-btn\"\n                    onClick={handleCreateCourse}\n                    disabled={loading || !courseForm.name || !courseForm.school_id || !courseForm.major_id || !courseForm.class_id}\n                  >\n                    {loading ? (isEditingCourse ? '更新中...' : '创建中...') : (isEditingCourse ? '更新课程' : '创建课程')}\n                  </button>\n                </div>\n          </div>\n        </div>\n      )}\n\n\n\n      {activeSubTab === 'create-assignment' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>{isEditingAssignment ? '✏️ 编辑作业' : '📝 布置作业'}</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => {\n                // 根据上下文智能返回\n                if (editingAssignmentContext === 'course-detail') {\n                  setActiveSubTab('detail');\n                } else {\n                  setActiveSubTab('list');\n                }\n                setIsEditingAssignment(false);\n                setEditingAssignment(null);\n                setEditingAssignmentContext('');\n                setAssignmentForm({\n                  name: '',\n                  description: '',\n                  requirements: '',\n                  due_date: '',\n                  course_id: '',\n                  problem_ids: []\n                });\n              }}\n            >\n              {editingAssignmentContext === 'course-detail' ? '← 返回课程详情' : '← 返回课程列表'}\n            </button>\n          </div>\n          \n          <div className=\"assignment-form\">\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>作业名称：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"请输入作业名称\"\n                  value={assignmentForm.name}\n                  onChange={(e) => setAssignmentForm(prev => ({ ...prev, name: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>课程：</label>\n                {editingAssignmentContext === 'course-detail' && editingCourse ? (\n                  <input \n                    type=\"text\" \n                    value={editingCourse.name}\n                    disabled\n                    className=\"disabled-input\"\n                  />\n                ) : (\n                  <>\n                    <span className=\"required-mark\">*</span>\n                    <select \n                      value={assignmentForm.course_id} \n                      onChange={(e) => setAssignmentForm(prev => ({ ...prev, course_id: e.target.value }))}\n                    >\n                      <option value=\"\">请选择课程</option>\n                      {courses.map(course => (\n                        <option key={course.id} value={course.id}>\n                          {course.name} - {course.class_name}\n                        </option>\n                      ))}\n                    </select>\n                  </>\n                )}\n              </div>\n            </div>\n            \n            <div className=\"form-group\">\n              <label>作业描述：<span className=\"required-mark\">*</span></label>\n              <textarea\n                placeholder=\"请输入作业描述\"\n                value={assignmentForm.description}\n                onChange={(e) => setAssignmentForm(prev => ({ ...prev, description: e.target.value }))}\n                rows={4}\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label>作业要求：<span className=\"required-mark\">*</span></label>\n              <textarea\n                placeholder=\"请输入作业要求\"\n                value={assignmentForm.requirements}\n                onChange={(e) => setAssignmentForm(prev => ({ ...prev, requirements: e.target.value }))}\n                rows={4}\n              />\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>截止时间：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"datetime-local\" \n                  value={assignmentForm.due_date}\n                  onChange={(e) => setAssignmentForm(prev => ({ ...prev, due_date: e.target.value }))}\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-group\">\n              <label>选择题目：</label>\n              <div className=\"problem-selection\">\n                {problems.map(problem => (\n                  <label key={problem.id} className=\"problem-checkbox\">\n                    <input \n                      type=\"checkbox\" \n                      value={problem.id}\n                      checked={assignmentForm.problem_ids.includes(problem.id)}\n                      onChange={(e) => {\n                        if (e.target.checked) {\n                          setAssignmentForm(prev => ({ \n                            ...prev, \n                            problem_ids: [...prev.problem_ids, problem.id] \n                          }));\n                        } else {\n                          setAssignmentForm(prev => ({ \n                            ...prev, \n                            problem_ids: prev.problem_ids.filter(id => id !== problem.id) \n                          }));\n                        }\n                      }}\n                    />\n                    <span className=\"problem-title\">{problem.title}</span>\n                    <span className={`difficulty-badge ${problem.difficulty}`}>\n                      {problem.difficulty === 'easy' ? '简单' : \n                       problem.difficulty === 'medium' ? '中等' : '困难'}\n                    </span>\n                  </label>\n                ))}\n              </div>\n            </div>\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleCreateAssignment}\n                disabled={loading || !assignmentForm.name || !assignmentForm.description || !assignmentForm.requirements || !assignmentForm.due_date || !assignmentForm.course_id}\n              >\n                {loading ? (isEditingAssignment ? '更新中...' : '创建中...') : (isEditingAssignment ? '更新作业' : '布置作业')}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'detail' && editingCourse && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>📚 课程详情：{editingCourse.name}</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => {\n                setActiveSubTab('list');\n                setEditingCourse(null);\n              }}\n            >\n              ← 返回课程列表\n            </button>\n          </div>\n          \n          <div className=\"course-detail\">\n            <div className=\"course-info-section\">\n              <h3>课程基本信息</h3>\n              <div className=\"info-grid\">\n                <div className=\"info-item\">\n                  <label>课程名称：</label>\n                  <span>{editingCourse.name}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>课程描述：</label>\n                  <span>{editingCourse.description}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>教学班：</label>\n                  <span>{editingCourse.class_name}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>专业：</label>\n                  <span>{editingCourse.major_name}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>学校：</label>\n                  <span>{editingCourse.school_name}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>学生数量：</label>\n                  <span>{editingCourse.student_count || 0}人</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>创建时间：</label>\n                  <span>{formatDate(editingCourse.created_at)}</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"course-students-section\">\n              <div className=\"section-header\">\n                <h3>教学班学生</h3>\n                <button \n                  className=\"add-btn\"\n                  onClick={() => {\n                    // 设置添加学生上下文为课程详情页\n                    setAddingStudentContext('course-detail');\n                    setActiveSubTab('add-student-to-course');\n                  }}\n                >\n                  添加学生\n                </button>\n              </div>\n              <div className=\"students-table\">\n                <table>\n                  <thead>\n                    <tr>\n                      <th>学号</th>\n                      <th>姓名</th>\n                      <th>邮箱</th>\n                      <th>状态</th>\n                      <th>操作</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {(() => {\n                      // 获取当前课程的所有学生\n                      const courseStudents = [];\n                      \n                      // 1. 添加原本属于该教学班的学生\n                      const originalStudents = users.filter(user => \n                        user.class_id === editingCourse.class_id && user.role === 'student'\n                      );\n                      courseStudents.push(...originalStudents);\n                      \n                      // 2. 添加通过关联关系添加的学生\n                      const relatedStudents = studentClassRelations\n                        .filter(relation => relation.course_id === editingCourse.id)\n                        .map(relation => {\n                          // 查找学生的完整信息\n                          const studentInfo = users.find(user => user.id === relation.student_id);\n                          return {\n                            ...studentInfo,\n                            // 使用关联关系中的信息作为后备\n                            name: studentInfo ? studentInfo.name : relation.student_name,\n                            username: studentInfo ? studentInfo.username : relation.student_no,\n                            // 标记这是通过关联关系添加的学生\n                            isRelatedStudent: true,\n                            relationId: relation.student_id + '_' + relation.class_id\n                          };\n                        });\n                      \n                      // 合并学生列表，去重\n                      const allStudents = [...originalStudents, ...relatedStudents];\n                      const uniqueStudents = allStudents.filter((student, index, self) => \n                        index === self.findIndex(s => s.id === student.id)\n                      );\n                      \n                      return uniqueStudents.map(student => (\n                        <tr key={student.relationId || student.id}>\n                          <td>{student.username}</td>\n                          <td>{student.name}</td>\n                          <td>{student.email || '-'}</td>\n                          <td>\n                            <span className={`status-badge ${student.is_active ? 'active' : 'inactive'}`}>\n                              {student.is_active ? '活跃' : '禁用'}\n                            </span>\n                          </td>\n                          <td>\n                            <button \n                              className=\"action-btn edit\"\n                              onClick={() => handleEditStudentClick(student)}\n                            >\n                              编辑\n                            </button>\n                            {student.isRelatedStudent && (\n                              <button \n                                className=\"action-btn delete\"\n                                onClick={() => handleRemoveStudentFromCourse(student.relationId)}\n                              >\n                                移除\n                              </button>\n                            )}\n                          </td>\n                        </tr>\n                      ));\n                    })()}\n                  </tbody>\n                </table>\n                {(() => {\n                  // 获取当前课程的所有学生数量\n                  const originalStudents = users.filter(user => \n                    user.class_id === editingCourse.class_id && user.role === 'student'\n                  );\n                  const relatedStudents = studentClassRelations.filter(relation => \n                    relation.course_id === editingCourse.id\n                  );\n                  const totalStudents = originalStudents.length + relatedStudents.length;\n                  \n                  if (totalStudents === 0) {\n                    return (\n                      <div className=\"empty-state\">\n                        <p>该教学班暂无学生</p>\n                      </div>\n                    );\n                  }\n                  return null;\n                })()}\n              </div>\n            </div>\n\n            <div className=\"course-assignments-section\">\n              <div className=\"section-header\">\n                <h3>已布置作业</h3>\n                <button \n                  className=\"add-btn\"\n                  onClick={() => {\n                    // 自动设置当前课程ID到作业表单\n                    setAssignmentForm(prev => ({\n                      ...prev,\n                      course_id: editingCourse.id\n                    }));\n                    // 设置编辑作业上下文为课程详情页\n                    setEditingAssignmentContext('course-detail');\n                    setActiveSubTab('create-assignment');\n                  }}\n                >\n                  布置作业\n                </button>\n              </div>\n              <div className=\"assignments-table\">\n                <table>\n                  <thead>\n                    <tr>\n                      <th>作业名称</th>\n                      <th>描述</th>\n                      <th>截止时间</th>\n                      <th>状态</th>\n                      <th>操作</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {assignments.filter(assignment => assignment.course_id === editingCourse.id).map(assignment => (\n                      <tr key={assignment.id}>\n                        <td>{assignment.name}</td>\n                        <td>{assignment.description}</td>\n                        <td>{formatDate(assignment.due_date)}</td>\n                        <td>\n                          <span className={`status-badge ${assignment.is_active ? 'active' : 'inactive'}`}>\n                            {assignment.is_active ? '进行中' : '已结束'}\n                          </span>\n                        </td>\n                        <td>\n                          <button \n                            className=\"action-btn edit\"\n                            onClick={() => handleEditAssignment(assignment)}\n                          >\n                            编辑\n                          </button>\n                          <button \n                            className=\"action-btn delete\"\n                            onClick={() => handleDeleteAssignment(assignment.id)}\n                          >\n                            删除\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n                {assignments.filter(assignment => assignment.course_id === editingCourse.id).length === 0 && (\n                  <div className=\"empty-state\">\n                    <p>该课程暂无作业</p>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* 作业创建表单 */}\n            {activeSubTab === 'create-assignment' && (\n              <div className=\"course-assignment-form\">\n                <div className=\"section-header\">\n                  <h3>📝 布置作业</h3>\n                  <button \n                    className=\"secondary-btn\"\n                    onClick={() => setActiveSubTab('detail')}\n                  >\n                    ← 返回课程详情\n                  </button>\n                </div>\n                \n                <div className=\"assignment-form\">\n                  <div className=\"form-row\">\n                    <div className=\"form-group\">\n                      <label>作业名称：<span className=\"required-mark\">*</span></label>\n                      <input \n                        type=\"text\" \n                        placeholder=\"请输入作业名称\"\n                        value={assignmentForm.name}\n                        onChange={(e) => setAssignmentForm(prev => ({ ...prev, name: e.target.value }))}\n                      />\n                    </div>\n                    \n                    <div className=\"form-group\">\n                      <label>课程：</label>\n                      <input \n                        type=\"text\" \n                        value={editingCourse.name}\n                        disabled\n                        className=\"disabled-input\"\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"form-group\">\n                    <label>作业描述：<span className=\"required-mark\">*</span></label>\n                    <textarea\n                      placeholder=\"请输入作业描述\"\n                      value={assignmentForm.description}\n                      onChange={(e) => setAssignmentForm(prev => ({ ...prev, description: e.target.value }))}\n                      rows={4}\n                    />\n                  </div>\n                  \n                  <div className=\"form-group\">\n                    <label>作业要求：<span className=\"required-mark\">*</span></label>\n                    <textarea\n                      placeholder=\"请输入作业要求\"\n                      value={assignmentForm.requirements}\n                      onChange={(e) => setAssignmentForm(prev => ({ ...prev, requirements: e.target.value }))}\n                      rows={4}\n                    />\n                  </div>\n                  \n                  <div className=\"form-row\">\n                    <div className=\"form-group\">\n                      <label>截止时间：<span className=\"required-mark\">*</span></label>\n                      <input \n                        type=\"datetime-local\" \n                        value={assignmentForm.due_date}\n                        onChange={(e) => setAssignmentForm(prev => ({ ...prev, due_date: e.target.value }))}\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"form-group\">\n                    <label>选择题目：</label>\n                    <div className=\"problem-selection\">\n                      {problems.map(problem => (\n                        <label key={problem.id} className=\"problem-checkbox\">\n                          <input \n                            type=\"checkbox\" \n                            value={problem.id}\n                            checked={assignmentForm.problem_ids.includes(problem.id)}\n                            onChange={(e) => {\n                              if (e.target.checked) {\n                                setAssignmentForm(prev => ({ \n                                  ...prev, \n                                  problem_ids: [...prev.problem_ids, problem.id] \n                                }));\n                              } else {\n                                setAssignmentForm(prev => ({ \n                                  ...prev, \n                                  problem_ids: prev.problem_ids.filter(id => id !== problem.id) \n                                }));\n                              }\n                            }}\n                          />\n                          <span className=\"problem-title\">{problem.title}</span>\n                          <span className={`difficulty-badge ${problem.difficulty}`}>\n                            {problem.difficulty === 'easy' ? '简单' : \n                             problem.difficulty === 'medium' ? '中等' : '困难'}\n                          </span>\n                        </label>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  <div className=\"form-actions\">\n                    <button \n                      className=\"submit-btn\"\n                      onClick={handleCreateAssignment}\n                      disabled={loading || !assignmentForm.name || !assignmentForm.description || !assignmentForm.requirements || !assignmentForm.due_date || !assignmentForm.course_id}\n                    >\n                      {loading ? '创建中...' : '布置作业'}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n\n\n\n          </div>\n        </div>\n      )}\n\n      {/* 添加学生到课程的表单 */}\n      {activeSubTab === 'add-student-to-course' && editingCourse && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h3>👥 添加学生到课程：{editingCourse.name}</h3>\n            <p className=\"form-description\">请输入已注册学生的学号和姓名，将其添加到当前教学班</p>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => setActiveSubTab('detail')}\n            >\n              ← 返回课程详情\n            </button>\n          </div>\n          \n          <div className=\"add-student-form\">\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>学号：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"请输入学号\"\n                  value={addStudentForm.student_no}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, student_no: e.target.value }))}\n                  required\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>姓名：<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"请输入学生姓名\"\n                  value={addStudentForm.name}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, name: e.target.value }))}\n                  required\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>教学班：</label>\n                <input \n                  type=\"text\" \n                  value={editingCourse.class_name}\n                  disabled\n                  className=\"disabled-input\"\n                />\n              </div>\n            </div>\n            \n\n            \n\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleAddStudentToCourse}\n                disabled={loading || !addStudentForm.student_no || !addStudentForm.name}\n              >\n                {loading ? '添加中...' : '添加学生'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  // 处理添加学生时的学校选择变化\n  const handleAddStudentSchoolChange = async (schoolId) => {\n    setAddStudentForm(prev => ({ \n      ...prev, \n      school_id: schoolId,\n      major_id: '',\n      class_id: ''\n    }));\n    \n    if (schoolId) {\n      try {\n        const majorsData = await getMajors(schoolId);\n        setMajors(majorsData);\n      } catch (error) {\n        console.error('Error fetching majors:', error);\n      }\n    } else {\n      setMajors([]);\n    }\n  };\n\n  // 处理添加学生时的专业选择变化\n  const handleAddStudentMajorChange = async (majorId) => {\n    setAddStudentForm(prev => ({ \n      ...prev, \n      major_id: majorId,\n      class_id: ''\n    }));\n    \n    if (majorId) {\n      try {\n        const classesData = await getClasses(majorId);\n        setClasses(classesData);\n      } catch (error) {\n        console.error('Error fetching classes:', error);\n      }\n    } else {\n      setClasses([]);\n    }\n  };\n\n  // 处理添加学生\n  const handleAddStudent = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      await registerStudent(addStudentForm);\n      \n      setSuccess('学生添加成功！');\n      \n      // 重置表单\n      setAddStudentForm({\n        student_no: '',\n        name: '',\n        password: '',\n        email: '',\n        phone: '',\n        school_id: '',\n        major_id: '',\n        class_id: ''\n      });\n      \n      // 刷新用户列表\n      const usersData = await getUsers(1, 50, 'student');\n      setUsers(usersData.users);\n      \n      // 切换到学生列表\n      setActiveSubTab('list');\n      \n    } catch (error) {\n      setError(error.response?.data?.error || '添加学生失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 处理向课程添加学生\n  const handleAddStudentToCourse = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      // 查找学生是否已存在\n      const existingStudent = users.find(user => \n        user.username === addStudentForm.student_no && \n        user.name === addStudentForm.name &&\n        user.role === 'student'\n      );\n      \n      if (!existingStudent) {\n        setError('未找到该学生，请确认学号和姓名是否正确');\n        return;\n      }\n      \n      // 检查学生是否已经在该教学班中\n      // 由于一个学生可以属于多个教学班，我们需要检查学生是否已经在该课程的教学班中\n      const isAlreadyInClass = users.some(user => \n        user.id === existingStudent.id && \n        user.class_id === editingCourse.class_id\n      );\n      \n      if (isAlreadyInClass) {\n        setError('该学生已经在该教学班中');\n        return;\n      }\n      \n      // 检查学生是否已经通过关联关系添加到该课程\n      const isAlreadyRelated = studentClassRelations.some(relation => \n        relation.student_id === existingStudent.id && \n        relation.course_id === editingCourse.id\n      );\n      \n      if (isAlreadyRelated) {\n        setError('该学生已经在该课程中');\n        return;\n      }\n      \n      // 添加学生到教学班的关联关系\n      const newRelation = {\n        student_id: existingStudent.id,\n        class_id: editingCourse.class_id,\n        course_id: editingCourse.id,\n        student_name: existingStudent.name,\n        student_no: existingStudent.username,\n        added_at: new Date().toISOString()\n      };\n      \n      setStudentClassRelations(prev => [...prev, newRelation]);\n      setSuccess('学生已成功添加到课程！');\n      \n      // 重置表单\n      setAddStudentForm({\n        student_no: '',\n        name: '',\n        password: '',\n        email: '',\n        phone: '',\n        school_id: '',\n        major_id: '',\n        class_id: ''\n      });\n      \n      // 返回到课程详情页\n      setActiveSubTab('detail');\n      \n    } catch (error) {\n      setError(error.response?.data?.error || '添加学生失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 处理从课程中移除学生\n  const handleRemoveStudentFromCourse = (relationId) => {\n    if (!window.confirm('确定要从该课程中移除该学生吗？')) return;\n    \n    try {\n      // 从关联关系中移除\n      setStudentClassRelations(prev => \n        prev.filter(relation => \n          relation.student_id + '_' + relation.class_id !== relationId\n        )\n      );\n      \n      setSuccess('学生已从课程中移除');\n    } catch (error) {\n      setError('移除学生失败');\n    }\n  };\n\n  // 学生编辑/删除相关\n  const handleEditStudentClick = (user) => {\n    setEditingUser(user);\n    setEditForm({\n      email: user.email || '',\n      phone: user.phone || '',\n      school_id: user.school_id || '',\n      major_id: user.major_id || '',\n      class_id: user.class_id || '',\n      new_password: ''\n    });\n    setError('');\n    setSuccess('');\n  };\n\n  const handleSaveStudent = async () => {\n    if (!editingUser) return;\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      await updateUser(editingUser.id, editForm);\n      setSuccess('学生信息已更新');\n      // 刷新列表\n      const usersData = await getUsers(1, 50, 'student');\n      setUsers(usersData.users);\n      setEditingUser(null);\n    } catch (error) {\n      setError(error.response?.data?.error || '更新学生信息失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCancelEditStudent = () => {\n    setEditingUser(null);\n    setEditForm({ email: '', phone: '', school_id: '', major_id: '', class_id: '', new_password: '' });\n  };\n\n  const handleDeleteStudent = async (userId) => {\n    if (!window.confirm('确定要删除该学生吗？此操作不可恢复。')) return;\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      await deleteUser(userId);\n      setSuccess('学生已删除');\n      const usersData = await getUsers(1, 50, 'student');\n      setUsers(usersData.users);\n    } catch (error) {\n      setError(error.response?.data?.error || '删除学生失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 课程相关处理函数\n  const handleCourseSchoolChange = async (schoolId) => {\n    setCourseForm(prev => ({ \n      ...prev, \n      school_id: schoolId,\n      major_id: '',\n      class_id: ''\n    }));\n    \n    if (schoolId) {\n      try {\n        const majorsData = await getMajors(schoolId);\n        setMajors(majorsData);\n      } catch (error) {\n        console.error('Error fetching majors:', error);\n      }\n    } else {\n      setMajors([]);\n    }\n  };\n\n  const handleCourseMajorChange = async (majorId) => {\n    setCourseForm(prev => ({ \n      ...prev, \n      major_id: majorId,\n      class_id: ''\n    }));\n    \n    if (majorId) {\n      try {\n        const classesData = await getClasses(majorId);\n        setClasses(classesData);\n      } catch (error) {\n        console.error('Error fetching classes:', error);\n      }\n    } else {\n      setClasses([]);\n    }\n  };\n\n  const handleCreateCourse = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      if (isEditingCourse && editingCourse) {\n        await updateCourse(editingCourse.id, courseForm);\n        setSuccess('课程更新成功！');\n      } else {\n        await createCourse(courseForm);\n        setSuccess('课程创建成功！');\n      }\n      \n      // 重置表单\n      setCourseForm({\n        name: '',\n        description: '',\n        class_id: '',\n        major_id: '',\n        school_id: ''\n      });\n      \n      setIsEditingCourse(false);\n      setEditingCourse(null);\n      \n      // 刷新课程列表\n      const coursesData = await getTeacherCourses();\n      setCourses(coursesData.courses || []);\n      \n      // 切换到课程列表\n      setActiveSubTab('list');\n      \n    } catch (error) {\n      setError(error.response?.data?.error || (isEditingCourse ? '更新课程失败' : '创建课程失败'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditCourse = (course) => {\n    setEditingCourse(course);\n    setCourseForm({\n      name: course.name,\n      description: course.description || '',\n      school_id: course.school_id || '',\n      major_id: course.major_id || '',\n      class_id: course.class_id || ''\n    });\n    setIsEditingCourse(true);\n    setActiveSubTab('add');\n  };\n\n  const handleDeleteCourse = async (courseId) => {\n    if (!window.confirm('确定要删除该课程吗？此操作不可恢复。')) return;\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      await deleteCourse(courseId);\n      setSuccess('课程已删除');\n      \n      // 刷新课程列表\n      const coursesData = await getTeacherCourses();\n      setCourses(coursesData.courses || []);\n      \n    } catch (error) {\n      setError(error.response?.data?.error || '删除课程失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleViewCourseDetail = (courseId) => {\n    const course = courses.find(c => c.id === courseId);\n    if (course) {\n      setActiveTab('courses');\n      setActiveSubTab('detail');\n      setEditingCourse(course);\n    }\n  };\n\n  // 作业相关处理函数\n  const handleCreateAssignment = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      // 如果在课程详情页面创建作业，自动设置课程ID\n      const assignmentData = { ...assignmentForm };\n      if (activeSubTab === 'create-assignment' && editingCourse) {\n        assignmentData.course_id = editingCourse.id;\n      }\n      \n      if (isEditingAssignment && editingAssignment) {\n        await updateAssignment(editingAssignment.id, assignmentData);\n        setSuccess('作业更新成功！');\n      } else {\n        await createAssignment(assignmentData);\n        setSuccess('作业布置成功！');\n      }\n      \n      // 重置表单\n      setAssignmentForm({\n        name: '',\n        description: '',\n        requirements: '',\n        due_date: '',\n        course_id: '',\n        problem_ids: []\n      });\n      \n      setIsEditingAssignment(false);\n      setEditingAssignment(null);\n      \n      // 刷新作业列表\n      const assignmentsData = await getCourseAssignments();\n      setAssignments(assignmentsData.assignments || []);\n      \n      // 如果在课程详情页面，返回到课程详情；否则返回到课程列表\n      if (activeSubTab === 'create-assignment') {\n        setActiveSubTab('detail');\n      } else {\n        setActiveSubTab('list');\n      }\n      \n    } catch (error) {\n      setError(error.response?.data?.error || (isEditingAssignment ? '更新作业失败' : '布置作业失败'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditAssignment = (assignment) => {\n    setEditingAssignment(assignment);\n    setAssignmentForm({\n      name: assignment.name,\n      description: assignment.description || '',\n      requirements: assignment.requirements || '',\n      due_date: assignment.due_date || '',\n      course_id: assignment.course_id || '',\n      problem_ids: assignment.problem_ids || []\n    });\n    setIsEditingAssignment(true);\n    \n    // 记录编辑作业时的上下文\n    if (activeSubTab === 'detail' && editingCourse) {\n      setEditingAssignmentContext('course-detail');\n    } else {\n      setEditingAssignmentContext('course-list');\n    }\n    \n    // 切换到作业创建模式\n    setActiveSubTab('create-assignment');\n  };\n\n  const handleDeleteAssignment = async (assignmentId) => {\n    if (!window.confirm('确定要删除该作业吗？此操作不可恢复。')) return;\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      await deleteAssignment(assignmentId);\n      setSuccess('作业已删除');\n      \n      // 刷新作业列表\n      const assignmentsData = await getCourseAssignments();\n      setAssignments(assignmentsData.assignments || []);\n      \n    } catch (error) {\n      setError(error.response?.data?.error || '删除作业失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"teacher-dashboard\">\n      <div className=\"dashboard-header\">\n        <h1>教师管理控制台</h1>\n      </div>\n      \n      <div className=\"dashboard-tabs\">\n        <button \n          className={`tab-btn ${activeTab === 'students' ? 'active' : ''}`}\n          onClick={() => {\n            setActiveTab('students');\n            setActiveSubTab('list');\n            // 清除课程相关状态\n            setEditingCourse(null);\n            setEditingAssignmentContext('');\n            setAddingStudentContext('');\n          }}\n        >\n          学生管理\n        </button>\n        <button \n          className={`tab-btn ${activeTab === 'problems' ? 'active' : ''}`}\n          onClick={() => {\n            setActiveTab('problems');\n            setActiveSubTab('list');\n            // 清除课程相关状态\n            setEditingCourse(null);\n            setEditingAssignmentContext('');\n            setAddingStudentContext('');\n          }}\n        >\n          题目管理\n        </button>\n        <button \n          className={`tab-btn ${activeTab === 'courses' ? 'active' : ''}`}\n          onClick={() => {\n            setActiveTab('courses');\n            setActiveSubTab('list');\n            // 清除课程详情状态，但保留课程列表\n            setEditingCourse(null);\n            setEditingAssignmentContext('');\n            setAddingStudentContext('');\n          }}\n        >\n          我的课程\n        </button>\n      </div>\n      \n      {error && <div className=\"error-message\">{error}</div>}\n      {success && <div className=\"success-message\">{success}</div>}\n      \n      {activeTab === 'students' && renderStudentsTab()}\n      {activeTab === 'problems' && renderProblemsTab()}\n      {activeTab === 'courses' && renderCoursesTab()}\n      \n      {/* 编辑学生表单 - 全局显示 */}\n      {editingUser && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal\">\n            <div className=\"modal-header\">\n              <h3>编辑学生：{editingUser.name}（学号{editingUser.username}）</h3>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>邮箱：</label>\n                  <input type=\"email\" value={editForm.email} onChange={(e) => setEditForm(prev => ({ ...prev, email: e.target.value }))} />\n                </div>\n                <div className=\"form-group\">\n                  <label>手机号：</label>\n                  <input type=\"tel\" value={editForm.phone} onChange={(e) => setEditForm(prev => ({ ...prev, phone: e.target.value }))} />\n                </div>\n              </div>\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>学校：</label>\n                  <select value={editForm.school_id} onChange={async (e) => {\n                    const val = e.target.value;\n                    setEditForm(prev => ({ ...prev, school_id: val, major_id: '', class_id: '' }));\n                    if (val) {\n                      const majorsData = await getMajors(val);\n                      setMajors(majorsData);\n                    } else {\n                      setMajors([]);\n                      setClasses([]);\n                    }\n                  }}>\n                    <option value=\"\">请选择学校</option>\n                    {schools.map(s => <option key={s.id} value={s.id}>{s.name}</option>)}\n                  </select>\n                </div>\n                <div className=\"form-group\">\n                  <label>专业：</label>\n                  <select value={editForm.major_id} onChange={async (e) => {\n                    const val = e.target.value;\n                    setEditForm(prev => ({ ...prev, major_id: val, class_id: '' }));\n                    if (val) {\n                      const classesData = await getClasses(val);\n                      setClasses(classesData);\n                    } else {\n                      setClasses([]);\n                    }\n                  }} disabled={!editForm.school_id}>\n                    <option value=\"\">请选择专业</option>\n                    {majors.map(m => <option key={m.id} value={m.id}>{m.name}</option>)}\n                  </select>\n                </div>\n              </div>\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>班级：</label>\n                  <select value={editForm.class_id} onChange={(e) => setEditForm(prev => ({ ...prev, class_id: e.target.value }))} disabled={!editForm.major_id}>\n                    <option value=\"\">请选择班级</option>\n                    {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n                  </select>\n                </div>\n                <div className=\"form-group\">\n                  <label>重置密码（可选）：</label>\n                  <input type=\"password\" value={editForm.new_password} onChange={(e) => setEditForm(prev => ({ ...prev, new_password: e.target.value }))} />\n                </div>\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button className=\"secondary-btn\" onClick={handleCancelEditStudent}>取消</button>\n              <button className=\"submit-btn\" onClick={handleSaveStudent} disabled={loading}>{loading ? '保存中...' : '保存'}</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TeacherDashboardPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}