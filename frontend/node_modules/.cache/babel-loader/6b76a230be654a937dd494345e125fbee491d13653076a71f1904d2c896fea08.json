{"ast":null,"code":"import _objectSpread from\"/Volumes/\\u575E\\u57CE/Judger_1/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{getUsers,getSchools,getMajors,getClasses,batchImportStudents,getProblems,createProblem,updateProblem,deleteProblem,updateUser,deleteUser,registerStudent,getTeacherCourses,createCourse,updateCourse,deleteCourse,getCourseAssignments,createAssignment,updateAssignment,deleteAssignment,getCourseStudents,addStudentToCourse,removeStudentFromCourse}from'../services/api';import'./TeacherDashboardPage.css';import AIProblemGenerationPage from'./AIProblemGenerationPage';import{mockCourses,mockAssignments,formatDate}from'../testData/courses';import WhaleIcon from'../components/WhaleIcon';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TeacherDashboardPage=()=>{const[activeTab,setActiveTab]=useState('students');const[activeSubTab,setActiveSubTab]=useState('list');// å­æ ‡ç­¾é¡µ\nconst[users,setUsers]=useState([]);const[problems,setProblems]=useState([]);const[schools,setSchools]=useState([]);const[majors,setMajors]=useState([]);const[classes,setClasses]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');// æ‰¹é‡å¯¼å…¥ç›¸å…³çŠ¶æ€\nconst[importData,setImportData]=useState('');const[selectedSchool,setSelectedSchool]=useState('');const[selectedMajor,setSelectedMajor]=useState('');const[selectedClass,setSelectedClass]=useState('');// æ‰‹åŠ¨åˆ›å»ºé¢˜ç›®ç›¸å…³çŠ¶æ€\nconst[problemForm,setProblemForm]=useState({title:'',description:'',test_cases:'',expected_output:'',difficulty:'easy',time_limit:1000,memory_limit:128});// ç¼–è¾‘é¢˜ç›®çŠ¶æ€\nconst[editingProblem,setEditingProblem]=useState(null);const[isEditing,setIsEditing]=useState(false);// æ·»åŠ å­¦ç”Ÿç›¸å…³çŠ¶æ€ï¼ˆæŒ‰æ–°è§„åˆ™ï¼šå­¦å·ã€å§“åã€å¯†ç å¿…å¡«ï¼‰\nconst[addStudentForm,setAddStudentForm]=useState({student_no:'',name:'',password:'',email:'',phone:'',school_id:'',major_id:'',class_id:''});// å­¦ç”Ÿç¼–è¾‘ç›¸å…³çŠ¶æ€\nconst[editingUser,setEditingUser]=useState(null);const[editForm,setEditForm]=useState({email:'',phone:'',school_id:'',major_id:'',class_id:'',new_password:''});// è¯¾ç¨‹ç›¸å…³çŠ¶æ€\nconst[courses,setCourses]=useState([]);const[courseForm,setCourseForm]=useState({name:'',description:'',class_id:'',major_id:'',school_id:''});// ä½œä¸šç›¸å…³çŠ¶æ€\nconst[assignments,setAssignments]=useState([]);const[assignmentForm,setAssignmentForm]=useState({name:'',description:'',requirements:'',due_date:'',course_id:'',problem_ids:[]});// ç¼–è¾‘è¯¾ç¨‹çŠ¶æ€\nconst[editingCourse,setEditingCourse]=useState(null);const[isEditingCourse,setIsEditingCourse]=useState(false);// ç¼–è¾‘ä½œä¸šçŠ¶æ€\nconst[editingAssignment,setEditingAssignment]=useState(null);const[isEditingAssignment,setIsEditingAssignment]=useState(false);const[editingAssignmentContext,setEditingAssignmentContext]=useState('');// è®°å½•ç¼–è¾‘ä½œä¸šæ—¶çš„ä¸Šä¸‹æ–‡\n// æ·»åŠ å­¦ç”Ÿåˆ°è¯¾ç¨‹çš„çŠ¶æ€\nconst[addingStudentContext,setAddingStudentContext]=useState('');// è®°å½•æ·»åŠ å­¦ç”Ÿæ—¶çš„ä¸Šä¸‹æ–‡\n// å­¦ç”Ÿ-æ•™å­¦ç­å…³è”å…³ç³»çŠ¶æ€\nconst[studentClassRelations,setStudentClassRelations]=useState([]);// å­˜å‚¨å­¦ç”Ÿä¸Žæ•™å­¦ç­çš„å…³è”å…³ç³»\nuseEffect(()=>{fetchInitialData();},[]);// eslint-disable-line react-hooks/exhaustive-deps\n// ä»ŽAPIåŠ è½½å­¦ç”Ÿ-è¯¾ç¨‹å…³è”å…³ç³»\nuseEffect(()=>{const loadCourseStudents=async()=>{if(editingCourse&&editingCourse.id){console.log('å¼€å§‹åŠ è½½è¯¾ç¨‹å­¦ç”Ÿæ•°æ®ï¼Œè¯¾ç¨‹ID:',editingCourse.id);try{const courseStudentsData=await getCourseStudents(editingCourse.id);console.log('ä»ŽAPIèŽ·å–çš„è¯¾ç¨‹å­¦ç”Ÿæ•°æ®:',courseStudentsData);if(courseStudentsData&&courseStudentsData.length>0){const apiRelations=courseStudentsData.map(student=>({student_id:student.student_id,class_id:student.class_id,course_id:editingCourse.id,student_name:student.student_name,student_no:student.student_no,added_at:student.added_at||new Date().toISOString()}));setStudentClassRelations(apiRelations);console.log('æˆåŠŸåŠ è½½è¯¾ç¨‹å­¦ç”Ÿæ•°æ®:',apiRelations);}else{setStudentClassRelations([]);console.log('è¯¥è¯¾ç¨‹æš‚æ— å­¦ç”Ÿ');}}catch(error){console.error('åŠ è½½è¯¾ç¨‹å­¦ç”Ÿæ•°æ®å¤±è´¥:',error);setStudentClassRelations([]);}}};loadCourseStudents();},[editingCourse]);// eslint-disable-line react-hooks/exhaustive-deps\nconst fetchInitialData=async()=>{try{setLoading(true);setError('');setSuccess('');const[schoolsData,usersData,problemsData]=await Promise.all([getSchools(),getUsers(1,50,'student'),getProblems(1,50)]);setSchools(schoolsData);setUsers(usersData.users);setProblems(problemsData.problems);// èŽ·å–è¯¾ç¨‹å’Œä½œä¸šæ•°æ®ï¼ˆä½¿ç”¨æµ‹è¯•æ•°æ®ï¼‰\ntry{const[coursesData,assignmentsData]=await Promise.all([getTeacherCourses(),getCourseAssignments()]);setCourses(coursesData.courses||mockCourses);setAssignments(assignmentsData.assignments||mockAssignments);}catch(error){console.warn('èŽ·å–è¯¾ç¨‹æˆ–ä½œä¸šæ•°æ®å¤±è´¥ï¼Œä½¿ç”¨æµ‹è¯•æ•°æ®:',error);setCourses(mockCourses);setAssignments(mockAssignments);}// å­¦ç”Ÿ-è¯¾ç¨‹å…³è”å…³ç³»æ•°æ®å°†åœ¨è¿›å…¥è¯¾ç¨‹è¯¦æƒ…é¡µæ—¶ä»ŽAPIåŠ è½½\n}catch(error){var _error$response,_error$response$data;setError((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'èŽ·å–æ•°æ®å¤±è´¥');console.error('Error fetching data:',error);}finally{setLoading(false);}};const handleSchoolChange=async schoolId=>{setSelectedSchool(schoolId);setSelectedMajor('');setSelectedClass('');if(schoolId){try{const majorsData=await getMajors(schoolId);setMajors(majorsData);}catch(error){console.error('Error fetching majors:',error);}}else{setMajors([]);}};const handleMajorChange=async majorId=>{setSelectedMajor(majorId);setSelectedClass('');if(majorId){try{const classesData=await getClasses(majorId);setClasses(classesData);}catch(error){console.error('Error fetching classes:',error);}}else{setClasses([]);}};const handleBatchImport=async()=>{if(!importData.trim()){setError('è¯·è¾“å…¥è¦å¯¼å…¥çš„å­¦ç”Ÿæ•°æ®');setSuccess('');return;}if(!selectedSchool||!selectedMajor||!selectedClass){setError('è¯·é€‰æ‹©å­¦æ ¡ã€ä¸“ä¸šå’Œç­çº§');setSuccess('');return;}// è§£æžCSVæ•°æ®ä¸ºå­¦ç”Ÿå¯¹è±¡æ•°ç»„\nconst lines=importData.split(/\\r?\\n/).map(l=>l.trim()).filter(l=>l&&!/^\\s*#/.test(l));const students=[];for(const line of lines){const parts=line.split(',').map(s=>s.trim());if(parts.length<3)continue;// è‡³å°‘: å­¦å·,å§“å,å¯†ç \nconst[studentNo,name,password,email,phone]=parts;students.push({username:studentNo,name,password,email:email||undefined,phone:phone||undefined,school_id:selectedSchool,major_id:selectedMajor,class_id:selectedClass,role:'student'});}if(students.length===0){setError('æ²¡æœ‰æœ‰æ•ˆçš„å­¦ç”Ÿæ•°æ®è¡Œã€‚è¯·æŒ‰ CSV: å­¦å·,å§“å,å¯†ç [,é‚®ç®±][,æ‰‹æœºå·]');setSuccess('');return;}try{var _resp$success_count,_resp$failed_count;setLoading(true);setError('');setSuccess('');const resp=await batchImportStudents({students});const msg=(resp===null||resp===void 0?void 0:resp.message)||\"\\u6279\\u91CF\\u5BFC\\u5165\\u5B8C\\u6210: \\u6210\\u529F \".concat((_resp$success_count=resp===null||resp===void 0?void 0:resp.success_count)!==null&&_resp$success_count!==void 0?_resp$success_count:students.length,\" \\u4E2A, \\u5931\\u8D25 \").concat((_resp$failed_count=resp===null||resp===void 0?void 0:resp.failed_count)!==null&&_resp$failed_count!==void 0?_resp$failed_count:0,\" \\u4E2A\");setSuccess(msg);if(resp!==null&&resp!==void 0&&resp.errors&&resp.errors.length>0){const preview=resp.errors.slice(0,5).join('ï¼›');setError(\"\\u90E8\\u5206\\u5BFC\\u5165\\u5931\\u8D25\\uFF1A\".concat(preview).concat(resp.errors.length>5?' ç­‰':''));}// åˆ·æ–°ç”¨æˆ·åˆ—è¡¨\nconst usersData=await getUsers(1,50,'student');setUsers(usersData.users);setImportData('');}catch(error){var _error$response2,_error$response2$data;setError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'æ‰¹é‡å¯¼å…¥å¤±è´¥');}finally{setLoading(false);}};const handleCreateProblem=async()=>{try{setLoading(true);setError('');setSuccess('');if(isEditing&&editingProblem){await updateProblem(editingProblem.id,problemForm);setSuccess('é¢˜ç›®æ›´æ–°æˆåŠŸï¼');}else{await createProblem(problemForm);setSuccess('é¢˜ç›®åˆ›å»ºæˆåŠŸï¼');}// é‡ç½®è¡¨å•\nsetProblemForm({title:'',description:'',test_cases:'',expected_output:'',difficulty:'easy',time_limit:1000,memory_limit:128});setIsEditing(false);setEditingProblem(null);// åˆ·æ–°é¢˜ç›®åˆ—è¡¨\nconst problemsData=await getProblems(1,50);setProblems(problemsData.problems);// åˆ‡æ¢åˆ°é¢˜ç›®åˆ—è¡¨\nsetActiveSubTab('list');}catch(error){var _error$response3,_error$response3$data;setError(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||(isEditing?'æ›´æ–°é¢˜ç›®å¤±è´¥':'åˆ›å»ºé¢˜ç›®å¤±è´¥'));}finally{setLoading(false);}};const handleEditProblem=problem=>{setEditingProblem(problem);setProblemForm({title:problem.title,description:problem.description,test_cases:problem.test_cases,expected_output:problem.expected_output,difficulty:problem.difficulty,time_limit:problem.time_limit,memory_limit:problem.memory_limit});setIsEditing(true);setActiveSubTab('create');};const handleDeleteProblem=async problemId=>{if(!window.confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¢˜ç›®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')){return;}try{setLoading(true);setError('');setSuccess('');await deleteProblem(problemId);setSuccess('é¢˜ç›®åˆ é™¤æˆåŠŸï¼');// åˆ·æ–°é¢˜ç›®åˆ—è¡¨\nconst problemsData=await getProblems(1,50);setProblems(problemsData.problems);}catch(error){var _error$response4,_error$response4$data;setError(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'åˆ é™¤é¢˜ç›®å¤±è´¥');}finally{setLoading(false);}};const handleCancelEdit=()=>{setIsEditing(false);setEditingProblem(null);setProblemForm({title:'',description:'',test_cases:'',expected_output:'',difficulty:'easy',time_limit:1000,memory_limit:128});setActiveSubTab('list');};// å­¦ç”Ÿç®¡ç†æ ‡ç­¾é¡µæ¸²æŸ“å‡½æ•°\nconst renderStudentsTab=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sub-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='list'?'active':''),onClick:()=>setActiveSubTab('list'),children:\"\\u5B66\\u751F\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='add'?'active':''),onClick:()=>setActiveSubTab('add'),children:\"\\u6DFB\\u52A0\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='import'?'active':''),onClick:()=>setActiveSubTab('import'),children:\"\\u6279\\u91CF\\u5BFC\\u5165\"})]}),activeSubTab==='list'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u5B66\\u751F\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>setActiveSubTab('add'),children:\"\\u6DFB\\u52A0\\u5B66\\u751F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"users-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u5B66\\u53F7\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u59D3\\u540D\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u90AE\\u7BB1\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u73ED\\u7EA7\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u64CD\\u4F5C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.id}),/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email||'-'}),/*#__PURE__*/_jsx(\"td\",{children:user.class_id||'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(user.is_active?'active':'inactive'),children:user.is_active?'æ´»è·ƒ':'ç¦ç”¨'})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit\",onClick:()=>handleEditStudentClick(user),children:\"\\u7F16\\u8F91\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleDeleteStudent(user.id),children:\"\\u5220\\u9664\"})]})]},user.id))})]})})]}),activeSubTab==='add'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u2795 \\u6DFB\\u52A0\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('list'),children:\"\\u2190 \\u8FD4\\u56DE\\u5B66\\u751F\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-student-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5B66\\u53F7\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"required-text\",children:\"\\u5FC5\\u586B\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u53F7\",value:addStudentForm.student_no,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{student_no:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5BC6\\u7801\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"required-text\",children:\"\\u5FC5\\u586B\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",value:addStudentForm.password,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{password:e.target.value})),required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u59D3\\u540D\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"required-text\",children:\"\\u5FC5\\u586B\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u751F\\u59D3\\u540D\",value:addStudentForm.name,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u90AE\\u7BB1\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\",value:addStudentForm.email,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{email:e.target.value}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u624B\\u673A\\u53F7\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801\",value:addStudentForm.phone,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{phone:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u6821\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:addStudentForm.school_id,onChange:e=>handleAddStudentSchoolChange(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u5B66\\u6821\"}),schools.map(school=>/*#__PURE__*/_jsx(\"option\",{value:school.id,children:school.name},school.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4E13\\u4E1A\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:addStudentForm.major_id,onChange:e=>handleAddStudentMajorChange(e.target.value),disabled:!addStudentForm.school_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u4E13\\u4E1A\"}),majors.map(major=>/*#__PURE__*/_jsx(\"option\",{value:major.id,children:major.name},major.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u73ED\\u7EA7\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:addStudentForm.class_id,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{class_id:e.target.value})),disabled:!addStudentForm.major_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u73ED\\u7EA7\"}),classes.map(classItem=>/*#__PURE__*/_jsx(\"option\",{value:classItem.id,children:classItem.name},classItem.id))]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleAddStudent,disabled:loading||!addStudentForm.student_no||!addStudentForm.name||!addStudentForm.password,children:loading?'æ·»åŠ ä¸­...':'æ·»åŠ å­¦ç”Ÿ'})})]})]}),activeSubTab==='import'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCE5 \\u6279\\u91CF\\u5BFC\\u5165\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('list'),children:\"\\u2190 \\u8FD4\\u56DE\\u5B66\\u751F\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"import-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9009\\u62E9\\u5B66\\u6821:\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedSchool,onChange:e=>handleSchoolChange(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u5B66\\u6821\"}),schools.map(school=>/*#__PURE__*/_jsx(\"option\",{value:school.id,children:school.name},school.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9009\\u62E9\\u4E13\\u4E1A:\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedMajor,onChange:e=>handleMajorChange(e.target.value),disabled:!selectedSchool,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u4E13\\u4E1A\"}),majors.map(major=>/*#__PURE__*/_jsx(\"option\",{value:major.id,children:major.name},major.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9009\\u62E9\\u73ED\\u7EA7:\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedClass,onChange:e=>setSelectedClass(e.target.value),disabled:!selectedMajor,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u73ED\\u7EA7\"}),classes.map(classItem=>/*#__PURE__*/_jsx(\"option\",{value:classItem.id,children:classItem.name},classItem.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u751F\\u6570\\u636E (CSV\\u683C\\u5F0F):\"}),/*#__PURE__*/_jsx(\"textarea\",{value:importData,onChange:e=>setImportData(e.target.value),placeholder:\"\\u5B66\\u53F7,\\u59D3\\u540D,\\u5BC6\\u7801,\\u90AE\\u7BB1,\\u624B\\u673A\\u53F7\\n2021001,\\u5F20\\u4E09,123456,zhangsan@example.com,13800138001\\n2021002,\\u674E\\u56DB,123456,lisi@example.com,13800138002\",rows:10}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-help\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"CSV\\u683C\\u5F0F\\u8BF4\\u660E\\uFF1A\\u6BCF\\u884C\\u4E00\\u4E2A\\u5B66\\u751F\\uFF0C\\u5B57\\u6BB5\\u7528\\u9017\\u53F7\\u5206\\u9694\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u5FC5\\u586B\\u5B57\\u6BB5\\uFF1A\\u5B66\\u53F7,\\u59D3\\u540D,\\u5BC6\\u7801\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u53EF\\u9009\\u5B57\\u6BB5\\uFF1A\\u90AE\\u7BB1,\\u624B\\u673A\\u53F7\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleBatchImport,disabled:loading||!importData.trim()||!selectedSchool||!selectedMajor||!selectedClass,children:loading?'å¯¼å…¥ä¸­...':'å¼€å§‹å¯¼å…¥'})})]})]})]});// é¢˜ç›®ç®¡ç†æ ‡ç­¾é¡µæ¸²æŸ“å‡½æ•°\nconst renderProblemsTab=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sub-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='list'?'active':''),onClick:()=>setActiveSubTab('list'),children:\"\\u9898\\u76EE\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='create'?'active':''),onClick:()=>setActiveSubTab('create'),children:isEditing?'ç¼–è¾‘é¢˜ç›®':'åˆ›å»ºé¢˜ç›®'}),/*#__PURE__*/_jsxs(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='ai'?'active':''),onClick:()=>setActiveSubTab('ai'),children:[/*#__PURE__*/_jsx(WhaleIcon,{size:20}),\" AI\\u751F\\u9898\"]})]}),activeSubTab==='list'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u9898\\u76EE\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>{setIsEditing(false);setEditingProblem(null);setActiveSubTab('create');},children:\"\\u521B\\u5EFA\\u9898\\u76EE\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"problems-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u6807\\u9898\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u96BE\\u5EA6\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u65F6\\u95F4\\u9650\\u5236\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u5185\\u5B58\\u9650\\u5236\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u64CD\\u4F5C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:problems.map(problem=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:problem.id}),/*#__PURE__*/_jsx(\"td\",{children:problem.title}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"difficulty-badge \".concat(problem.difficulty),children:problem.difficulty==='easy'?'ç®€å•':problem.difficulty==='medium'?'ä¸­ç­‰':'å›°éš¾'})}),/*#__PURE__*/_jsxs(\"td\",{children:[problem.time_limit,\"ms\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[problem.memory_limit,\"MB\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(problem.is_active?'active':'inactive'),children:problem.is_active?'å¯ç”¨':'ç¦ç”¨'})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit\",onClick:()=>handleEditProblem(problem),children:\"\\u7F16\\u8F91\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleDeleteProblem(problem.id),children:\"\\u5220\\u9664\"})]})]},problem.id))})]})})]}),activeSubTab==='create'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isEditing?'âœï¸ ç¼–è¾‘é¢˜ç›®':'âž• åˆ›å»ºé¢˜ç›®'}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:handleCancelEdit,children:\"\\u2190 \\u8FD4\\u56DE\\u9898\\u76EE\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"problem-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9898\\u76EE\\u6807\\u9898\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u9898\\u76EE\\u6807\\u9898\",value:problemForm.title,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{title:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u96BE\\u5EA6\\u7B49\\u7EA7\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:problemForm.difficulty,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{difficulty:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"easy\",children:\"\\u7B80\\u5355\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"\\u4E2D\\u7B49\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hard\",children:\"\\u56F0\\u96BE\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u65F6\\u95F4\\u9650\\u5236 (ms)\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"1000\",value:problemForm.time_limit,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{time_limit:parseInt(e.target.value)})),min:\"100\",max:\"10000\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5185\\u5B58\\u9650\\u5236 (MB)\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"128\",value:problemForm.memory_limit,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{memory_limit:parseInt(e.target.value)})),min:\"16\",max:\"1024\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9898\\u76EE\\u63CF\\u8FF0\\uFF1A\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u9898\\u76EE\\u7684\\u8BE6\\u7EC6\\u63CF\\u8FF0\",value:problemForm.description,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),rows:6})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u6D4B\\u8BD5\\u7528\\u4F8B\\uFF1A\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u6D4B\\u8BD5\\u7528\\u4F8B\",value:problemForm.test_cases,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{test_cases:e.target.value})),rows:4})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u671F\\u671B\\u8F93\\u51FA\\uFF1A\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u671F\\u671B\\u7684\\u8F93\\u51FA\\u7ED3\\u679C\",value:problemForm.expected_output,onChange:e=>setProblemForm(prev=>_objectSpread(_objectSpread({},prev),{},{expected_output:e.target.value})),rows:4})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleCreateProblem,disabled:loading||!problemForm.title||!problemForm.description||!problemForm.test_cases||!problemForm.expected_output,children:loading?isEditing?'æ›´æ–°ä¸­...':'åˆ›å»ºä¸­...':isEditing?'æ›´æ–°é¢˜ç›®':'åˆ›å»ºé¢˜ç›®'})})]})]}),activeSubTab==='ai'&&/*#__PURE__*/_jsx(\"div\",{className:\"section-content\",children:/*#__PURE__*/_jsx(AIProblemGenerationPage,{})})]});// è¯¾ç¨‹ç®¡ç†æ ‡ç­¾é¡µæ¸²æŸ“å‡½æ•°\nconst renderCoursesTab=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sub-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='list'?'active':''),onClick:()=>{setActiveSubTab('list');// å¦‚æžœå½“å‰åœ¨è¯¾ç¨‹è¯¦æƒ…é¡µï¼Œæ¸…é™¤è¯¾ç¨‹è¯¦æƒ…çŠ¶æ€\nif(activeSubTab==='detail'){setEditingCourse(null);}// æ¸…é™¤æ·»åŠ å­¦ç”Ÿä¸Šä¸‹æ–‡\nsetAddingStudentContext('');},children:\"\\u8BFE\\u7A0B\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='add'?'active':''),onClick:()=>setActiveSubTab('add'),children:\"\\u6DFB\\u52A0\\u8BFE\\u7A0B\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='detail'?'active':''),onClick:()=>setActiveSubTab('detail'),style:{display:editingCourse&&activeSubTab==='detail'?'inline-block':'none'},children:\"\\u8BFE\\u7A0B\\u8BE6\\u60C5\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sub-tab-btn \".concat(activeSubTab==='add-student-to-course'?'active':''),onClick:()=>setActiveSubTab('add-student-to-course'),style:{display:editingCourse&&activeSubTab==='detail'?'inline-block':'none'},children:\"\\u6DFB\\u52A0\\u5B66\\u751F\"})]}),activeSubTab==='list'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u6211\\u7684\\u8BFE\\u7A0B\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>{setActiveSubTab('add');// å¦‚æžœå½“å‰åœ¨è¯¾ç¨‹è¯¦æƒ…é¡µï¼Œæ¸…é™¤è¯¾ç¨‹è¯¦æƒ…çŠ¶æ€\nif(activeSubTab==='detail'){setEditingCourse(null);}// æ¸…é™¤æ·»åŠ å­¦ç”Ÿä¸Šä¸‹æ–‡\nsetAddingStudentContext('');},children:\"\\u6DFB\\u52A0\\u8BFE\\u7A0B\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"courses-grid\",children:courses.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u6682\\u65E0\\u8BFE\\u7A0B\\uFF0C\\u8BF7\\u6DFB\\u52A0\\u60A8\\u7684\\u7B2C\\u4E00\\u4E2A\\u6559\\u5B66\\u73ED\"}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:()=>setActiveSubTab('add'),children:\"\\u6DFB\\u52A0\\u8BFE\\u7A0B\"})]}):courses.map(course=>/*#__PURE__*/_jsxs(\"div\",{className:\"course-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:course.name}),/*#__PURE__*/_jsx(\"span\",{className:\"course-status active\",children:\"\\u8FDB\\u884C\\u4E2D\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u6559\\u5B66\\u73ED\\uFF1A\"}),course.class_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u4E13\\u4E1A\\uFF1A\"}),course.major_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u5B66\\u6821\\uFF1A\"}),course.school_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u5B66\\u751F\\u6570\\u91CF\\uFF1A\"}),course.student_count||0,\"\\u4EBA\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u521B\\u5EFA\\u65F6\\u95F4\\uFF1A\"}),formatDate(course.created_at)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn primary\",onClick:()=>handleViewCourseDetail(course.id),children:\"\\u67E5\\u770B\\u8BE6\\u60C5\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit\",onClick:()=>handleEditCourse(course),children:\"\\u7F16\\u8F91\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleDeleteCourse(course.id),children:\"\\u5220\\u9664\"})]})]},course.id))})]}),activeSubTab==='add'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isEditingCourse?'âœï¸ ç¼–è¾‘è¯¾ç¨‹':'âž• æ·»åŠ è¯¾ç¨‹'}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>{setActiveSubTab('list');setIsEditingCourse(false);setEditingCourse(null);setCourseForm({name:'',description:'',class_id:'',major_id:'',school_id:''});},children:\"\\u2190 \\u8FD4\\u56DE\\u8BFE\\u7A0B\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u8BFE\\u7A0B\\u540D\\u79F0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u8BFE\\u7A0B\\u540D\\u79F0\",value:courseForm.name,onChange:e=>setCourseForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\u63CF\\u8FF0\\uFF1A\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u8BFE\\u7A0B\\u63CF\\u8FF0\",value:courseForm.description,onChange:e=>setCourseForm(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),rows:3})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5B66\\u6821\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:courseForm.school_id,onChange:e=>handleCourseSchoolChange(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u5B66\\u6821\"}),schools.map(school=>/*#__PURE__*/_jsx(\"option\",{value:school.id,children:school.name},school.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4E13\\u4E1A\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:courseForm.major_id,onChange:e=>handleCourseMajorChange(e.target.value),disabled:!courseForm.school_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u4E13\\u4E1A\"}),majors.map(major=>/*#__PURE__*/_jsx(\"option\",{value:major.id,children:major.name},major.id))]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u6559\\u5B66\\u73ED\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:courseForm.class_id,onChange:e=>setCourseForm(prev=>_objectSpread(_objectSpread({},prev),{},{class_id:e.target.value})),disabled:!courseForm.major_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u6559\\u5B66\\u73ED\"}),classes.map(classItem=>/*#__PURE__*/_jsx(\"option\",{value:classItem.id,children:classItem.name},classItem.id))]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleCreateCourse,disabled:loading||!courseForm.name||!courseForm.school_id||!courseForm.major_id||!courseForm.class_id,children:loading?isEditingCourse?'æ›´æ–°ä¸­...':'åˆ›å»ºä¸­...':isEditingCourse?'æ›´æ–°è¯¾ç¨‹':'åˆ›å»ºè¯¾ç¨‹'})})]})]}),activeSubTab==='create-assignment'&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isEditingAssignment?'âœï¸ ç¼–è¾‘ä½œä¸š':'ðŸ“ å¸ƒç½®ä½œä¸š'}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>{// æ ¹æ®ä¸Šä¸‹æ–‡æ™ºèƒ½è¿”å›ž\nif(editingAssignmentContext==='course-detail'){setActiveSubTab('detail');}else{setActiveSubTab('list');}setIsEditingAssignment(false);setEditingAssignment(null);setEditingAssignmentContext('');setAssignmentForm({name:'',description:'',requirements:'',due_date:'',course_id:'',problem_ids:[]});},children:editingAssignmentContext==='course-detail'?'â† è¿”å›žè¯¾ç¨‹è¯¦æƒ…':'â† è¿”å›žè¯¾ç¨‹åˆ—è¡¨'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"assignment-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u540D\\u79F0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u540D\\u79F0\",value:assignmentForm.name,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\uFF1A\"}),editingAssignmentContext==='course-detail'&&editingCourse?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingCourse.name,disabled:true,className:\"disabled-input\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"}),/*#__PURE__*/_jsxs(\"select\",{value:assignmentForm.course_id,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{course_id:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u8BFE\\u7A0B\"}),courses.map(course=>/*#__PURE__*/_jsxs(\"option\",{value:course.id,children:[course.name,\" - \",course.class_name]},course.id))]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u63CF\\u8FF0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u63CF\\u8FF0\",value:assignmentForm.description,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),rows:4})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u8981\\u6C42\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u8981\\u6C42\",value:assignmentForm.requirements,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{requirements:e.target.value})),rows:4})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u622A\\u6B62\\u65F6\\u95F4\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:assignmentForm.due_date,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{due_date:e.target.value}))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9009\\u62E9\\u9898\\u76EE\\uFF1A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"problem-selection\",children:problems.map(problem=>/*#__PURE__*/_jsxs(\"label\",{className:\"problem-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:problem.id,checked:assignmentForm.problem_ids.includes(problem.id),onChange:e=>{if(e.target.checked){setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{problem_ids:[...prev.problem_ids,problem.id]}));}else{setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{problem_ids:prev.problem_ids.filter(id=>id!==problem.id)}));}}}),/*#__PURE__*/_jsx(\"span\",{className:\"problem-title\",children:problem.title}),/*#__PURE__*/_jsx(\"span\",{className:\"difficulty-badge \".concat(problem.difficulty),children:problem.difficulty==='easy'?'ç®€å•':problem.difficulty==='medium'?'ä¸­ç­‰':'å›°éš¾'})]},problem.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleCreateAssignment,disabled:loading||!assignmentForm.name||!assignmentForm.description||!assignmentForm.requirements||!assignmentForm.due_date||!assignmentForm.course_id,children:loading?isEditingAssignment?'æ›´æ–°ä¸­...':'åˆ›å»ºä¸­...':isEditingAssignment?'æ›´æ–°ä½œä¸š':'å¸ƒç½®ä½œä¸š'})})]})]}),activeSubTab==='detail'&&editingCourse&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\uD83D\\uDCDA \\u8BFE\\u7A0B\\u8BE6\\u60C5\\uFF1A\",editingCourse.name]}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>{setActiveSubTab('list');setEditingCourse(null);},children:\"\\u2190 \\u8FD4\\u56DE\\u8BFE\\u7A0B\\u5217\\u8868\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course-info-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u8BFE\\u7A0B\\u57FA\\u672C\\u4FE1\\u606F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\u540D\\u79F0\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\u63CF\\u8FF0\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u6559\\u5B66\\u73ED\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.class_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4E13\\u4E1A\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.major_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u6821\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:editingCourse.school_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u751F\\u6570\\u91CF\\uFF1A\"}),/*#__PURE__*/_jsxs(\"span\",{children:[editingCourse.student_count||0,\"\\u4EBA\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u521B\\u5EFA\\u65F6\\u95F4\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(editingCourse.created_at)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-students-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u6559\\u5B66\\u73ED\\u5B66\\u751F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>{// è®¾ç½®æ·»åŠ å­¦ç”Ÿä¸Šä¸‹æ–‡ä¸ºè¯¾ç¨‹è¯¦æƒ…é¡µ\nsetAddingStudentContext('course-detail');setActiveSubTab('add-student-to-course');},children:\"\\u6DFB\\u52A0\\u5B66\\u751F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"students-table\",children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u5B66\\u53F7\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u59D3\\u540D\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u90AE\\u7BB1\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u64CD\\u4F5C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(()=>{// èŽ·å–å½“å‰è¯¾ç¨‹çš„æ‰€æœ‰å­¦ç”Ÿ\nconst courseStudents=[];// 1. æ·»åŠ åŽŸæœ¬å±žäºŽè¯¥æ•™å­¦ç­çš„å­¦ç”Ÿ\nconst originalStudents=users.filter(user=>user.class_id===editingCourse.class_id&&user.role==='student');courseStudents.push(...originalStudents);// 2. æ·»åŠ é€šè¿‡å…³è”å…³ç³»æ·»åŠ çš„å­¦ç”Ÿ\nconst relatedStudents=studentClassRelations.filter(relation=>relation.course_id===editingCourse.id).map(relation=>{// æŸ¥æ‰¾å­¦ç”Ÿçš„å®Œæ•´ä¿¡æ¯\nconst studentInfo=users.find(user=>user.id===relation.student_id);return _objectSpread(_objectSpread({},studentInfo),{},{// ä½¿ç”¨å…³è”å…³ç³»ä¸­çš„ä¿¡æ¯ä½œä¸ºåŽå¤‡\nname:studentInfo?studentInfo.name:relation.student_name,username:studentInfo?studentInfo.username:relation.student_no,// æ ‡è®°è¿™æ˜¯é€šè¿‡å…³è”å…³ç³»æ·»åŠ çš„å­¦ç”Ÿ\nisRelatedStudent:true,relationId:relation.student_id+'_'+relation.class_id});});// åˆå¹¶å­¦ç”Ÿåˆ—è¡¨ï¼ŒåŽ»é‡\nconst allStudents=[...originalStudents,...relatedStudents];const uniqueStudents=allStudents.filter((student,index,self)=>index===self.findIndex(s=>s.id===student.id));return uniqueStudents.map(student=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:student.username}),/*#__PURE__*/_jsx(\"td\",{children:student.name}),/*#__PURE__*/_jsx(\"td\",{children:student.email||'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(student.is_active?'active':'inactive'),children:student.is_active?'æ´»è·ƒ':'ç¦ç”¨'})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit\",onClick:()=>handleEditStudentClick(student),children:\"\\u7F16\\u8F91\"}),student.isRelatedStudent&&/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleRemoveStudentFromCourse(student.relationId),children:\"\\u79FB\\u9664\"})]})]},student.relationId||student.id));})()})]}),(()=>{// èŽ·å–å½“å‰è¯¾ç¨‹çš„æ‰€æœ‰å­¦ç”Ÿæ•°é‡\nconst originalStudents=users.filter(user=>user.class_id===editingCourse.class_id&&user.role==='student');const relatedStudents=studentClassRelations.filter(relation=>relation.course_id===editingCourse.id);const totalStudents=originalStudents.length+relatedStudents.length;if(totalStudents===0){return/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BE5\\u6559\\u5B66\\u73ED\\u6682\\u65E0\\u5B66\\u751F\"})});}return null;})()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-assignments-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u5DF2\\u5E03\\u7F6E\\u4F5C\\u4E1A\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>{// è‡ªåŠ¨è®¾ç½®å½“å‰è¯¾ç¨‹IDåˆ°ä½œä¸šè¡¨å•\nsetAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{course_id:editingCourse.id}));// è®¾ç½®ç¼–è¾‘ä½œä¸šä¸Šä¸‹æ–‡ä¸ºè¯¾ç¨‹è¯¦æƒ…é¡µ\nsetEditingAssignmentContext('course-detail');setActiveSubTab('create-assignment');},children:\"\\u5E03\\u7F6E\\u4F5C\\u4E1A\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"assignments-table\",children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u4F5C\\u4E1A\\u540D\\u79F0\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u63CF\\u8FF0\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u622A\\u6B62\\u65F6\\u95F4\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u64CD\\u4F5C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:assignments.filter(assignment=>assignment.course_id===editingCourse.id).map(assignment=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:assignment.name}),/*#__PURE__*/_jsx(\"td\",{children:assignment.description}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(assignment.due_date)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(assignment.is_active?'active':'inactive'),children:assignment.is_active?'è¿›è¡Œä¸­':'å·²ç»“æŸ'})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit\",onClick:()=>handleEditAssignment(assignment),children:\"\\u7F16\\u8F91\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleDeleteAssignment(assignment.id),children:\"\\u5220\\u9664\"})]})]},assignment.id))})]}),assignments.filter(assignment=>assignment.course_id===editingCourse.id).length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BE5\\u8BFE\\u7A0B\\u6682\\u65E0\\u4F5C\\u4E1A\"})})]})]}),activeSubTab==='create-assignment'&&/*#__PURE__*/_jsxs(\"div\",{className:\"course-assignment-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCDD \\u5E03\\u7F6E\\u4F5C\\u4E1A\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('detail'),children:\"\\u2190 \\u8FD4\\u56DE\\u8BFE\\u7A0B\\u8BE6\\u60C5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"assignment-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u540D\\u79F0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u540D\\u79F0\",value:assignmentForm.name,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u8BFE\\u7A0B\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingCourse.name,disabled:true,className:\"disabled-input\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u63CF\\u8FF0\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u63CF\\u8FF0\",value:assignmentForm.description,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),rows:4})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u4F5C\\u4E1A\\u8981\\u6C42\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4F5C\\u4E1A\\u8981\\u6C42\",value:assignmentForm.requirements,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{requirements:e.target.value})),rows:4})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u622A\\u6B62\\u65F6\\u95F4\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:assignmentForm.due_date,onChange:e=>setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{due_date:e.target.value}))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u9009\\u62E9\\u9898\\u76EE\\uFF1A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"problem-selection\",children:problems.map(problem=>/*#__PURE__*/_jsxs(\"label\",{className:\"problem-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:problem.id,checked:assignmentForm.problem_ids.includes(problem.id),onChange:e=>{if(e.target.checked){setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{problem_ids:[...prev.problem_ids,problem.id]}));}else{setAssignmentForm(prev=>_objectSpread(_objectSpread({},prev),{},{problem_ids:prev.problem_ids.filter(id=>id!==problem.id)}));}}}),/*#__PURE__*/_jsx(\"span\",{className:\"problem-title\",children:problem.title}),/*#__PURE__*/_jsx(\"span\",{className:\"difficulty-badge \".concat(problem.difficulty),children:problem.difficulty==='easy'?'ç®€å•':problem.difficulty==='medium'?'ä¸­ç­‰':'å›°éš¾'})]},problem.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleCreateAssignment,disabled:loading||!assignmentForm.name||!assignmentForm.description||!assignmentForm.requirements||!assignmentForm.due_date||!assignmentForm.course_id,children:loading?'åˆ›å»ºä¸­...':'å¸ƒç½®ä½œä¸š'})})]})]})]})]}),activeSubTab==='add-student-to-course'&&editingCourse&&/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83D\\uDC65 \\u6DFB\\u52A0\\u5B66\\u751F\\u5230\\u8BFE\\u7A0B\\uFF1A\",editingCourse.name]}),/*#__PURE__*/_jsx(\"p\",{className:\"form-description\",children:\"\\u8BF7\\u8F93\\u5165\\u5DF2\\u6CE8\\u518C\\u5B66\\u751F\\u7684\\u5B66\\u53F7\\u548C\\u59D3\\u540D\\uFF0C\\u5C06\\u5176\\u6DFB\\u52A0\\u5230\\u5F53\\u524D\\u6559\\u5B66\\u73ED\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setActiveSubTab('detail'),children:\"\\u2190 \\u8FD4\\u56DE\\u8BFE\\u7A0B\\u8BE6\\u60C5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-student-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u5B66\\u53F7\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u53F7\",value:addStudentForm.student_no,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{student_no:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u59D3\\u540D\\uFF1A\",/*#__PURE__*/_jsx(\"span\",{className:\"required-mark\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5B66\\u751F\\u59D3\\u540D\",value:addStudentForm.name,onChange:e=>setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value})),required:true})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u6559\\u5B66\\u73ED\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingCourse.class_name,disabled:true,className:\"disabled-input\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleAddStudentToCourse,disabled:loading||!addStudentForm.student_no||!addStudentForm.name,children:loading?'æ·»åŠ ä¸­...':'æ·»åŠ å­¦ç”Ÿ'})})]})]})]});// å¤„ç†æ·»åŠ å­¦ç”Ÿæ—¶çš„å­¦æ ¡é€‰æ‹©å˜åŒ–\nconst handleAddStudentSchoolChange=async schoolId=>{setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{school_id:schoolId,major_id:'',class_id:''}));if(schoolId){try{const majorsData=await getMajors(schoolId);setMajors(majorsData);}catch(error){console.error('Error fetching majors:',error);}}else{setMajors([]);}};// å¤„ç†æ·»åŠ å­¦ç”Ÿæ—¶çš„ä¸“ä¸šé€‰æ‹©å˜åŒ–\nconst handleAddStudentMajorChange=async majorId=>{setAddStudentForm(prev=>_objectSpread(_objectSpread({},prev),{},{major_id:majorId,class_id:''}));if(majorId){try{const classesData=await getClasses(majorId);setClasses(classesData);}catch(error){console.error('Error fetching classes:',error);}}else{setClasses([]);}};// å¤„ç†æ·»åŠ å­¦ç”Ÿ\nconst handleAddStudent=async()=>{try{setLoading(true);setError('');setSuccess('');await registerStudent(addStudentForm);setSuccess('å­¦ç”Ÿæ·»åŠ æˆåŠŸï¼');// é‡ç½®è¡¨å•\nsetAddStudentForm({student_no:'',name:'',password:'',email:'',phone:'',school_id:'',major_id:'',class_id:''});// åˆ·æ–°ç”¨æˆ·åˆ—è¡¨\nconst usersData=await getUsers(1,50,'student');setUsers(usersData.users);// åˆ‡æ¢åˆ°å­¦ç”Ÿåˆ—è¡¨\nsetActiveSubTab('list');}catch(error){var _error$response5,_error$response5$data;setError(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||'æ·»åŠ å­¦ç”Ÿå¤±è´¥');}finally{setLoading(false);}};// å¤„ç†å‘è¯¾ç¨‹æ·»åŠ å­¦ç”Ÿ\nconst handleAddStudentToCourse=async()=>{try{setLoading(true);setError('');setSuccess('');// æŸ¥æ‰¾å­¦ç”Ÿæ˜¯å¦å·²å­˜åœ¨\nconst existingStudent=users.find(user=>user.username===addStudentForm.student_no&&user.name===addStudentForm.name&&user.role==='student');if(!existingStudent){setError('æœªæ‰¾åˆ°è¯¥å­¦ç”Ÿï¼Œè¯·ç¡®è®¤å­¦å·å’Œå§“åæ˜¯å¦æ­£ç¡®');return;}// æ£€æŸ¥å­¦ç”Ÿæ˜¯å¦å·²ç»åœ¨è¯¥æ•™å­¦ç­ä¸­\n// ç”±äºŽä¸€ä¸ªå­¦ç”Ÿå¯ä»¥å±žäºŽå¤šä¸ªæ•™å­¦ç­ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥å­¦ç”Ÿæ˜¯å¦å·²ç»åœ¨è¯¥è¯¾ç¨‹çš„æ•™å­¦ç­ä¸­\nconst isAlreadyInClass=users.some(user=>user.id===existingStudent.id&&user.class_id===editingCourse.class_id);if(isAlreadyInClass){setError('è¯¥å­¦ç”Ÿå·²ç»åœ¨è¯¥æ•™å­¦ç­ä¸­');return;}// æ£€æŸ¥å­¦ç”Ÿæ˜¯å¦å·²ç»é€šè¿‡å…³è”å…³ç³»æ·»åŠ åˆ°è¯¥è¯¾ç¨‹\nconst isAlreadyRelated=studentClassRelations.some(relation=>relation.student_id===existingStudent.id&&relation.course_id===editingCourse.id);if(isAlreadyRelated){setError('è¯¥å­¦ç”Ÿå·²ç»åœ¨è¯¥è¯¾ç¨‹ä¸­');return;}// ä½¿ç”¨APIæ·»åŠ å­¦ç”Ÿåˆ°è¯¾ç¨‹\ntry{await addStudentToCourse(editingCourse.id,{student_id:existingStudent.id,class_id:editingCourse.class_id});setSuccess('å­¦ç”Ÿå·²æˆåŠŸæ·»åŠ åˆ°è¯¾ç¨‹ï¼');// é‡æ–°åŠ è½½è¯¾ç¨‹å­¦ç”Ÿæ•°æ®\nconst courseStudentsData=await getCourseStudents(editingCourse.id);if(courseStudentsData&&courseStudentsData.length>0){const apiRelations=courseStudentsData.map(student=>({student_id:student.student_id,class_id:student.class_id,course_id:editingCourse.id,student_name:student.student_name,student_no:student.student_no,added_at:student.added_at||new Date().toISOString()}));setStudentClassRelations(apiRelations);}}catch(apiError){var _apiError$response,_apiError$response$da;console.error('æ·»åŠ å­¦ç”Ÿåˆ°è¯¾ç¨‹å¤±è´¥:',apiError);setError(((_apiError$response=apiError.response)===null||_apiError$response===void 0?void 0:(_apiError$response$da=_apiError$response.data)===null||_apiError$response$da===void 0?void 0:_apiError$response$da.error)||'æ·»åŠ å­¦ç”Ÿå¤±è´¥');return;}// é‡ç½®è¡¨å•\nsetAddStudentForm({student_no:'',name:'',password:'',email:'',phone:'',school_id:'',major_id:'',class_id:''});// è¿”å›žåˆ°è¯¾ç¨‹è¯¦æƒ…é¡µ\nsetActiveSubTab('detail');}catch(error){var _error$response6,_error$response6$data;setError(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||'æ·»åŠ å­¦ç”Ÿå¤±è´¥');}finally{setLoading(false);}};// å¤„ç†ä»Žè¯¾ç¨‹ä¸­ç§»é™¤å­¦ç”Ÿ\nconst handleRemoveStudentFromCourse=async relationId=>{if(!window.confirm('ç¡®å®šè¦ä»Žè¯¥è¯¾ç¨‹ä¸­ç§»é™¤è¯¥å­¦ç”Ÿå—ï¼Ÿ'))return;try{// è§£æžrelationIdèŽ·å–å­¦ç”ŸIDå’Œè¯¾ç¨‹ID\nconst[studentId]=relationId.split('_');// ä½¿ç”¨APIä»Žè¯¾ç¨‹ä¸­ç§»é™¤å­¦ç”Ÿ\ntry{await removeStudentFromCourse(editingCourse.id,studentId);setSuccess('å­¦ç”Ÿå·²ä»Žè¯¾ç¨‹ä¸­ç§»é™¤');// é‡æ–°åŠ è½½è¯¾ç¨‹å­¦ç”Ÿæ•°æ®\nconst courseStudentsData=await getCourseStudents(editingCourse.id);if(courseStudentsData&&courseStudentsData.length>0){const apiRelations=courseStudentsData.map(student=>({student_id:student.student_id,class_id:student.class_id,course_id:editingCourse.id,student_name:student.student_name,student_no:student.student_no,added_at:student.added_at||new Date().toISOString()}));setStudentClassRelations(apiRelations);}else{setStudentClassRelations([]);}}catch(apiError){var _apiError$response2,_apiError$response2$d;console.error('ä»Žè¯¾ç¨‹ä¸­ç§»é™¤å­¦ç”Ÿå¤±è´¥:',apiError);setError(((_apiError$response2=apiError.response)===null||_apiError$response2===void 0?void 0:(_apiError$response2$d=_apiError$response2.data)===null||_apiError$response2$d===void 0?void 0:_apiError$response2$d.error)||'ç§»é™¤å­¦ç”Ÿå¤±è´¥');return;}}catch(error){setError('ç§»é™¤å­¦ç”Ÿå¤±è´¥');}};// å­¦ç”Ÿç¼–è¾‘/åˆ é™¤ç›¸å…³\nconst handleEditStudentClick=user=>{setEditingUser(user);setEditForm({email:user.email||'',phone:user.phone||'',school_id:user.school_id||'',major_id:user.major_id||'',class_id:user.class_id||'',new_password:''});setError('');setSuccess('');};const handleSaveStudent=async()=>{if(!editingUser)return;try{setLoading(true);setError('');setSuccess('');await updateUser(editingUser.id,editForm);setSuccess('å­¦ç”Ÿä¿¡æ¯å·²æ›´æ–°');// åˆ·æ–°åˆ—è¡¨\nconst usersData=await getUsers(1,50,'student');setUsers(usersData.users);setEditingUser(null);}catch(error){var _error$response7,_error$response7$data;setError(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.error)||'æ›´æ–°å­¦ç”Ÿä¿¡æ¯å¤±è´¥');}finally{setLoading(false);}};const handleCancelEditStudent=()=>{setEditingUser(null);setEditForm({email:'',phone:'',school_id:'',major_id:'',class_id:'',new_password:''});};const handleDeleteStudent=async userId=>{if(!window.confirm('ç¡®å®šè¦åˆ é™¤è¯¥å­¦ç”Ÿå—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚'))return;try{setLoading(true);setError('');setSuccess('');await deleteUser(userId);setSuccess('å­¦ç”Ÿå·²åˆ é™¤');const usersData=await getUsers(1,50,'student');setUsers(usersData.users);}catch(error){var _error$response8,_error$response8$data;setError(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.error)||'åˆ é™¤å­¦ç”Ÿå¤±è´¥');}finally{setLoading(false);}};// è¯¾ç¨‹ç›¸å…³å¤„ç†å‡½æ•°\nconst handleCourseSchoolChange=async schoolId=>{setCourseForm(prev=>_objectSpread(_objectSpread({},prev),{},{school_id:schoolId,major_id:'',class_id:''}));if(schoolId){try{const majorsData=await getMajors(schoolId);setMajors(majorsData);}catch(error){console.error('Error fetching majors:',error);}}else{setMajors([]);}};const handleCourseMajorChange=async majorId=>{setCourseForm(prev=>_objectSpread(_objectSpread({},prev),{},{major_id:majorId,class_id:''}));if(majorId){try{const classesData=await getClasses(majorId);setClasses(classesData);}catch(error){console.error('Error fetching classes:',error);}}else{setClasses([]);}};const handleCreateCourse=async()=>{try{setLoading(true);setError('');setSuccess('');if(isEditingCourse&&editingCourse){await updateCourse(editingCourse.id,courseForm);setSuccess('è¯¾ç¨‹æ›´æ–°æˆåŠŸï¼');}else{await createCourse(courseForm);setSuccess('è¯¾ç¨‹åˆ›å»ºæˆåŠŸï¼');}// é‡ç½®è¡¨å•\nsetCourseForm({name:'',description:'',class_id:'',major_id:'',school_id:''});setIsEditingCourse(false);setEditingCourse(null);// åˆ·æ–°è¯¾ç¨‹åˆ—è¡¨\nconst coursesData=await getTeacherCourses();setCourses(coursesData.courses||[]);// åˆ‡æ¢åˆ°è¯¾ç¨‹åˆ—è¡¨\nsetActiveSubTab('list');}catch(error){var _error$response9,_error$response9$data;setError(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.error)||(isEditingCourse?'æ›´æ–°è¯¾ç¨‹å¤±è´¥':'åˆ›å»ºè¯¾ç¨‹å¤±è´¥'));}finally{setLoading(false);}};const handleEditCourse=course=>{setEditingCourse(course);setCourseForm({name:course.name,description:course.description||'',school_id:course.school_id||'',major_id:course.major_id||'',class_id:course.class_id||''});setIsEditingCourse(true);setActiveSubTab('add');};const handleDeleteCourse=async courseId=>{if(!window.confirm('ç¡®å®šè¦åˆ é™¤è¯¥è¯¾ç¨‹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚'))return;try{setLoading(true);setError('');setSuccess('');await deleteCourse(courseId);setSuccess('è¯¾ç¨‹å·²åˆ é™¤');// åˆ·æ–°è¯¾ç¨‹åˆ—è¡¨\nconst coursesData=await getTeacherCourses();setCourses(coursesData.courses||[]);}catch(error){var _error$response0,_error$response0$data;setError(((_error$response0=error.response)===null||_error$response0===void 0?void 0:(_error$response0$data=_error$response0.data)===null||_error$response0$data===void 0?void 0:_error$response0$data.error)||'åˆ é™¤è¯¾ç¨‹å¤±è´¥');}finally{setLoading(false);}};const handleViewCourseDetail=courseId=>{const course=courses.find(c=>c.id===courseId);if(course){setActiveTab('courses');setActiveSubTab('detail');setEditingCourse(course);}};// ä½œä¸šç›¸å…³å¤„ç†å‡½æ•°\nconst handleCreateAssignment=async()=>{try{setLoading(true);setError('');setSuccess('');// å¦‚æžœåœ¨è¯¾ç¨‹è¯¦æƒ…é¡µé¢åˆ›å»ºä½œä¸šï¼Œè‡ªåŠ¨è®¾ç½®è¯¾ç¨‹ID\nconst assignmentData=_objectSpread({},assignmentForm);if(activeSubTab==='create-assignment'&&editingCourse){assignmentData.course_id=editingCourse.id;}if(isEditingAssignment&&editingAssignment){await updateAssignment(editingAssignment.id,assignmentData);setSuccess('ä½œä¸šæ›´æ–°æˆåŠŸï¼');}else{await createAssignment(assignmentData);setSuccess('ä½œä¸šå¸ƒç½®æˆåŠŸï¼');}// é‡ç½®è¡¨å•\nsetAssignmentForm({name:'',description:'',requirements:'',due_date:'',course_id:'',problem_ids:[]});setIsEditingAssignment(false);setEditingAssignment(null);// åˆ·æ–°ä½œä¸šåˆ—è¡¨\nconst assignmentsData=await getCourseAssignments();setAssignments(assignmentsData.assignments||[]);// å¦‚æžœåœ¨è¯¾ç¨‹è¯¦æƒ…é¡µé¢ï¼Œè¿”å›žåˆ°è¯¾ç¨‹è¯¦æƒ…ï¼›å¦åˆ™è¿”å›žåˆ°è¯¾ç¨‹åˆ—è¡¨\nif(activeSubTab==='create-assignment'){setActiveSubTab('detail');}else{setActiveSubTab('list');}}catch(error){var _error$response1,_error$response1$data;setError(((_error$response1=error.response)===null||_error$response1===void 0?void 0:(_error$response1$data=_error$response1.data)===null||_error$response1$data===void 0?void 0:_error$response1$data.error)||(isEditingAssignment?'æ›´æ–°ä½œä¸šå¤±è´¥':'å¸ƒç½®ä½œä¸šå¤±è´¥'));}finally{setLoading(false);}};const handleEditAssignment=assignment=>{setEditingAssignment(assignment);setAssignmentForm({name:assignment.name,description:assignment.description||'',requirements:assignment.requirements||'',due_date:assignment.due_date||'',course_id:assignment.course_id||'',problem_ids:assignment.problem_ids||[]});setIsEditingAssignment(true);// è®°å½•ç¼–è¾‘ä½œä¸šæ—¶çš„ä¸Šä¸‹æ–‡\nif(activeSubTab==='detail'&&editingCourse){setEditingAssignmentContext('course-detail');}else{setEditingAssignmentContext('course-list');}// åˆ‡æ¢åˆ°ä½œä¸šåˆ›å»ºæ¨¡å¼\nsetActiveSubTab('create-assignment');};const handleDeleteAssignment=async assignmentId=>{if(!window.confirm('ç¡®å®šè¦åˆ é™¤è¯¥ä½œä¸šå—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚'))return;try{setLoading(true);setError('');setSuccess('');await deleteAssignment(assignmentId);setSuccess('ä½œä¸šå·²åˆ é™¤');// åˆ·æ–°ä½œä¸šåˆ—è¡¨\nconst assignmentsData=await getCourseAssignments();setAssignments(assignmentsData.assignments||[]);}catch(error){var _error$response10,_error$response10$dat;setError(((_error$response10=error.response)===null||_error$response10===void 0?void 0:(_error$response10$dat=_error$response10.data)===null||_error$response10$dat===void 0?void 0:_error$response10$dat.error)||'åˆ é™¤ä½œä¸šå¤±è´¥');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"teacher-dashboard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\u6559\\u5E08\\u7BA1\\u7406\\u63A7\\u5236\\u53F0\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(activeTab==='students'?'active':''),onClick:()=>{setActiveTab('students');setActiveSubTab('list');// æ¸…é™¤è¯¾ç¨‹ç›¸å…³çŠ¶æ€\nsetEditingCourse(null);setEditingAssignmentContext('');setAddingStudentContext('');},children:\"\\u5B66\\u751F\\u7BA1\\u7406\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(activeTab==='problems'?'active':''),onClick:()=>{setActiveTab('problems');setActiveSubTab('list');// æ¸…é™¤è¯¾ç¨‹ç›¸å…³çŠ¶æ€\nsetEditingCourse(null);setEditingAssignmentContext('');setAddingStudentContext('');},children:\"\\u9898\\u76EE\\u7BA1\\u7406\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(activeTab==='courses'?'active':''),onClick:()=>{setActiveTab('courses');setActiveSubTab('list');// æ¸…é™¤è¯¾ç¨‹è¯¦æƒ…çŠ¶æ€ï¼Œä½†ä¿ç•™è¯¾ç¨‹åˆ—è¡¨\nsetEditingCourse(null);setEditingAssignmentContext('');setAddingStudentContext('');},children:\"\\u6211\\u7684\\u8BFE\\u7A0B\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success}),activeTab==='students'&&renderStudentsTab(),activeTab==='problems'&&renderProblemsTab(),activeTab==='courses'&&renderCoursesTab(),editingUser&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-header\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u7F16\\u8F91\\u5B66\\u751F\\uFF1A\",editingUser.name,\"\\uFF08\\u5B66\\u53F7\",editingUser.username,\"\\uFF09\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u90AE\\u7BB1\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:editForm.email,onChange:e=>setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{email:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u624B\\u673A\\u53F7\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:editForm.phone,onChange:e=>setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{phone:e.target.value}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5B66\\u6821\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.school_id,onChange:async e=>{const val=e.target.value;setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{school_id:val,major_id:'',class_id:''}));if(val){const majorsData=await getMajors(val);setMajors(majorsData);}else{setMajors([]);setClasses([]);}},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u5B66\\u6821\"}),schools.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s.id,children:s.name},s.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u4E13\\u4E1A\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.major_id,onChange:async e=>{const val=e.target.value;setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{major_id:val,class_id:''}));if(val){const classesData=await getClasses(val);setClasses(classesData);}else{setClasses([]);}},disabled:!editForm.school_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u4E13\\u4E1A\"}),majors.map(m=>/*#__PURE__*/_jsx(\"option\",{value:m.id,children:m.name},m.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u73ED\\u7EA7\\uFF1A\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.class_id,onChange:e=>setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{class_id:e.target.value})),disabled:!editForm.major_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u73ED\\u7EA7\"}),classes.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c.id,children:c.name},c.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u91CD\\u7F6E\\u5BC6\\u7801\\uFF08\\u53EF\\u9009\\uFF09\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:editForm.new_password,onChange:e=>setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{new_password:e.target.value}))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:handleCancelEditStudent,children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleSaveStudent,disabled:loading,children:loading?'ä¿å­˜ä¸­...':'ä¿å­˜'})]})]})})]});};export default TeacherDashboardPage;","map":{"version":3,"names":["React","useState","useEffect","getUsers","getSchools","getMajors","getClasses","batchImportStudents","getProblems","createProblem","updateProblem","deleteProblem","updateUser","deleteUser","registerStudent","getTeacherCourses","createCourse","updateCourse","deleteCourse","getCourseAssignments","createAssignment","updateAssignment","deleteAssignment","getCourseStudents","addStudentToCourse","removeStudentFromCourse","AIProblemGenerationPage","mockCourses","mockAssignments","formatDate","WhaleIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TeacherDashboardPage","activeTab","setActiveTab","activeSubTab","setActiveSubTab","users","setUsers","problems","setProblems","schools","setSchools","majors","setMajors","classes","setClasses","loading","setLoading","error","setError","success","setSuccess","importData","setImportData","selectedSchool","setSelectedSchool","selectedMajor","setSelectedMajor","selectedClass","setSelectedClass","problemForm","setProblemForm","title","description","test_cases","expected_output","difficulty","time_limit","memory_limit","editingProblem","setEditingProblem","isEditing","setIsEditing","addStudentForm","setAddStudentForm","student_no","name","password","email","phone","school_id","major_id","class_id","editingUser","setEditingUser","editForm","setEditForm","new_password","courses","setCourses","courseForm","setCourseForm","assignments","setAssignments","assignmentForm","setAssignmentForm","requirements","due_date","course_id","problem_ids","editingCourse","setEditingCourse","isEditingCourse","setIsEditingCourse","editingAssignment","setEditingAssignment","isEditingAssignment","setIsEditingAssignment","editingAssignmentContext","setEditingAssignmentContext","addingStudentContext","setAddingStudentContext","studentClassRelations","setStudentClassRelations","fetchInitialData","loadCourseStudents","id","console","log","courseStudentsData","length","apiRelations","map","student","student_id","student_name","added_at","Date","toISOString","schoolsData","usersData","problemsData","Promise","all","coursesData","assignmentsData","warn","_error$response","_error$response$data","response","data","handleSchoolChange","schoolId","majorsData","handleMajorChange","majorId","classesData","handleBatchImport","trim","lines","split","l","filter","test","students","line","parts","s","studentNo","push","username","undefined","role","_resp$success_count","_resp$failed_count","resp","msg","message","concat","success_count","failed_count","errors","preview","slice","join","_error$response2","_error$response2$data","handleCreateProblem","_error$response3","_error$response3$data","handleEditProblem","problem","handleDeleteProblem","problemId","window","confirm","_error$response4","_error$response4$data","handleCancelEdit","renderStudentsTab","className","children","onClick","user","is_active","handleEditStudentClick","handleDeleteStudent","type","placeholder","value","onChange","e","prev","_objectSpread","target","required","handleAddStudentSchoolChange","school","handleAddStudentMajorChange","disabled","major","classItem","handleAddStudent","rows","renderProblemsTab","size","parseInt","min","max","renderCoursesTab","style","display","course","class_name","major_name","school_name","student_count","created_at","handleViewCourseDetail","handleEditCourse","handleDeleteCourse","handleCourseSchoolChange","handleCourseMajorChange","handleCreateCourse","checked","includes","handleCreateAssignment","courseStudents","originalStudents","relatedStudents","relation","studentInfo","find","isRelatedStudent","relationId","allStudents","uniqueStudents","index","self","findIndex","handleRemoveStudentFromCourse","totalStudents","assignment","handleEditAssignment","handleDeleteAssignment","handleAddStudentToCourse","_error$response5","_error$response5$data","existingStudent","isAlreadyInClass","some","isAlreadyRelated","apiError","_apiError$response","_apiError$response$da","_error$response6","_error$response6$data","studentId","_apiError$response2","_apiError$response2$d","handleSaveStudent","_error$response7","_error$response7$data","handleCancelEditStudent","userId","_error$response8","_error$response8$data","_error$response9","_error$response9$data","courseId","_error$response0","_error$response0$data","c","assignmentData","_error$response1","_error$response1$data","assignmentId","_error$response10","_error$response10$dat","val","m"],"sources":["/Volumes/åžåŸŽ/Judger_1/frontend/src/pages/TeacherDashboardPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getUsers, getSchools, getMajors, getClasses, batchImportStudents, getProblems, createProblem, updateProblem, deleteProblem, updateUser, deleteUser, registerStudent, getTeacherCourses, createCourse, updateCourse, deleteCourse, getCourseAssignments, createAssignment, updateAssignment, deleteAssignment, getCourseStudents, addStudentToCourse, removeStudentFromCourse } from '../services/api';\nimport './TeacherDashboardPage.css';\nimport AIProblemGenerationPage from './AIProblemGenerationPage';\nimport { mockCourses, mockAssignments, formatDate } from '../testData/courses';\nimport WhaleIcon from '../components/WhaleIcon';\n\nconst TeacherDashboardPage = () => {\n  const [activeTab, setActiveTab] = useState('students');\n  const [activeSubTab, setActiveSubTab] = useState('list'); // å­æ ‡ç­¾é¡µ\n  const [users, setUsers] = useState([]);\n  const [problems, setProblems] = useState([]);\n  const [schools, setSchools] = useState([]);\n  const [majors, setMajors] = useState([]);\n  const [classes, setClasses] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // æ‰¹é‡å¯¼å…¥ç›¸å…³çŠ¶æ€\n  const [importData, setImportData] = useState('');\n  const [selectedSchool, setSelectedSchool] = useState('');\n  const [selectedMajor, setSelectedMajor] = useState('');\n  const [selectedClass, setSelectedClass] = useState('');\n\n  // æ‰‹åŠ¨åˆ›å»ºé¢˜ç›®ç›¸å…³çŠ¶æ€\n  const [problemForm, setProblemForm] = useState({\n    title: '',\n    description: '',\n    test_cases: '',\n    expected_output: '',\n    difficulty: 'easy',\n    time_limit: 1000,\n    memory_limit: 128\n  });\n\n  // ç¼–è¾‘é¢˜ç›®çŠ¶æ€\n  const [editingProblem, setEditingProblem] = useState(null);\n  const [isEditing, setIsEditing] = useState(false);\n\n  // æ·»åŠ å­¦ç”Ÿç›¸å…³çŠ¶æ€ï¼ˆæŒ‰æ–°è§„åˆ™ï¼šå­¦å·ã€å§“åã€å¯†ç å¿…å¡«ï¼‰\n  const [addStudentForm, setAddStudentForm] = useState({\n    student_no: '',\n    name: '',\n    password: '',\n    email: '',\n    phone: '',\n    school_id: '',\n    major_id: '',\n    class_id: ''\n  });\n\n  // å­¦ç”Ÿç¼–è¾‘ç›¸å…³çŠ¶æ€\n  const [editingUser, setEditingUser] = useState(null);\n  const [editForm, setEditForm] = useState({\n    email: '',\n    phone: '',\n    school_id: '',\n    major_id: '',\n    class_id: '',\n    new_password: ''\n  });\n\n  // è¯¾ç¨‹ç›¸å…³çŠ¶æ€\n  \n  const [courses, setCourses] = useState([]);\n  const [courseForm, setCourseForm] = useState({\n    name: '',\n    description: '',\n    class_id: '',\n    major_id: '',\n    school_id: ''\n  });\n\n  // ä½œä¸šç›¸å…³çŠ¶æ€\n  const [assignments, setAssignments] = useState([]);\n  const [assignmentForm, setAssignmentForm] = useState({\n    name: '',\n    description: '',\n    requirements: '',\n    due_date: '',\n    course_id: '',\n    problem_ids: []\n  });\n\n  // ç¼–è¾‘è¯¾ç¨‹çŠ¶æ€\n  const [editingCourse, setEditingCourse] = useState(null);\n  const [isEditingCourse, setIsEditingCourse] = useState(false);\n\n  // ç¼–è¾‘ä½œä¸šçŠ¶æ€\n  const [editingAssignment, setEditingAssignment] = useState(null);\n  const [isEditingAssignment, setIsEditingAssignment] = useState(false);\n  const [editingAssignmentContext, setEditingAssignmentContext] = useState(''); // è®°å½•ç¼–è¾‘ä½œä¸šæ—¶çš„ä¸Šä¸‹æ–‡\n  \n  // æ·»åŠ å­¦ç”Ÿåˆ°è¯¾ç¨‹çš„çŠ¶æ€\n  const [addingStudentContext, setAddingStudentContext] = useState(''); // è®°å½•æ·»åŠ å­¦ç”Ÿæ—¶çš„ä¸Šä¸‹æ–‡\n  \n  // å­¦ç”Ÿ-æ•™å­¦ç­å…³è”å…³ç³»çŠ¶æ€\n  const [studentClassRelations, setStudentClassRelations] = useState([]); // å­˜å‚¨å­¦ç”Ÿä¸Žæ•™å­¦ç­çš„å…³è”å…³ç³»\n\n  useEffect(() => {\n    fetchInitialData();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n  \n  // ä»ŽAPIåŠ è½½å­¦ç”Ÿ-è¯¾ç¨‹å…³è”å…³ç³»\n  useEffect(() => {\n    const loadCourseStudents = async () => {\n      if (editingCourse && editingCourse.id) {\n        console.log('å¼€å§‹åŠ è½½è¯¾ç¨‹å­¦ç”Ÿæ•°æ®ï¼Œè¯¾ç¨‹ID:', editingCourse.id);\n        \n        try {\n          const courseStudentsData = await getCourseStudents(editingCourse.id);\n          console.log('ä»ŽAPIèŽ·å–çš„è¯¾ç¨‹å­¦ç”Ÿæ•°æ®:', courseStudentsData);\n          \n          if (courseStudentsData && courseStudentsData.length > 0) {\n            const apiRelations = courseStudentsData.map(student => ({\n              student_id: student.student_id,\n              class_id: student.class_id,\n              course_id: editingCourse.id,\n              student_name: student.student_name,\n              student_no: student.student_no,\n              added_at: student.added_at || new Date().toISOString()\n            }));\n            setStudentClassRelations(apiRelations);\n            console.log('æˆåŠŸåŠ è½½è¯¾ç¨‹å­¦ç”Ÿæ•°æ®:', apiRelations);\n          } else {\n            setStudentClassRelations([]);\n            console.log('è¯¥è¯¾ç¨‹æš‚æ— å­¦ç”Ÿ');\n          }\n        } catch (error) {\n          console.error('åŠ è½½è¯¾ç¨‹å­¦ç”Ÿæ•°æ®å¤±è´¥:', error);\n          setStudentClassRelations([]);\n        }\n      }\n    };\n    \n    loadCourseStudents();\n  }, [editingCourse]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const fetchInitialData = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      const [schoolsData, usersData, problemsData] = await Promise.all([\n        getSchools(),\n        getUsers(1, 50, 'student'),\n        getProblems(1, 50)\n      ]);\n      \n      setSchools(schoolsData);\n      setUsers(usersData.users);\n      setProblems(problemsData.problems);\n      \n      // èŽ·å–è¯¾ç¨‹å’Œä½œä¸šæ•°æ®ï¼ˆä½¿ç”¨æµ‹è¯•æ•°æ®ï¼‰\n      try {\n        const [coursesData, assignmentsData] = await Promise.all([\n          getTeacherCourses(),\n          getCourseAssignments()\n        ]);\n        setCourses(coursesData.courses || mockCourses);\n        setAssignments(assignmentsData.assignments || mockAssignments);\n      } catch (error) {\n        console.warn('èŽ·å–è¯¾ç¨‹æˆ–ä½œä¸šæ•°æ®å¤±è´¥ï¼Œä½¿ç”¨æµ‹è¯•æ•°æ®:', error);\n        setCourses(mockCourses);\n        setAssignments(mockAssignments);\n      }\n      \n      // å­¦ç”Ÿ-è¯¾ç¨‹å…³è”å…³ç³»æ•°æ®å°†åœ¨è¿›å…¥è¯¾ç¨‹è¯¦æƒ…é¡µæ—¶ä»ŽAPIåŠ è½½\n    } catch (error) {\n      setError(error?.response?.data?.error || 'èŽ·å–æ•°æ®å¤±è´¥');\n      console.error('Error fetching data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSchoolChange = async (schoolId) => {\n    setSelectedSchool(schoolId);\n    setSelectedMajor('');\n    setSelectedClass('');\n    \n    if (schoolId) {\n      try {\n        const majorsData = await getMajors(schoolId);\n        setMajors(majorsData);\n      } catch (error) {\n        console.error('Error fetching majors:', error);\n      }\n    } else {\n      setMajors([]);\n    }\n  };\n\n  const handleMajorChange = async (majorId) => {\n    setSelectedMajor(majorId);\n    setSelectedClass('');\n    \n    if (majorId) {\n      try {\n        const classesData = await getClasses(majorId);\n        setClasses(classesData);\n      } catch (error) {\n        console.error('Error fetching classes:', error);\n      }\n    } else {\n      setClasses([]);\n    }\n  };\n\n  const handleBatchImport = async () => {\n    if (!importData.trim()) {\n      setError('è¯·è¾“å…¥è¦å¯¼å…¥çš„å­¦ç”Ÿæ•°æ®');\n      setSuccess('');\n      return;\n    }\n\n    if (!selectedSchool || !selectedMajor || !selectedClass) {\n      setError('è¯·é€‰æ‹©å­¦æ ¡ã€ä¸“ä¸šå’Œç­çº§');\n      setSuccess('');\n      return;\n    }\n\n    // è§£æžCSVæ•°æ®ä¸ºå­¦ç”Ÿå¯¹è±¡æ•°ç»„\n    const lines = importData\n      .split(/\\r?\\n/)\n      .map(l => l.trim())\n      .filter(l => l && !/^\\s*#/.test(l));\n    const students = [];\n    for (const line of lines) {\n      const parts = line.split(',').map(s => s.trim());\n      if (parts.length < 3) continue; // è‡³å°‘: å­¦å·,å§“å,å¯†ç \n      const [studentNo, name, password, email, phone] = parts;\n      students.push({\n        username: studentNo,\n        name,\n        password,\n        email: email || undefined,\n        phone: phone || undefined,\n        school_id: selectedSchool,\n        major_id: selectedMajor,\n        class_id: selectedClass,\n        role: 'student'\n      });\n    }\n\n    if (students.length === 0) {\n      setError('æ²¡æœ‰æœ‰æ•ˆçš„å­¦ç”Ÿæ•°æ®è¡Œã€‚è¯·æŒ‰ CSV: å­¦å·,å§“å,å¯†ç [,é‚®ç®±][,æ‰‹æœºå·]');\n      setSuccess('');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      const resp = await batchImportStudents({ students });\n      \n      const msg = resp?.message || `æ‰¹é‡å¯¼å…¥å®Œæˆ: æˆåŠŸ ${resp?.success_count ?? students.length} ä¸ª, å¤±è´¥ ${resp?.failed_count ?? 0} ä¸ª`;\n      setSuccess(msg);\n      if (resp?.errors && resp.errors.length > 0) {\n        const preview = resp.errors.slice(0, 5).join('ï¼›');\n        setError(`éƒ¨åˆ†å¯¼å…¥å¤±è´¥ï¼š${preview}${resp.errors.length > 5 ? ' ç­‰' : ''}`);\n      }\n      \n      // åˆ·æ–°ç”¨æˆ·åˆ—è¡¨\n      const usersData = await getUsers(1, 50, 'student');\n      setUsers(usersData.users);\n      setImportData('');\n    } catch (error) {\n      setError(error.response?.data?.error || 'æ‰¹é‡å¯¼å…¥å¤±è´¥');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateProblem = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      if (isEditing && editingProblem) {\n        await updateProblem(editingProblem.id, problemForm);\n        setSuccess('é¢˜ç›®æ›´æ–°æˆåŠŸï¼');\n      } else {\n        await createProblem(problemForm);\n        setSuccess('é¢˜ç›®åˆ›å»ºæˆåŠŸï¼');\n      }\n      \n      // é‡ç½®è¡¨å•\n      setProblemForm({\n        title: '',\n        description: '',\n        test_cases: '',\n        expected_output: '',\n        difficulty: 'easy',\n        time_limit: 1000,\n        memory_limit: 128\n      });\n      \n      setIsEditing(false);\n      setEditingProblem(null);\n      \n      // åˆ·æ–°é¢˜ç›®åˆ—è¡¨\n      const problemsData = await getProblems(1, 50);\n      setProblems(problemsData.problems);\n      \n      // åˆ‡æ¢åˆ°é¢˜ç›®åˆ—è¡¨\n      setActiveSubTab('list');\n      \n    } catch (error) {\n      setError(error.response?.data?.error || (isEditing ? 'æ›´æ–°é¢˜ç›®å¤±è´¥' : 'åˆ›å»ºé¢˜ç›®å¤±è´¥'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditProblem = (problem) => {\n    setEditingProblem(problem);\n    setProblemForm({\n      title: problem.title,\n      description: problem.description,\n      test_cases: problem.test_cases,\n      expected_output: problem.expected_output,\n      difficulty: problem.difficulty,\n      time_limit: problem.time_limit,\n      memory_limit: problem.memory_limit\n    });\n    setIsEditing(true);\n    setActiveSubTab('create');\n  };\n\n  const handleDeleteProblem = async (problemId) => {\n    if (!window.confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¢˜ç›®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      await deleteProblem(problemId);\n      setSuccess('é¢˜ç›®åˆ é™¤æˆåŠŸï¼');\n      \n      // åˆ·æ–°é¢˜ç›®åˆ—è¡¨\n      const problemsData = await getProblems(1, 50);\n      setProblems(problemsData.problems);\n    } catch (error) {\n      setError(error.response?.data?.error || 'åˆ é™¤é¢˜ç›®å¤±è´¥');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCancelEdit = () => {\n    setIsEditing(false);\n    setEditingProblem(null);\n    setProblemForm({\n      title: '',\n      description: '',\n      test_cases: '',\n      expected_output: '',\n      difficulty: 'easy',\n      time_limit: 1000,\n      memory_limit: 128\n    });\n    setActiveSubTab('list');\n  };\n\n  // å­¦ç”Ÿç®¡ç†æ ‡ç­¾é¡µæ¸²æŸ“å‡½æ•°\n  const renderStudentsTab = () => (\n    <div className=\"tab-content\">\n      <div className=\"sub-tabs\">\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'list' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('list')}\n        >\n          å­¦ç”Ÿåˆ—è¡¨\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'add' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('add')}\n        >\n          æ·»åŠ å­¦ç”Ÿ\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'import' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('import')}\n        >\n          æ‰¹é‡å¯¼å…¥\n        </button>\n      </div>\n\n      {activeSubTab === 'list' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>å­¦ç”Ÿåˆ—è¡¨</h2>\n            <button \n              className=\"add-btn\"\n              onClick={() => setActiveSubTab('add')}\n            >\n              æ·»åŠ å­¦ç”Ÿ\n            </button>\n          </div>\n          \n          <div className=\"users-table\">\n            <table>\n              <thead>\n                <tr>\n                  <th>ID</th>\n                  <th>å­¦å·</th>\n                  <th>å§“å</th>\n                  <th>é‚®ç®±</th>\n                  <th>ç­çº§</th>\n                  <th>çŠ¶æ€</th>\n                  <th>æ“ä½œ</th>\n                </tr>\n              </thead>\n              <tbody>\n                {users.map(user => (\n                  <tr key={user.id}>\n                    <td>{user.id}</td>\n                    <td>{user.username}</td>\n                    <td>{user.name}</td>\n                    <td>{user.email || '-'}</td>\n                    <td>{user.class_id || '-'}</td>\n                    <td>\n                      <span className={`status-badge ${user.is_active ? 'active' : 'inactive'}`}>\n                        {user.is_active ? 'æ´»è·ƒ' : 'ç¦ç”¨'}\n                      </span>\n                    </td>\n                    <td>\n                      <button className=\"action-btn edit\" onClick={() => handleEditStudentClick(user)}>ç¼–è¾‘</button>\n                      <button className=\"action-btn delete\" onClick={() => handleDeleteStudent(user.id)}>åˆ é™¤</button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'add' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>âž• æ·»åŠ å­¦ç”Ÿ</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => setActiveSubTab('list')}\n            >\n              â† è¿”å›žå­¦ç”Ÿåˆ—è¡¨\n            </button>\n          </div>\n          \n          <div className=\"add-student-form\">\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>å­¦å·ï¼š<span className=\"required-mark\">*</span> <span className=\"required-text\">å¿…å¡«</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"è¯·è¾“å…¥å­¦å·\"\n                  value={addStudentForm.student_no}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, student_no: e.target.value }))}\n                  required\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>å¯†ç ï¼š<span className=\"required-mark\">*</span> <span className=\"required-text\">å¿…å¡«</span></label>\n                <input \n                  type=\"password\" \n                  placeholder=\"è¯·è¾“å…¥å¯†ç \"\n                  value={addStudentForm.password}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, password: e.target.value }))}\n                  required\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>å§“åï¼š<span className=\"required-mark\">*</span> <span className=\"required-text\">å¿…å¡«</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"è¯·è¾“å…¥å­¦ç”Ÿå§“å\"\n                  value={addStudentForm.name}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, name: e.target.value }))}\n                  required\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>é‚®ç®±ï¼š</label>\n                <input \n                  type=\"email\" \n                  placeholder=\"è¯·è¾“å…¥é‚®ç®±åœ°å€\"\n                  value={addStudentForm.email}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, email: e.target.value }))}\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>æ‰‹æœºå·ï¼š</label>\n                <input \n                  type=\"tel\" \n                  placeholder=\"è¯·è¾“å…¥æ‰‹æœºå·ç \"\n                  value={addStudentForm.phone}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, phone: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>å­¦æ ¡ï¼š</label>\n                <select \n                  value={addStudentForm.school_id} \n                  onChange={(e) => handleAddStudentSchoolChange(e.target.value)}\n                >\n                  <option value=\"\">è¯·é€‰æ‹©å­¦æ ¡</option>\n                  {schools.map(school => (\n                    <option key={school.id} value={school.id}>\n                      {school.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>ä¸“ä¸šï¼š</label>\n                <select \n                  value={addStudentForm.major_id} \n                  onChange={(e) => handleAddStudentMajorChange(e.target.value)}\n                  disabled={!addStudentForm.school_id}\n                >\n                  <option value=\"\">è¯·é€‰æ‹©ä¸“ä¸š</option>\n                  {majors.map(major => (\n                    <option key={major.id} value={major.id}>\n                      {major.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div className=\"form-group\">\n                <label>ç­çº§ï¼š</label>\n                <select \n                  value={addStudentForm.class_id} \n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, class_id: e.target.value }))}\n                  disabled={!addStudentForm.major_id}\n                >\n                  <option value=\"\">è¯·é€‰æ‹©ç­çº§</option>\n                  {classes.map(classItem => (\n                    <option key={classItem.id} value={classItem.id}>\n                      {classItem.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleAddStudent}\n                disabled={loading || !addStudentForm.student_no || !addStudentForm.name || !addStudentForm.password}\n              >\n                {loading ? 'æ·»åŠ ä¸­...' : 'æ·»åŠ å­¦ç”Ÿ'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'import' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>ðŸ“¥ æ‰¹é‡å¯¼å…¥å­¦ç”Ÿ</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => setActiveSubTab('list')}\n            >\n              â† è¿”å›žå­¦ç”Ÿåˆ—è¡¨\n            </button>\n          </div>\n          \n          <div className=\"import-form\">\n            <div className=\"form-group\">\n              <label>é€‰æ‹©å­¦æ ¡:</label>\n              <select \n                value={selectedSchool} \n                onChange={(e) => handleSchoolChange(e.target.value)}\n              >\n                <option value=\"\">è¯·é€‰æ‹©å­¦æ ¡</option>\n                {schools.map(school => (\n                  <option key={school.id} value={school.id}>\n                    {school.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div className=\"form-group\">\n              <label>é€‰æ‹©ä¸“ä¸š:</label>\n              <select \n                value={selectedMajor} \n                onChange={(e) => handleMajorChange(e.target.value)}\n                disabled={!selectedSchool}\n              >\n                <option value=\"\">è¯·é€‰æ‹©ä¸“ä¸š</option>\n                {majors.map(major => (\n                  <option key={major.id} value={major.id}>\n                    {major.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div className=\"form-group\">\n              <label>é€‰æ‹©ç­çº§:</label>\n              <select \n                value={selectedClass} \n                onChange={(e) => setSelectedClass(e.target.value)}\n                disabled={!selectedMajor}\n              >\n                <option value=\"\">è¯·é€‰æ‹©ç­çº§</option>\n                {classes.map(classItem => (\n                  <option key={classItem.id} value={classItem.id}>\n                    {classItem.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div className=\"form-group\">\n              <label>å­¦ç”Ÿæ•°æ® (CSVæ ¼å¼):</label>\n              <textarea\n                value={importData}\n                onChange={(e) => setImportData(e.target.value)}\n                placeholder=\"å­¦å·,å§“å,å¯†ç ,é‚®ç®±,æ‰‹æœºå·&#10;2021001,å¼ ä¸‰,123456,zhangsan@example.com,13800138001&#10;2021002,æŽå››,123456,lisi@example.com,13800138002\"\n                rows={10}\n              />\n              <div className=\"form-help\">\n                <p>CSVæ ¼å¼è¯´æ˜Žï¼šæ¯è¡Œä¸€ä¸ªå­¦ç”Ÿï¼Œå­—æ®µç”¨é€—å·åˆ†éš”</p>\n                <p>å¿…å¡«å­—æ®µï¼šå­¦å·,å§“å,å¯†ç </p>\n                <p>å¯é€‰å­—æ®µï¼šé‚®ç®±,æ‰‹æœºå·</p>\n              </div>\n            </div>\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleBatchImport}\n                disabled={loading || !importData.trim() || !selectedSchool || !selectedMajor || !selectedClass}\n              >\n                {loading ? 'å¯¼å…¥ä¸­...' : 'å¼€å§‹å¯¼å…¥'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  // é¢˜ç›®ç®¡ç†æ ‡ç­¾é¡µæ¸²æŸ“å‡½æ•°\n  const renderProblemsTab = () => (\n    <div className=\"tab-content\">\n      <div className=\"sub-tabs\">\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'list' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('list')}\n        >\n          é¢˜ç›®åˆ—è¡¨\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'create' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('create')}\n        >\n          {isEditing ? 'ç¼–è¾‘é¢˜ç›®' : 'åˆ›å»ºé¢˜ç›®'}\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'ai' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('ai')}\n        >\n          <WhaleIcon size={20} /> AIç”Ÿé¢˜\n        </button>\n      </div>\n\n      {activeSubTab === 'list' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>é¢˜ç›®åˆ—è¡¨</h2>\n            <button \n              className=\"add-btn\"\n              onClick={() => {\n                setIsEditing(false);\n                setEditingProblem(null);\n                setActiveSubTab('create');\n              }}\n            >\n              åˆ›å»ºé¢˜ç›®\n            </button>\n          </div>\n          \n          <div className=\"problems-table\">\n            <table>\n              <thead>\n                <tr>\n                  <th>ID</th>\n                  <th>æ ‡é¢˜</th>\n                  <th>éš¾åº¦</th>\n                  <th>æ—¶é—´é™åˆ¶</th>\n                  <th>å†…å­˜é™åˆ¶</th>\n                  <th>çŠ¶æ€</th>\n                  <th>æ“ä½œ</th>\n                </tr>\n              </thead>\n              <tbody>\n                {problems.map(problem => (\n                  <tr key={problem.id}>\n                    <td>{problem.id}</td>\n                    <td>{problem.title}</td>\n                    <td>\n                      <span className={`difficulty-badge ${problem.difficulty}`}>\n                        {problem.difficulty === 'easy' ? 'ç®€å•' : \n                         problem.difficulty === 'medium' ? 'ä¸­ç­‰' : 'å›°éš¾'}\n                      </span>\n                    </td>\n                    <td>{problem.time_limit}ms</td>\n                    <td>{problem.memory_limit}MB</td>\n                    <td>\n                      <span className={`status-badge ${problem.is_active ? 'active' : 'inactive'}`}>\n                        {problem.is_active ? 'å¯ç”¨' : 'ç¦ç”¨'}\n                      </span>\n                    </td>\n                    <td>\n                      <button \n                        className=\"action-btn edit\"\n                        onClick={() => handleEditProblem(problem)}\n                      >\n                        ç¼–è¾‘\n                      </button>\n                      <button \n                        className=\"action-btn delete\"\n                        onClick={() => handleDeleteProblem(problem.id)}\n                      >\n                        åˆ é™¤\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'create' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>{isEditing ? 'âœï¸ ç¼–è¾‘é¢˜ç›®' : 'âž• åˆ›å»ºé¢˜ç›®'}</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={handleCancelEdit}\n            >\n              â† è¿”å›žé¢˜ç›®åˆ—è¡¨\n            </button>\n          </div>\n          \n          <div className=\"problem-form\">\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>é¢˜ç›®æ ‡é¢˜ï¼š</label>\n                <input \n                  type=\"text\" \n                  placeholder=\"è¯·è¾“å…¥é¢˜ç›®æ ‡é¢˜\"\n                  value={problemForm.title}\n                  onChange={(e) => setProblemForm(prev => ({ ...prev, title: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>éš¾åº¦ç­‰çº§ï¼š</label>\n                <select \n                  value={problemForm.difficulty}\n                  onChange={(e) => setProblemForm(prev => ({ ...prev, difficulty: e.target.value }))}\n                >\n                  <option value=\"easy\">ç®€å•</option>\n                  <option value=\"medium\">ä¸­ç­‰</option>\n                  <option value=\"hard\">å›°éš¾</option>\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>æ—¶é—´é™åˆ¶ (ms)ï¼š</label>\n                <input \n                  type=\"number\" \n                  placeholder=\"1000\"\n                  value={problemForm.time_limit}\n                  onChange={(e) => setProblemForm(prev => ({ ...prev, time_limit: parseInt(e.target.value) }))}\n                  min=\"100\"\n                  max=\"10000\"\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>å†…å­˜é™åˆ¶ (MB)ï¼š</label>\n                <input \n                  type=\"number\" \n                  placeholder=\"128\"\n                  value={problemForm.memory_limit}\n                  onChange={(e) => setProblemForm(prev => ({ ...prev, memory_limit: parseInt(e.target.value) }))}\n                  min=\"16\"\n                  max=\"1024\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-group\">\n              <label>é¢˜ç›®æè¿°ï¼š</label>\n              <textarea\n                placeholder=\"è¯·è¾“å…¥é¢˜ç›®çš„è¯¦ç»†æè¿°\"\n                value={problemForm.description}\n                onChange={(e) => setProblemForm(prev => ({ ...prev, description: e.target.value }))}\n                rows={6}\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label>æµ‹è¯•ç”¨ä¾‹ï¼š</label>\n              <textarea\n                placeholder=\"è¯·è¾“å…¥æµ‹è¯•ç”¨ä¾‹\"\n                value={problemForm.test_cases}\n                onChange={(e) => setProblemForm(prev => ({ ...prev, test_cases: e.target.value }))}\n                rows={4}\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label>æœŸæœ›è¾“å‡ºï¼š</label>\n              <textarea\n                placeholder=\"è¯·è¾“å…¥æœŸæœ›çš„è¾“å‡ºç»“æžœ\"\n                value={problemForm.expected_output}\n                onChange={(e) => setProblemForm(prev => ({ ...prev, expected_output: e.target.value }))}\n                rows={4}\n              />\n            </div>\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleCreateProblem}\n                disabled={loading || !problemForm.title || !problemForm.description || !problemForm.test_cases || !problemForm.expected_output}\n              >\n                {loading ? (isEditing ? 'æ›´æ–°ä¸­...' : 'åˆ›å»ºä¸­...') : (isEditing ? 'æ›´æ–°é¢˜ç›®' : 'åˆ›å»ºé¢˜ç›®')}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'ai' && (\n        <div className=\"section-content\">\n          <AIProblemGenerationPage />\n        </div>\n      )}\n    </div>\n  );\n\n  // è¯¾ç¨‹ç®¡ç†æ ‡ç­¾é¡µæ¸²æŸ“å‡½æ•°\n  const renderCoursesTab = () => (\n    <div className=\"tab-content\">\n      <div className=\"sub-tabs\">\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'list' ? 'active' : ''}`}\n          onClick={() => {\n            setActiveSubTab('list');\n            // å¦‚æžœå½“å‰åœ¨è¯¾ç¨‹è¯¦æƒ…é¡µï¼Œæ¸…é™¤è¯¾ç¨‹è¯¦æƒ…çŠ¶æ€\n            if (activeSubTab === 'detail') {\n              setEditingCourse(null);\n            }\n            // æ¸…é™¤æ·»åŠ å­¦ç”Ÿä¸Šä¸‹æ–‡\n            setAddingStudentContext('');\n          }}\n        >\n          è¯¾ç¨‹åˆ—è¡¨\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'add' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('add')}\n        >\n          æ·»åŠ è¯¾ç¨‹\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'detail' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('detail')}\n          style={{ display: (editingCourse && activeSubTab === 'detail') ? 'inline-block' : 'none' }}\n        >\n          è¯¾ç¨‹è¯¦æƒ…\n        </button>\n        <button \n          className={`sub-tab-btn ${activeSubTab === 'add-student-to-course' ? 'active' : ''}`}\n          onClick={() => setActiveSubTab('add-student-to-course')}\n          style={{ display: (editingCourse && activeSubTab === 'detail') ? 'inline-block' : 'none' }}\n        >\n          æ·»åŠ å­¦ç”Ÿ\n        </button>\n      </div>\n\n      {activeSubTab === 'list' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>æˆ‘çš„è¯¾ç¨‹</h2>\n            <button \n              className=\"add-btn\"\n              onClick={() => {\n                setActiveSubTab('add');\n                // å¦‚æžœå½“å‰åœ¨è¯¾ç¨‹è¯¦æƒ…é¡µï¼Œæ¸…é™¤è¯¾ç¨‹è¯¦æƒ…çŠ¶æ€\n                if (activeSubTab === 'detail') {\n                  setEditingCourse(null);\n                }\n                // æ¸…é™¤æ·»åŠ å­¦ç”Ÿä¸Šä¸‹æ–‡\n                setAddingStudentContext('');\n              }}\n            >\n              æ·»åŠ è¯¾ç¨‹\n            </button>\n          </div>\n          \n          <div className=\"courses-grid\">\n            {courses.length === 0 ? (\n              <div className=\"empty-state\">\n                <p>æš‚æ— è¯¾ç¨‹ï¼Œè¯·æ·»åŠ æ‚¨çš„ç¬¬ä¸€ä¸ªæ•™å­¦ç­</p>\n                <button \n                  className=\"submit-btn\"\n                  onClick={() => setActiveSubTab('add')}\n                >\n                  æ·»åŠ è¯¾ç¨‹\n                </button>\n              </div>\n            ) : (\n              courses.map(course => (\n                <div key={course.id} className=\"course-card\">\n                  <div className=\"course-header\">\n                    <h3>{course.name}</h3>\n                    <span className=\"course-status active\">è¿›è¡Œä¸­</span>\n                  </div>\n                  <div className=\"course-info\">\n                    <p><strong>æ•™å­¦ç­ï¼š</strong>{course.class_name}</p>\n                    <p><strong>ä¸“ä¸šï¼š</strong>{course.major_name}</p>\n                    <p><strong>å­¦æ ¡ï¼š</strong>{course.school_name}</p>\n                    <p><strong>å­¦ç”Ÿæ•°é‡ï¼š</strong>{course.student_count || 0}äºº</p>\n                    <p><strong>åˆ›å»ºæ—¶é—´ï¼š</strong>{formatDate(course.created_at)}</p>\n                  </div>\n                  <div className=\"course-actions\">\n                    <button \n                      className=\"action-btn primary\"\n                      onClick={() => handleViewCourseDetail(course.id)}\n                    >\n                      æŸ¥çœ‹è¯¦æƒ…\n                    </button>\n                    <button \n                      className=\"action-btn edit\"\n                      onClick={() => handleEditCourse(course)}\n                    >\n                      ç¼–è¾‘\n                    </button>\n                    <button \n                      className=\"action-btn delete\"\n                      onClick={() => handleDeleteCourse(course.id)}\n                    >\n                      åˆ é™¤\n                    </button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'add' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>{isEditingCourse ? 'âœï¸ ç¼–è¾‘è¯¾ç¨‹' : 'âž• æ·»åŠ è¯¾ç¨‹'}</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => {\n                setActiveSubTab('list');\n                setIsEditingCourse(false);\n                setEditingCourse(null);\n                setCourseForm({\n                  name: '',\n                  description: '',\n                  class_id: '',\n                  major_id: '',\n                  school_id: ''\n                });\n              }}\n            >\n              â† è¿”å›žè¯¾ç¨‹åˆ—è¡¨\n            </button>\n          </div>\n          \n          <div className=\"course-form\">\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>è¯¾ç¨‹åç§°ï¼š<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"è¯·è¾“å…¥è¯¾ç¨‹åç§°\"\n                  value={courseForm.name}\n                  onChange={(e) => setCourseForm(prev => ({ ...prev, name: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>è¯¾ç¨‹æè¿°ï¼š</label>\n                <textarea\n                  placeholder=\"è¯·è¾“å…¥è¯¾ç¨‹æè¿°\"\n                  value={courseForm.description}\n                  onChange={(e) => setCourseForm(prev => ({ ...prev, description: e.target.value }))}\n                  rows={3}\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>å­¦æ ¡ï¼š<span className=\"required-mark\">*</span></label>\n                <select \n                  value={courseForm.school_id} \n                  onChange={(e) => handleCourseSchoolChange(e.target.value)}\n                >\n                  <option value=\"\">è¯·é€‰æ‹©å­¦æ ¡</option>\n                  {schools.map(school => (\n                    <option key={school.id} value={school.id}>\n                      {school.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div className=\"form-group\">\n                <label>ä¸“ä¸šï¼š<span className=\"required-mark\">*</span></label>\n                <select \n                  value={courseForm.major_id} \n                  onChange={(e) => handleCourseMajorChange(e.target.value)}\n                  disabled={!courseForm.school_id}\n                >\n                  <option value=\"\">è¯·é€‰æ‹©ä¸“ä¸š</option>\n                  {majors.map(major => (\n                    <option key={major.id} value={major.id}>\n                      {major.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>æ•™å­¦ç­ï¼š<span className=\"required-mark\">*</span></label>\n                <select \n                  value={courseForm.class_id} \n                  onChange={(e) => setCourseForm(prev => ({ ...prev, class_id: e.target.value }))}\n                  disabled={!courseForm.major_id}\n                >\n                  <option value=\"\">è¯·é€‰æ‹©æ•™å­¦ç­</option>\n                  {classes.map(classItem => (\n                    <option key={classItem.id} value={classItem.id}>\n                      {classItem.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            \n                            <div className=\"form-actions\">\n                  <button \n                    className=\"submit-btn\"\n                    onClick={handleCreateCourse}\n                    disabled={loading || !courseForm.name || !courseForm.school_id || !courseForm.major_id || !courseForm.class_id}\n                  >\n                    {loading ? (isEditingCourse ? 'æ›´æ–°ä¸­...' : 'åˆ›å»ºä¸­...') : (isEditingCourse ? 'æ›´æ–°è¯¾ç¨‹' : 'åˆ›å»ºè¯¾ç¨‹')}\n                  </button>\n                </div>\n          </div>\n        </div>\n      )}\n\n\n\n      {activeSubTab === 'create-assignment' && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>{isEditingAssignment ? 'âœï¸ ç¼–è¾‘ä½œä¸š' : 'ðŸ“ å¸ƒç½®ä½œä¸š'}</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => {\n                // æ ¹æ®ä¸Šä¸‹æ–‡æ™ºèƒ½è¿”å›ž\n                if (editingAssignmentContext === 'course-detail') {\n                  setActiveSubTab('detail');\n                } else {\n                  setActiveSubTab('list');\n                }\n                setIsEditingAssignment(false);\n                setEditingAssignment(null);\n                setEditingAssignmentContext('');\n                setAssignmentForm({\n                  name: '',\n                  description: '',\n                  requirements: '',\n                  due_date: '',\n                  course_id: '',\n                  problem_ids: []\n                });\n              }}\n            >\n              {editingAssignmentContext === 'course-detail' ? 'â† è¿”å›žè¯¾ç¨‹è¯¦æƒ…' : 'â† è¿”å›žè¯¾ç¨‹åˆ—è¡¨'}\n            </button>\n          </div>\n          \n          <div className=\"assignment-form\">\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>ä½œä¸šåç§°ï¼š<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"è¯·è¾“å…¥ä½œä¸šåç§°\"\n                  value={assignmentForm.name}\n                  onChange={(e) => setAssignmentForm(prev => ({ ...prev, name: e.target.value }))}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>è¯¾ç¨‹ï¼š</label>\n                {editingAssignmentContext === 'course-detail' && editingCourse ? (\n                  <input \n                    type=\"text\" \n                    value={editingCourse.name}\n                    disabled\n                    className=\"disabled-input\"\n                  />\n                ) : (\n                  <>\n                    <span className=\"required-mark\">*</span>\n                    <select \n                      value={assignmentForm.course_id} \n                      onChange={(e) => setAssignmentForm(prev => ({ ...prev, course_id: e.target.value }))}\n                    >\n                      <option value=\"\">è¯·é€‰æ‹©è¯¾ç¨‹</option>\n                      {courses.map(course => (\n                        <option key={course.id} value={course.id}>\n                          {course.name} - {course.class_name}\n                        </option>\n                      ))}\n                    </select>\n                  </>\n                )}\n              </div>\n            </div>\n            \n            <div className=\"form-group\">\n              <label>ä½œä¸šæè¿°ï¼š<span className=\"required-mark\">*</span></label>\n              <textarea\n                placeholder=\"è¯·è¾“å…¥ä½œä¸šæè¿°\"\n                value={assignmentForm.description}\n                onChange={(e) => setAssignmentForm(prev => ({ ...prev, description: e.target.value }))}\n                rows={4}\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label>ä½œä¸šè¦æ±‚ï¼š<span className=\"required-mark\">*</span></label>\n              <textarea\n                placeholder=\"è¯·è¾“å…¥ä½œä¸šè¦æ±‚\"\n                value={assignmentForm.requirements}\n                onChange={(e) => setAssignmentForm(prev => ({ ...prev, requirements: e.target.value }))}\n                rows={4}\n              />\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>æˆªæ­¢æ—¶é—´ï¼š<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"datetime-local\" \n                  value={assignmentForm.due_date}\n                  onChange={(e) => setAssignmentForm(prev => ({ ...prev, due_date: e.target.value }))}\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-group\">\n              <label>é€‰æ‹©é¢˜ç›®ï¼š</label>\n              <div className=\"problem-selection\">\n                {problems.map(problem => (\n                  <label key={problem.id} className=\"problem-checkbox\">\n                    <input \n                      type=\"checkbox\" \n                      value={problem.id}\n                      checked={assignmentForm.problem_ids.includes(problem.id)}\n                      onChange={(e) => {\n                        if (e.target.checked) {\n                          setAssignmentForm(prev => ({ \n                            ...prev, \n                            problem_ids: [...prev.problem_ids, problem.id] \n                          }));\n                        } else {\n                          setAssignmentForm(prev => ({ \n                            ...prev, \n                            problem_ids: prev.problem_ids.filter(id => id !== problem.id) \n                          }));\n                        }\n                      }}\n                    />\n                    <span className=\"problem-title\">{problem.title}</span>\n                    <span className={`difficulty-badge ${problem.difficulty}`}>\n                      {problem.difficulty === 'easy' ? 'ç®€å•' : \n                       problem.difficulty === 'medium' ? 'ä¸­ç­‰' : 'å›°éš¾'}\n                    </span>\n                  </label>\n                ))}\n              </div>\n            </div>\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleCreateAssignment}\n                disabled={loading || !assignmentForm.name || !assignmentForm.description || !assignmentForm.requirements || !assignmentForm.due_date || !assignmentForm.course_id}\n              >\n                {loading ? (isEditingAssignment ? 'æ›´æ–°ä¸­...' : 'åˆ›å»ºä¸­...') : (isEditingAssignment ? 'æ›´æ–°ä½œä¸š' : 'å¸ƒç½®ä½œä¸š')}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeSubTab === 'detail' && editingCourse && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h2>ðŸ“š è¯¾ç¨‹è¯¦æƒ…ï¼š{editingCourse.name}</h2>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => {\n                setActiveSubTab('list');\n                setEditingCourse(null);\n              }}\n            >\n              â† è¿”å›žè¯¾ç¨‹åˆ—è¡¨\n            </button>\n          </div>\n          \n          <div className=\"course-detail\">\n            <div className=\"course-info-section\">\n              <h3>è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯</h3>\n              <div className=\"info-grid\">\n                <div className=\"info-item\">\n                  <label>è¯¾ç¨‹åç§°ï¼š</label>\n                  <span>{editingCourse.name}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>è¯¾ç¨‹æè¿°ï¼š</label>\n                  <span>{editingCourse.description}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>æ•™å­¦ç­ï¼š</label>\n                  <span>{editingCourse.class_name}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>ä¸“ä¸šï¼š</label>\n                  <span>{editingCourse.major_name}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>å­¦æ ¡ï¼š</label>\n                  <span>{editingCourse.school_name}</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>å­¦ç”Ÿæ•°é‡ï¼š</label>\n                  <span>{editingCourse.student_count || 0}äºº</span>\n                </div>\n                <div className=\"info-item\">\n                  <label>åˆ›å»ºæ—¶é—´ï¼š</label>\n                  <span>{formatDate(editingCourse.created_at)}</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"course-students-section\">\n              <div className=\"section-header\">\n                <h3>æ•™å­¦ç­å­¦ç”Ÿ</h3>\n                <button \n                  className=\"add-btn\"\n                  onClick={() => {\n                    // è®¾ç½®æ·»åŠ å­¦ç”Ÿä¸Šä¸‹æ–‡ä¸ºè¯¾ç¨‹è¯¦æƒ…é¡µ\n                    setAddingStudentContext('course-detail');\n                    setActiveSubTab('add-student-to-course');\n                  }}\n                >\n                  æ·»åŠ å­¦ç”Ÿ\n                </button>\n              </div>\n              <div className=\"students-table\">\n                <table>\n                  <thead>\n                    <tr>\n                      <th>å­¦å·</th>\n                      <th>å§“å</th>\n                      <th>é‚®ç®±</th>\n                      <th>çŠ¶æ€</th>\n                      <th>æ“ä½œ</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {(() => {\n                      // èŽ·å–å½“å‰è¯¾ç¨‹çš„æ‰€æœ‰å­¦ç”Ÿ\n                      const courseStudents = [];\n                      \n                      // 1. æ·»åŠ åŽŸæœ¬å±žäºŽè¯¥æ•™å­¦ç­çš„å­¦ç”Ÿ\n                      const originalStudents = users.filter(user => \n                        user.class_id === editingCourse.class_id && user.role === 'student'\n                      );\n                      courseStudents.push(...originalStudents);\n                      \n                      // 2. æ·»åŠ é€šè¿‡å…³è”å…³ç³»æ·»åŠ çš„å­¦ç”Ÿ\n                      const relatedStudents = studentClassRelations\n                        .filter(relation => relation.course_id === editingCourse.id)\n                        .map(relation => {\n                          // æŸ¥æ‰¾å­¦ç”Ÿçš„å®Œæ•´ä¿¡æ¯\n                          const studentInfo = users.find(user => user.id === relation.student_id);\n                          return {\n                            ...studentInfo,\n                            // ä½¿ç”¨å…³è”å…³ç³»ä¸­çš„ä¿¡æ¯ä½œä¸ºåŽå¤‡\n                            name: studentInfo ? studentInfo.name : relation.student_name,\n                            username: studentInfo ? studentInfo.username : relation.student_no,\n                            // æ ‡è®°è¿™æ˜¯é€šè¿‡å…³è”å…³ç³»æ·»åŠ çš„å­¦ç”Ÿ\n                            isRelatedStudent: true,\n                            relationId: relation.student_id + '_' + relation.class_id\n                          };\n                        });\n                      \n                      // åˆå¹¶å­¦ç”Ÿåˆ—è¡¨ï¼ŒåŽ»é‡\n                      const allStudents = [...originalStudents, ...relatedStudents];\n                      const uniqueStudents = allStudents.filter((student, index, self) => \n                        index === self.findIndex(s => s.id === student.id)\n                      );\n                      \n                      return uniqueStudents.map(student => (\n                        <tr key={student.relationId || student.id}>\n                          <td>{student.username}</td>\n                          <td>{student.name}</td>\n                          <td>{student.email || '-'}</td>\n                          <td>\n                            <span className={`status-badge ${student.is_active ? 'active' : 'inactive'}`}>\n                              {student.is_active ? 'æ´»è·ƒ' : 'ç¦ç”¨'}\n                            </span>\n                          </td>\n                          <td>\n                            <button \n                              className=\"action-btn edit\"\n                              onClick={() => handleEditStudentClick(student)}\n                            >\n                              ç¼–è¾‘\n                            </button>\n                            {student.isRelatedStudent && (\n                              <button \n                                className=\"action-btn delete\"\n                                onClick={() => handleRemoveStudentFromCourse(student.relationId)}\n                              >\n                                ç§»é™¤\n                              </button>\n                            )}\n                          </td>\n                        </tr>\n                      ));\n                    })()}\n                  </tbody>\n                </table>\n                {(() => {\n                  // èŽ·å–å½“å‰è¯¾ç¨‹çš„æ‰€æœ‰å­¦ç”Ÿæ•°é‡\n                  const originalStudents = users.filter(user => \n                    user.class_id === editingCourse.class_id && user.role === 'student'\n                  );\n                  const relatedStudents = studentClassRelations.filter(relation => \n                    relation.course_id === editingCourse.id\n                  );\n                  const totalStudents = originalStudents.length + relatedStudents.length;\n                  \n                  if (totalStudents === 0) {\n                    return (\n                      <div className=\"empty-state\">\n                        <p>è¯¥æ•™å­¦ç­æš‚æ— å­¦ç”Ÿ</p>\n                      </div>\n                    );\n                  }\n                  return null;\n                })()}\n              </div>\n            </div>\n\n            <div className=\"course-assignments-section\">\n              <div className=\"section-header\">\n                <h3>å·²å¸ƒç½®ä½œä¸š</h3>\n                <button \n                  className=\"add-btn\"\n                  onClick={() => {\n                    // è‡ªåŠ¨è®¾ç½®å½“å‰è¯¾ç¨‹IDåˆ°ä½œä¸šè¡¨å•\n                    setAssignmentForm(prev => ({\n                      ...prev,\n                      course_id: editingCourse.id\n                    }));\n                    // è®¾ç½®ç¼–è¾‘ä½œä¸šä¸Šä¸‹æ–‡ä¸ºè¯¾ç¨‹è¯¦æƒ…é¡µ\n                    setEditingAssignmentContext('course-detail');\n                    setActiveSubTab('create-assignment');\n                  }}\n                >\n                  å¸ƒç½®ä½œä¸š\n                </button>\n              </div>\n              <div className=\"assignments-table\">\n                <table>\n                  <thead>\n                    <tr>\n                      <th>ä½œä¸šåç§°</th>\n                      <th>æè¿°</th>\n                      <th>æˆªæ­¢æ—¶é—´</th>\n                      <th>çŠ¶æ€</th>\n                      <th>æ“ä½œ</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {assignments.filter(assignment => assignment.course_id === editingCourse.id).map(assignment => (\n                      <tr key={assignment.id}>\n                        <td>{assignment.name}</td>\n                        <td>{assignment.description}</td>\n                        <td>{formatDate(assignment.due_date)}</td>\n                        <td>\n                          <span className={`status-badge ${assignment.is_active ? 'active' : 'inactive'}`}>\n                            {assignment.is_active ? 'è¿›è¡Œä¸­' : 'å·²ç»“æŸ'}\n                          </span>\n                        </td>\n                        <td>\n                          <button \n                            className=\"action-btn edit\"\n                            onClick={() => handleEditAssignment(assignment)}\n                          >\n                            ç¼–è¾‘\n                          </button>\n                          <button \n                            className=\"action-btn delete\"\n                            onClick={() => handleDeleteAssignment(assignment.id)}\n                          >\n                            åˆ é™¤\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n                {assignments.filter(assignment => assignment.course_id === editingCourse.id).length === 0 && (\n                  <div className=\"empty-state\">\n                    <p>è¯¥è¯¾ç¨‹æš‚æ— ä½œä¸š</p>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* ä½œä¸šåˆ›å»ºè¡¨å• */}\n            {activeSubTab === 'create-assignment' && (\n              <div className=\"course-assignment-form\">\n                <div className=\"section-header\">\n                  <h3>ðŸ“ å¸ƒç½®ä½œä¸š</h3>\n                  <button \n                    className=\"secondary-btn\"\n                    onClick={() => setActiveSubTab('detail')}\n                  >\n                    â† è¿”å›žè¯¾ç¨‹è¯¦æƒ…\n                  </button>\n                </div>\n                \n                <div className=\"assignment-form\">\n                  <div className=\"form-row\">\n                    <div className=\"form-group\">\n                      <label>ä½œä¸šåç§°ï¼š<span className=\"required-mark\">*</span></label>\n                      <input \n                        type=\"text\" \n                        placeholder=\"è¯·è¾“å…¥ä½œä¸šåç§°\"\n                        value={assignmentForm.name}\n                        onChange={(e) => setAssignmentForm(prev => ({ ...prev, name: e.target.value }))}\n                      />\n                    </div>\n                    \n                    <div className=\"form-group\">\n                      <label>è¯¾ç¨‹ï¼š</label>\n                      <input \n                        type=\"text\" \n                        value={editingCourse.name}\n                        disabled\n                        className=\"disabled-input\"\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"form-group\">\n                    <label>ä½œä¸šæè¿°ï¼š<span className=\"required-mark\">*</span></label>\n                    <textarea\n                      placeholder=\"è¯·è¾“å…¥ä½œä¸šæè¿°\"\n                      value={assignmentForm.description}\n                      onChange={(e) => setAssignmentForm(prev => ({ ...prev, description: e.target.value }))}\n                      rows={4}\n                    />\n                  </div>\n                  \n                  <div className=\"form-group\">\n                    <label>ä½œä¸šè¦æ±‚ï¼š<span className=\"required-mark\">*</span></label>\n                    <textarea\n                      placeholder=\"è¯·è¾“å…¥ä½œä¸šè¦æ±‚\"\n                      value={assignmentForm.requirements}\n                      onChange={(e) => setAssignmentForm(prev => ({ ...prev, requirements: e.target.value }))}\n                      rows={4}\n                    />\n                  </div>\n                  \n                  <div className=\"form-row\">\n                    <div className=\"form-group\">\n                      <label>æˆªæ­¢æ—¶é—´ï¼š<span className=\"required-mark\">*</span></label>\n                      <input \n                        type=\"datetime-local\" \n                        value={assignmentForm.due_date}\n                        onChange={(e) => setAssignmentForm(prev => ({ ...prev, due_date: e.target.value }))}\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"form-group\">\n                    <label>é€‰æ‹©é¢˜ç›®ï¼š</label>\n                    <div className=\"problem-selection\">\n                      {problems.map(problem => (\n                        <label key={problem.id} className=\"problem-checkbox\">\n                          <input \n                            type=\"checkbox\" \n                            value={problem.id}\n                            checked={assignmentForm.problem_ids.includes(problem.id)}\n                            onChange={(e) => {\n                              if (e.target.checked) {\n                                setAssignmentForm(prev => ({ \n                                  ...prev, \n                                  problem_ids: [...prev.problem_ids, problem.id] \n                                }));\n                              } else {\n                                setAssignmentForm(prev => ({ \n                                  ...prev, \n                                  problem_ids: prev.problem_ids.filter(id => id !== problem.id) \n                                }));\n                              }\n                            }}\n                          />\n                          <span className=\"problem-title\">{problem.title}</span>\n                          <span className={`difficulty-badge ${problem.difficulty}`}>\n                            {problem.difficulty === 'easy' ? 'ç®€å•' : \n                             problem.difficulty === 'medium' ? 'ä¸­ç­‰' : 'å›°éš¾'}\n                          </span>\n                        </label>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  <div className=\"form-actions\">\n                    <button \n                      className=\"submit-btn\"\n                      onClick={handleCreateAssignment}\n                      disabled={loading || !assignmentForm.name || !assignmentForm.description || !assignmentForm.requirements || !assignmentForm.due_date || !assignmentForm.course_id}\n                    >\n                      {loading ? 'åˆ›å»ºä¸­...' : 'å¸ƒç½®ä½œä¸š'}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n\n\n\n          </div>\n        </div>\n      )}\n\n      {/* æ·»åŠ å­¦ç”Ÿåˆ°è¯¾ç¨‹çš„è¡¨å• */}\n      {activeSubTab === 'add-student-to-course' && editingCourse && (\n        <div className=\"section-content\">\n          <div className=\"section-header\">\n            <h3>ðŸ‘¥ æ·»åŠ å­¦ç”Ÿåˆ°è¯¾ç¨‹ï¼š{editingCourse.name}</h3>\n            <p className=\"form-description\">è¯·è¾“å…¥å·²æ³¨å†Œå­¦ç”Ÿçš„å­¦å·å’Œå§“åï¼Œå°†å…¶æ·»åŠ åˆ°å½“å‰æ•™å­¦ç­</p>\n            <button \n              className=\"secondary-btn\"\n              onClick={() => setActiveSubTab('detail')}\n            >\n              â† è¿”å›žè¯¾ç¨‹è¯¦æƒ…\n            </button>\n          </div>\n          \n          <div className=\"add-student-form\">\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>å­¦å·ï¼š<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"è¯·è¾“å…¥å­¦å·\"\n                  value={addStudentForm.student_no}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, student_no: e.target.value }))}\n                  required\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>å§“åï¼š<span className=\"required-mark\">*</span></label>\n                <input \n                  type=\"text\" \n                  placeholder=\"è¯·è¾“å…¥å­¦ç”Ÿå§“å\"\n                  value={addStudentForm.name}\n                  onChange={(e) => setAddStudentForm(prev => ({ ...prev, name: e.target.value }))}\n                  required\n                />\n              </div>\n            </div>\n            \n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>æ•™å­¦ç­ï¼š</label>\n                <input \n                  type=\"text\" \n                  value={editingCourse.class_name}\n                  disabled\n                  className=\"disabled-input\"\n                />\n              </div>\n            </div>\n            \n\n            \n\n            \n            <div className=\"form-actions\">\n              <button \n                className=\"submit-btn\"\n                onClick={handleAddStudentToCourse}\n                disabled={loading || !addStudentForm.student_no || !addStudentForm.name}\n              >\n                {loading ? 'æ·»åŠ ä¸­...' : 'æ·»åŠ å­¦ç”Ÿ'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  // å¤„ç†æ·»åŠ å­¦ç”Ÿæ—¶çš„å­¦æ ¡é€‰æ‹©å˜åŒ–\n  const handleAddStudentSchoolChange = async (schoolId) => {\n    setAddStudentForm(prev => ({ \n      ...prev, \n      school_id: schoolId,\n      major_id: '',\n      class_id: ''\n    }));\n    \n    if (schoolId) {\n      try {\n        const majorsData = await getMajors(schoolId);\n        setMajors(majorsData);\n      } catch (error) {\n        console.error('Error fetching majors:', error);\n      }\n    } else {\n      setMajors([]);\n    }\n  };\n\n  // å¤„ç†æ·»åŠ å­¦ç”Ÿæ—¶çš„ä¸“ä¸šé€‰æ‹©å˜åŒ–\n  const handleAddStudentMajorChange = async (majorId) => {\n    setAddStudentForm(prev => ({ \n      ...prev, \n      major_id: majorId,\n      class_id: ''\n    }));\n    \n    if (majorId) {\n      try {\n        const classesData = await getClasses(majorId);\n        setClasses(classesData);\n      } catch (error) {\n        console.error('Error fetching classes:', error);\n      }\n    } else {\n      setClasses([]);\n    }\n  };\n\n  // å¤„ç†æ·»åŠ å­¦ç”Ÿ\n  const handleAddStudent = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      await registerStudent(addStudentForm);\n      \n      setSuccess('å­¦ç”Ÿæ·»åŠ æˆåŠŸï¼');\n      \n      // é‡ç½®è¡¨å•\n      setAddStudentForm({\n        student_no: '',\n        name: '',\n        password: '',\n        email: '',\n        phone: '',\n        school_id: '',\n        major_id: '',\n        class_id: ''\n      });\n      \n      // åˆ·æ–°ç”¨æˆ·åˆ—è¡¨\n      const usersData = await getUsers(1, 50, 'student');\n      setUsers(usersData.users);\n      \n      // åˆ‡æ¢åˆ°å­¦ç”Ÿåˆ—è¡¨\n      setActiveSubTab('list');\n      \n    } catch (error) {\n      setError(error.response?.data?.error || 'æ·»åŠ å­¦ç”Ÿå¤±è´¥');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // å¤„ç†å‘è¯¾ç¨‹æ·»åŠ å­¦ç”Ÿ\n  const handleAddStudentToCourse = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      // æŸ¥æ‰¾å­¦ç”Ÿæ˜¯å¦å·²å­˜åœ¨\n      const existingStudent = users.find(user => \n        user.username === addStudentForm.student_no && \n        user.name === addStudentForm.name &&\n        user.role === 'student'\n      );\n      \n      if (!existingStudent) {\n        setError('æœªæ‰¾åˆ°è¯¥å­¦ç”Ÿï¼Œè¯·ç¡®è®¤å­¦å·å’Œå§“åæ˜¯å¦æ­£ç¡®');\n        return;\n      }\n      \n      // æ£€æŸ¥å­¦ç”Ÿæ˜¯å¦å·²ç»åœ¨è¯¥æ•™å­¦ç­ä¸­\n      // ç”±äºŽä¸€ä¸ªå­¦ç”Ÿå¯ä»¥å±žäºŽå¤šä¸ªæ•™å­¦ç­ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥å­¦ç”Ÿæ˜¯å¦å·²ç»åœ¨è¯¥è¯¾ç¨‹çš„æ•™å­¦ç­ä¸­\n      const isAlreadyInClass = users.some(user => \n        user.id === existingStudent.id && \n        user.class_id === editingCourse.class_id\n      );\n      \n      if (isAlreadyInClass) {\n        setError('è¯¥å­¦ç”Ÿå·²ç»åœ¨è¯¥æ•™å­¦ç­ä¸­');\n        return;\n      }\n      \n      // æ£€æŸ¥å­¦ç”Ÿæ˜¯å¦å·²ç»é€šè¿‡å…³è”å…³ç³»æ·»åŠ åˆ°è¯¥è¯¾ç¨‹\n      const isAlreadyRelated = studentClassRelations.some(relation => \n        relation.student_id === existingStudent.id && \n        relation.course_id === editingCourse.id\n      );\n      \n      if (isAlreadyRelated) {\n        setError('è¯¥å­¦ç”Ÿå·²ç»åœ¨è¯¥è¯¾ç¨‹ä¸­');\n        return;\n      }\n      \n      // ä½¿ç”¨APIæ·»åŠ å­¦ç”Ÿåˆ°è¯¾ç¨‹\n      try {\n        await addStudentToCourse(editingCourse.id, {\n          student_id: existingStudent.id,\n          class_id: editingCourse.class_id\n        });\n        \n        setSuccess('å­¦ç”Ÿå·²æˆåŠŸæ·»åŠ åˆ°è¯¾ç¨‹ï¼');\n        \n        // é‡æ–°åŠ è½½è¯¾ç¨‹å­¦ç”Ÿæ•°æ®\n        const courseStudentsData = await getCourseStudents(editingCourse.id);\n        if (courseStudentsData && courseStudentsData.length > 0) {\n          const apiRelations = courseStudentsData.map(student => ({\n            student_id: student.student_id,\n            class_id: student.class_id,\n            course_id: editingCourse.id,\n            student_name: student.student_name,\n            student_no: student.student_no,\n            added_at: student.added_at || new Date().toISOString()\n          }));\n          setStudentClassRelations(apiRelations);\n        }\n      } catch (apiError) {\n        console.error('æ·»åŠ å­¦ç”Ÿåˆ°è¯¾ç¨‹å¤±è´¥:', apiError);\n        setError(apiError.response?.data?.error || 'æ·»åŠ å­¦ç”Ÿå¤±è´¥');\n        return;\n      }\n      \n      // é‡ç½®è¡¨å•\n      setAddStudentForm({\n        student_no: '',\n        name: '',\n        password: '',\n        email: '',\n        phone: '',\n        school_id: '',\n        major_id: '',\n        class_id: ''\n      });\n      \n      // è¿”å›žåˆ°è¯¾ç¨‹è¯¦æƒ…é¡µ\n      setActiveSubTab('detail');\n      \n    } catch (error) {\n      setError(error.response?.data?.error || 'æ·»åŠ å­¦ç”Ÿå¤±è´¥');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // å¤„ç†ä»Žè¯¾ç¨‹ä¸­ç§»é™¤å­¦ç”Ÿ\n  const handleRemoveStudentFromCourse = async (relationId) => {\n    if (!window.confirm('ç¡®å®šè¦ä»Žè¯¥è¯¾ç¨‹ä¸­ç§»é™¤è¯¥å­¦ç”Ÿå—ï¼Ÿ')) return;\n    \n    try {\n      // è§£æžrelationIdèŽ·å–å­¦ç”ŸIDå’Œè¯¾ç¨‹ID\n      const [studentId] = relationId.split('_');\n      \n      // ä½¿ç”¨APIä»Žè¯¾ç¨‹ä¸­ç§»é™¤å­¦ç”Ÿ\n      try {\n        await removeStudentFromCourse(editingCourse.id, studentId);\n        setSuccess('å­¦ç”Ÿå·²ä»Žè¯¾ç¨‹ä¸­ç§»é™¤');\n        \n        // é‡æ–°åŠ è½½è¯¾ç¨‹å­¦ç”Ÿæ•°æ®\n        const courseStudentsData = await getCourseStudents(editingCourse.id);\n        if (courseStudentsData && courseStudentsData.length > 0) {\n          const apiRelations = courseStudentsData.map(student => ({\n            student_id: student.student_id,\n            class_id: student.class_id,\n            course_id: editingCourse.id,\n            student_name: student.student_name,\n            student_no: student.student_no,\n            added_at: student.added_at || new Date().toISOString()\n          }));\n          setStudentClassRelations(apiRelations);\n        } else {\n          setStudentClassRelations([]);\n        }\n      } catch (apiError) {\n        console.error('ä»Žè¯¾ç¨‹ä¸­ç§»é™¤å­¦ç”Ÿå¤±è´¥:', apiError);\n        setError(apiError.response?.data?.error || 'ç§»é™¤å­¦ç”Ÿå¤±è´¥');\n        return;\n      }\n    } catch (error) {\n      setError('ç§»é™¤å­¦ç”Ÿå¤±è´¥');\n    }\n  };\n\n  // å­¦ç”Ÿç¼–è¾‘/åˆ é™¤ç›¸å…³\n  const handleEditStudentClick = (user) => {\n    setEditingUser(user);\n    setEditForm({\n      email: user.email || '',\n      phone: user.phone || '',\n      school_id: user.school_id || '',\n      major_id: user.major_id || '',\n      class_id: user.class_id || '',\n      new_password: ''\n    });\n    setError('');\n    setSuccess('');\n  };\n\n  const handleSaveStudent = async () => {\n    if (!editingUser) return;\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      await updateUser(editingUser.id, editForm);\n      setSuccess('å­¦ç”Ÿä¿¡æ¯å·²æ›´æ–°');\n      // åˆ·æ–°åˆ—è¡¨\n      const usersData = await getUsers(1, 50, 'student');\n      setUsers(usersData.users);\n      setEditingUser(null);\n    } catch (error) {\n      setError(error.response?.data?.error || 'æ›´æ–°å­¦ç”Ÿä¿¡æ¯å¤±è´¥');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCancelEditStudent = () => {\n    setEditingUser(null);\n    setEditForm({ email: '', phone: '', school_id: '', major_id: '', class_id: '', new_password: '' });\n  };\n\n  const handleDeleteStudent = async (userId) => {\n    if (!window.confirm('ç¡®å®šè¦åˆ é™¤è¯¥å­¦ç”Ÿå—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')) return;\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      await deleteUser(userId);\n      setSuccess('å­¦ç”Ÿå·²åˆ é™¤');\n      const usersData = await getUsers(1, 50, 'student');\n      setUsers(usersData.users);\n    } catch (error) {\n      setError(error.response?.data?.error || 'åˆ é™¤å­¦ç”Ÿå¤±è´¥');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // è¯¾ç¨‹ç›¸å…³å¤„ç†å‡½æ•°\n  const handleCourseSchoolChange = async (schoolId) => {\n    setCourseForm(prev => ({ \n      ...prev, \n      school_id: schoolId,\n      major_id: '',\n      class_id: ''\n    }));\n    \n    if (schoolId) {\n      try {\n        const majorsData = await getMajors(schoolId);\n        setMajors(majorsData);\n      } catch (error) {\n        console.error('Error fetching majors:', error);\n      }\n    } else {\n      setMajors([]);\n    }\n  };\n\n  const handleCourseMajorChange = async (majorId) => {\n    setCourseForm(prev => ({ \n      ...prev, \n      major_id: majorId,\n      class_id: ''\n    }));\n    \n    if (majorId) {\n      try {\n        const classesData = await getClasses(majorId);\n        setClasses(classesData);\n      } catch (error) {\n        console.error('Error fetching classes:', error);\n      }\n    } else {\n      setClasses([]);\n    }\n  };\n\n  const handleCreateCourse = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      if (isEditingCourse && editingCourse) {\n        await updateCourse(editingCourse.id, courseForm);\n        setSuccess('è¯¾ç¨‹æ›´æ–°æˆåŠŸï¼');\n      } else {\n        await createCourse(courseForm);\n        setSuccess('è¯¾ç¨‹åˆ›å»ºæˆåŠŸï¼');\n      }\n      \n      // é‡ç½®è¡¨å•\n      setCourseForm({\n        name: '',\n        description: '',\n        class_id: '',\n        major_id: '',\n        school_id: ''\n      });\n      \n      setIsEditingCourse(false);\n      setEditingCourse(null);\n      \n      // åˆ·æ–°è¯¾ç¨‹åˆ—è¡¨\n      const coursesData = await getTeacherCourses();\n      setCourses(coursesData.courses || []);\n      \n      // åˆ‡æ¢åˆ°è¯¾ç¨‹åˆ—è¡¨\n      setActiveSubTab('list');\n      \n    } catch (error) {\n      setError(error.response?.data?.error || (isEditingCourse ? 'æ›´æ–°è¯¾ç¨‹å¤±è´¥' : 'åˆ›å»ºè¯¾ç¨‹å¤±è´¥'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditCourse = (course) => {\n    setEditingCourse(course);\n    setCourseForm({\n      name: course.name,\n      description: course.description || '',\n      school_id: course.school_id || '',\n      major_id: course.major_id || '',\n      class_id: course.class_id || ''\n    });\n    setIsEditingCourse(true);\n    setActiveSubTab('add');\n  };\n\n  const handleDeleteCourse = async (courseId) => {\n    if (!window.confirm('ç¡®å®šè¦åˆ é™¤è¯¥è¯¾ç¨‹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')) return;\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      await deleteCourse(courseId);\n      setSuccess('è¯¾ç¨‹å·²åˆ é™¤');\n      \n      // åˆ·æ–°è¯¾ç¨‹åˆ—è¡¨\n      const coursesData = await getTeacherCourses();\n      setCourses(coursesData.courses || []);\n      \n    } catch (error) {\n      setError(error.response?.data?.error || 'åˆ é™¤è¯¾ç¨‹å¤±è´¥');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleViewCourseDetail = (courseId) => {\n    const course = courses.find(c => c.id === courseId);\n    if (course) {\n      setActiveTab('courses');\n      setActiveSubTab('detail');\n      setEditingCourse(course);\n    }\n  };\n\n  // ä½œä¸šç›¸å…³å¤„ç†å‡½æ•°\n  const handleCreateAssignment = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      // å¦‚æžœåœ¨è¯¾ç¨‹è¯¦æƒ…é¡µé¢åˆ›å»ºä½œä¸šï¼Œè‡ªåŠ¨è®¾ç½®è¯¾ç¨‹ID\n      const assignmentData = { ...assignmentForm };\n      if (activeSubTab === 'create-assignment' && editingCourse) {\n        assignmentData.course_id = editingCourse.id;\n      }\n      \n      if (isEditingAssignment && editingAssignment) {\n        await updateAssignment(editingAssignment.id, assignmentData);\n        setSuccess('ä½œä¸šæ›´æ–°æˆåŠŸï¼');\n      } else {\n        await createAssignment(assignmentData);\n        setSuccess('ä½œä¸šå¸ƒç½®æˆåŠŸï¼');\n      }\n      \n      // é‡ç½®è¡¨å•\n      setAssignmentForm({\n        name: '',\n        description: '',\n        requirements: '',\n        due_date: '',\n        course_id: '',\n        problem_ids: []\n      });\n      \n      setIsEditingAssignment(false);\n      setEditingAssignment(null);\n      \n      // åˆ·æ–°ä½œä¸šåˆ—è¡¨\n      const assignmentsData = await getCourseAssignments();\n      setAssignments(assignmentsData.assignments || []);\n      \n      // å¦‚æžœåœ¨è¯¾ç¨‹è¯¦æƒ…é¡µé¢ï¼Œè¿”å›žåˆ°è¯¾ç¨‹è¯¦æƒ…ï¼›å¦åˆ™è¿”å›žåˆ°è¯¾ç¨‹åˆ—è¡¨\n      if (activeSubTab === 'create-assignment') {\n        setActiveSubTab('detail');\n      } else {\n        setActiveSubTab('list');\n      }\n      \n    } catch (error) {\n      setError(error.response?.data?.error || (isEditingAssignment ? 'æ›´æ–°ä½œä¸šå¤±è´¥' : 'å¸ƒç½®ä½œä¸šå¤±è´¥'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditAssignment = (assignment) => {\n    setEditingAssignment(assignment);\n    setAssignmentForm({\n      name: assignment.name,\n      description: assignment.description || '',\n      requirements: assignment.requirements || '',\n      due_date: assignment.due_date || '',\n      course_id: assignment.course_id || '',\n      problem_ids: assignment.problem_ids || []\n    });\n    setIsEditingAssignment(true);\n    \n    // è®°å½•ç¼–è¾‘ä½œä¸šæ—¶çš„ä¸Šä¸‹æ–‡\n    if (activeSubTab === 'detail' && editingCourse) {\n      setEditingAssignmentContext('course-detail');\n    } else {\n      setEditingAssignmentContext('course-list');\n    }\n    \n    // åˆ‡æ¢åˆ°ä½œä¸šåˆ›å»ºæ¨¡å¼\n    setActiveSubTab('create-assignment');\n  };\n\n  const handleDeleteAssignment = async (assignmentId) => {\n    if (!window.confirm('ç¡®å®šè¦åˆ é™¤è¯¥ä½œä¸šå—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')) return;\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n      \n      await deleteAssignment(assignmentId);\n      setSuccess('ä½œä¸šå·²åˆ é™¤');\n      \n      // åˆ·æ–°ä½œä¸šåˆ—è¡¨\n      const assignmentsData = await getCourseAssignments();\n      setAssignments(assignmentsData.assignments || []);\n      \n    } catch (error) {\n      setError(error.response?.data?.error || 'åˆ é™¤ä½œä¸šå¤±è´¥');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"teacher-dashboard\">\n      <div className=\"dashboard-header\">\n        <h1>æ•™å¸ˆç®¡ç†æŽ§åˆ¶å°</h1>\n      </div>\n      \n      <div className=\"dashboard-tabs\">\n        <button \n          className={`tab-btn ${activeTab === 'students' ? 'active' : ''}`}\n          onClick={() => {\n            setActiveTab('students');\n            setActiveSubTab('list');\n            // æ¸…é™¤è¯¾ç¨‹ç›¸å…³çŠ¶æ€\n            setEditingCourse(null);\n            setEditingAssignmentContext('');\n            setAddingStudentContext('');\n          }}\n        >\n          å­¦ç”Ÿç®¡ç†\n        </button>\n        <button \n          className={`tab-btn ${activeTab === 'problems' ? 'active' : ''}`}\n          onClick={() => {\n            setActiveTab('problems');\n            setActiveSubTab('list');\n            // æ¸…é™¤è¯¾ç¨‹ç›¸å…³çŠ¶æ€\n            setEditingCourse(null);\n            setEditingAssignmentContext('');\n            setAddingStudentContext('');\n          }}\n        >\n          é¢˜ç›®ç®¡ç†\n        </button>\n        <button \n          className={`tab-btn ${activeTab === 'courses' ? 'active' : ''}`}\n          onClick={() => {\n            setActiveTab('courses');\n            setActiveSubTab('list');\n            // æ¸…é™¤è¯¾ç¨‹è¯¦æƒ…çŠ¶æ€ï¼Œä½†ä¿ç•™è¯¾ç¨‹åˆ—è¡¨\n            setEditingCourse(null);\n            setEditingAssignmentContext('');\n            setAddingStudentContext('');\n          }}\n        >\n          æˆ‘çš„è¯¾ç¨‹\n        </button>\n      </div>\n      \n      {error && <div className=\"error-message\">{error}</div>}\n      {success && <div className=\"success-message\">{success}</div>}\n      \n      {activeTab === 'students' && renderStudentsTab()}\n      {activeTab === 'problems' && renderProblemsTab()}\n      {activeTab === 'courses' && renderCoursesTab()}\n      \n      {/* ç¼–è¾‘å­¦ç”Ÿè¡¨å• - å…¨å±€æ˜¾ç¤º */}\n      {editingUser && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal\">\n            <div className=\"modal-header\">\n              <h3>ç¼–è¾‘å­¦ç”Ÿï¼š{editingUser.name}ï¼ˆå­¦å·{editingUser.username}ï¼‰</h3>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>é‚®ç®±ï¼š</label>\n                  <input type=\"email\" value={editForm.email} onChange={(e) => setEditForm(prev => ({ ...prev, email: e.target.value }))} />\n                </div>\n                <div className=\"form-group\">\n                  <label>æ‰‹æœºå·ï¼š</label>\n                  <input type=\"tel\" value={editForm.phone} onChange={(e) => setEditForm(prev => ({ ...prev, phone: e.target.value }))} />\n                </div>\n              </div>\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>å­¦æ ¡ï¼š</label>\n                  <select value={editForm.school_id} onChange={async (e) => {\n                    const val = e.target.value;\n                    setEditForm(prev => ({ ...prev, school_id: val, major_id: '', class_id: '' }));\n                    if (val) {\n                      const majorsData = await getMajors(val);\n                      setMajors(majorsData);\n                    } else {\n                      setMajors([]);\n                      setClasses([]);\n                    }\n                  }}>\n                    <option value=\"\">è¯·é€‰æ‹©å­¦æ ¡</option>\n                    {schools.map(s => <option key={s.id} value={s.id}>{s.name}</option>)}\n                  </select>\n                </div>\n                <div className=\"form-group\">\n                  <label>ä¸“ä¸šï¼š</label>\n                  <select value={editForm.major_id} onChange={async (e) => {\n                    const val = e.target.value;\n                    setEditForm(prev => ({ ...prev, major_id: val, class_id: '' }));\n                    if (val) {\n                      const classesData = await getClasses(val);\n                      setClasses(classesData);\n                    } else {\n                      setClasses([]);\n                    }\n                  }} disabled={!editForm.school_id}>\n                    <option value=\"\">è¯·é€‰æ‹©ä¸“ä¸š</option>\n                    {majors.map(m => <option key={m.id} value={m.id}>{m.name}</option>)}\n                  </select>\n                </div>\n              </div>\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>ç­çº§ï¼š</label>\n                  <select value={editForm.class_id} onChange={(e) => setEditForm(prev => ({ ...prev, class_id: e.target.value }))} disabled={!editForm.major_id}>\n                    <option value=\"\">è¯·é€‰æ‹©ç­çº§</option>\n                    {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n                  </select>\n                </div>\n                <div className=\"form-group\">\n                  <label>é‡ç½®å¯†ç ï¼ˆå¯é€‰ï¼‰ï¼š</label>\n                  <input type=\"password\" value={editForm.new_password} onChange={(e) => setEditForm(prev => ({ ...prev, new_password: e.target.value }))} />\n                </div>\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button className=\"secondary-btn\" onClick={handleCancelEditStudent}>å–æ¶ˆ</button>\n              <button className=\"submit-btn\" onClick={handleSaveStudent} disabled={loading}>{loading ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜'}</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TeacherDashboardPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}