{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{getProblems}from'../services/api';import'./ProblemListPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProblemListPage=()=>{const[problems,setProblems]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[difficulty,setDifficulty]=useState('');useEffect(()=>{fetchProblems();},[currentPage,difficulty]);const fetchProblems=async()=>{try{setLoading(true);const result=await getProblems(currentPage,10,difficulty);setProblems(result.problems);setTotalPages(result.pages);}catch(error){setError('获取题目列表失败');console.error('Error fetching problems:',error);}finally{setLoading(false);}};const handleDifficultyChange=newDifficulty=>{setDifficulty(newDifficulty);setCurrentPage(1);};const getDifficultyColor=diff=>{switch(diff){case'easy':return'#52c41a';case'medium':return'#faad14';case'hard':return'#f5222d';default:return'#666';}};const getDifficultyText=diff=>{switch(diff){case'easy':return'简单';case'medium':return'中等';case'hard':return'困难';default:return'未知';}};if(loading&&problems.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"problem-list-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u52A0\\u8F7D\\u4E2D...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"problem-list-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"problem-list-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u9898\\u76EE\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filters\",children:/*#__PURE__*/_jsxs(\"select\",{value:difficulty,onChange:e=>handleDifficultyChange(e.target.value),className:\"difficulty-filter\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u5168\\u90E8\\u96BE\\u5EA6\"}),/*#__PURE__*/_jsx(\"option\",{value:\"easy\",children:\"\\u7B80\\u5355\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"\\u4E2D\\u7B49\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hard\",children:\"\\u56F0\\u96BE\"})]})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"problem-grid\",children:problems.map(problem=>/*#__PURE__*/_jsxs(\"div\",{className:\"problem-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"problem-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"problem-title\",children:/*#__PURE__*/_jsxs(Link,{to:\"/problem/\".concat(problem.id),children:[problem.id,\". \",problem.title]})}),/*#__PURE__*/_jsx(\"span\",{className:\"difficulty-badge\",style:{backgroundColor:getDifficultyColor(problem.difficulty)},children:getDifficultyText(problem.difficulty)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"problem-info\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"problem-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u65F6\\u95F4\\u9650\\u5236: \",problem.time_limit,\"ms\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u5185\\u5B58\\u9650\\u5236: \",problem.memory_limit,\"MB\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"problem-actions\",children:/*#__PURE__*/_jsx(Link,{to:\"/problem/\".concat(problem.id),className:\"view-btn\",children:\"\\u67E5\\u770B\\u8BE6\\u60C5\"})})]},problem.id))}),totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(Math.max(1,currentPage-1)),disabled:currentPage===1,className:\"page-btn\",children:\"\\u4E0A\\u4E00\\u9875\"}),Array.from({length:totalPages},(_,i)=>i+1).map(page=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(page),className:\"page-btn \".concat(currentPage===page?'active':''),children:page},page)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(Math.min(totalPages,currentPage+1)),disabled:currentPage===totalPages,className:\"page-btn\",children:\"\\u4E0B\\u4E00\\u9875\"})]})]});};export default ProblemListPage;","map":{"version":3,"names":["React","useState","useEffect","Link","getProblems","jsx","_jsx","jsxs","_jsxs","ProblemListPage","problems","setProblems","loading","setLoading","error","setError","currentPage","setCurrentPage","totalPages","setTotalPages","difficulty","setDifficulty","fetchProblems","result","pages","console","handleDifficultyChange","newDifficulty","getDifficultyColor","diff","getDifficultyText","length","className","children","value","onChange","e","target","map","problem","to","concat","id","title","style","backgroundColor","time_limit","memory_limit","onClick","Math","max","disabled","Array","from","_","i","page","min"],"sources":["/Volumes/坞城/OJ_1/frontend/src/pages/ProblemListPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getProblems } from '../services/api';\nimport './ProblemListPage.css';\n\nconst ProblemListPage = () => {\n  const [problems, setProblems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [difficulty, setDifficulty] = useState('');\n\n  useEffect(() => {\n    fetchProblems();\n  }, [currentPage, difficulty]);\n\n  const fetchProblems = async () => {\n    try {\n      setLoading(true);\n      const result = await getProblems(currentPage, 10, difficulty);\n      setProblems(result.problems);\n      setTotalPages(result.pages);\n    } catch (error) {\n      setError('获取题目列表失败');\n      console.error('Error fetching problems:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDifficultyChange = (newDifficulty) => {\n    setDifficulty(newDifficulty);\n    setCurrentPage(1);\n  };\n\n  const getDifficultyColor = (diff) => {\n    switch (diff) {\n      case 'easy': return '#52c41a';\n      case 'medium': return '#faad14';\n      case 'hard': return '#f5222d';\n      default: return '#666';\n    }\n  };\n\n  const getDifficultyText = (diff) => {\n    switch (diff) {\n      case 'easy': return '简单';\n      case 'medium': return '中等';\n      case 'hard': return '困难';\n      default: return '未知';\n    }\n  };\n\n  if (loading && problems.length === 0) {\n    return (\n      <div className=\"problem-list-container\">\n        <div className=\"loading\">加载中...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"problem-list-container\">\n      <div className=\"problem-list-header\">\n        <h1>题目列表</h1>\n        <div className=\"filters\">\n          <select \n            value={difficulty} \n            onChange={(e) => handleDifficultyChange(e.target.value)}\n            className=\"difficulty-filter\"\n          >\n            <option value=\"\">全部难度</option>\n            <option value=\"easy\">简单</option>\n            <option value=\"medium\">中等</option>\n            <option value=\"hard\">困难</option>\n          </select>\n        </div>\n      </div>\n\n      {error && <div className=\"error-message\">{error}</div>}\n\n      <div className=\"problem-grid\">\n        {problems.map(problem => (\n          <div key={problem.id} className=\"problem-card\">\n            <div className=\"problem-header\">\n              <h3 className=\"problem-title\">\n                <Link to={`/problem/${problem.id}`}>\n                  {problem.id}. {problem.title}\n                </Link>\n              </h3>\n              <span \n                className=\"difficulty-badge\"\n                style={{ backgroundColor: getDifficultyColor(problem.difficulty) }}\n              >\n                {getDifficultyText(problem.difficulty)}\n              </span>\n            </div>\n            \n            <div className=\"problem-info\">\n              <div className=\"problem-meta\">\n                <span>时间限制: {problem.time_limit}ms</span>\n                <span>内存限制: {problem.memory_limit}MB</span>\n              </div>\n            </div>\n            \n            <div className=\"problem-actions\">\n              <Link \n                to={`/problem/${problem.id}`} \n                className=\"view-btn\"\n              >\n                查看详情\n              </Link>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {totalPages > 1 && (\n        <div className=\"pagination\">\n          <button \n            onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\n            disabled={currentPage === 1}\n            className=\"page-btn\"\n          >\n            上一页\n          </button>\n          \n          {Array.from({ length: totalPages }, (_, i) => i + 1).map(page => (\n            <button\n              key={page}\n              onClick={() => setCurrentPage(page)}\n              className={`page-btn ${currentPage === page ? 'active' : ''}`}\n            >\n              {page}\n            </button>\n          ))}\n          \n          <button \n            onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}\n            disabled={currentPage === totalPages}\n            className=\"page-btn\"\n          >\n            下一页\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProblemListPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}